{"ast":null,"code":"import { autoTextColor, deepExtend, getTemplate, valueOrDefault } from '../../common';\nimport { CENTER, ROUNDED_RECT, BOTTOM, WHITE } from '../../common/constants';\nimport { ChartElement, Point, rectToBox, ShapeElement, TextBox } from '../../core';\nimport { TOOLTIP_OFFSET } from '../constants';\nimport NoteMixin from '../mixins/note-mixin';\nimport PointEventsMixin from '../mixins/point-events-mixin';\n\nvar HeatmapPoint = function (ChartElement) {\n  function HeatmapPoint(value, options) {\n    ChartElement.call(this);\n    this.options = options;\n    this.color = options.color || WHITE;\n    this.value = value;\n  }\n\n  if (ChartElement) HeatmapPoint.__proto__ = ChartElement;\n  HeatmapPoint.prototype = Object.create(ChartElement && ChartElement.prototype);\n  HeatmapPoint.prototype.constructor = HeatmapPoint;\n\n  HeatmapPoint.prototype.render = function render() {\n    if (this._rendered) {\n      return;\n    }\n\n    this._rendered = true;\n    this.createMarker();\n    this.createLabel();\n    this.createNote();\n  };\n\n  HeatmapPoint.prototype.createLabel = function createLabel() {\n    var options = this.options;\n    var labels = options.labels;\n\n    if (labels.visible) {\n      var pointData = this.pointData();\n      var labelTemplate = getTemplate(labels);\n      var labelText;\n      var labelColor = labels.color;\n\n      if (labelTemplate) {\n        labelText = labelTemplate(pointData);\n      } else {\n        labelText = this.formatValue(labels.format);\n      }\n\n      if (!labelColor) {\n        labelColor = autoTextColor(this.color);\n      }\n\n      this.label = new TextBox(labelText, deepExtend({\n        align: CENTER,\n        vAlign: CENTER,\n        margin: {\n          left: 5,\n          right: 5\n        },\n        zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n      }, labels, {\n        color: labelColor\n      }), pointData);\n      this.append(this.label);\n    }\n  };\n\n  HeatmapPoint.prototype.formatValue = function formatValue(format) {\n    return this.owner.formatPointValue(this, format);\n  };\n\n  HeatmapPoint.prototype.reflow = function reflow(targetBox) {\n    this.render();\n    var label = this.label;\n    this.box = targetBox;\n\n    if (label) {\n      label.reflow(this.markerBox());\n    }\n\n    if (this.note) {\n      this.note.reflow(targetBox);\n    }\n\n    this.marker.reflow(this.markerBox());\n  };\n\n  HeatmapPoint.prototype.markerBox = function markerBox() {\n    var options = this.options;\n    var markers = options.markers;\n    var border = markers.border;\n    var rect = this.box.toRect();\n    var type = valueOrDefault(markers.type, 'rect');\n    var isRoundRect = type === ROUNDED_RECT;\n    var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n    var halfBorderWidth = Math.round(borderWidth / 2);\n\n    if (markers.size) {\n      var center = rect.center();\n      rect.size.width = rect.size.height = markers.size;\n      rect.origin.x = Math.round(center.x - rect.size.width / 2);\n      rect.origin.y = Math.round(center.y - rect.size.height / 2);\n    }\n\n    rect.size.width -= borderWidth;\n    rect.size.height -= borderWidth;\n    rect.origin.y += halfBorderWidth + 0.5;\n    rect.origin.x += halfBorderWidth + 0.5;\n    return rectToBox(rect);\n  };\n\n  HeatmapPoint.prototype.markerBorder = function markerBorder() {\n    var options = this.options;\n    var markers = options.markers;\n    var border = markers.border;\n    var opacity = valueOrDefault(border.opacity, options.opacity);\n    return {\n      color: border.color || this.color,\n      width: border.width,\n      opacity: opacity,\n      dashType: border.dashType\n    };\n  };\n\n  HeatmapPoint.prototype.createMarker = function createMarker() {\n    var options = this.options;\n    var markerOptions = options.markers;\n    var marker = new ShapeElement({\n      type: valueOrDefault(markerOptions.type, 'rect'),\n      width: markerOptions.size,\n      height: markerOptions.size,\n      rotation: markerOptions.rotation,\n      background: this.color,\n      border: this.markerBorder(),\n      borderRadius: markerOptions.borderRadius,\n      opacity: this.series.opacity || options.opacity,\n      zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n      animation: options.animation,\n      visual: options.visual\n    }, {\n      dataItem: this.dataItem,\n      value: this.value,\n      series: this.series,\n      category: this.category\n    });\n    this.marker = marker;\n    this.append(marker);\n  };\n\n  HeatmapPoint.prototype.createHighlight = function createHighlight(style) {\n    var options = this.options;\n    var markerOptions = this.options.highlight.markers || this.options.markers;\n    var highlight = new ShapeElement({\n      type: valueOrDefault(markerOptions.type, 'rect'),\n      width: markerOptions.size,\n      height: markerOptions.size,\n      rotation: markerOptions.rotation,\n      background: markerOptions.color || this.color,\n      border: this.markerBorder(),\n      borderRadius: markerOptions.borderRadius,\n      opacity: this.series.opacity || options.opacity,\n      zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n    });\n    highlight.reflow(this.markerBox());\n    var visual = highlight.getElement();\n    visual.options.fill = style.fill;\n    visual.options.stroke = style.stroke;\n    return visual;\n  };\n\n  HeatmapPoint.prototype.highlightVisual = function highlightVisual() {\n    return this.rectVisual;\n  };\n\n  HeatmapPoint.prototype.highlightVisualArgs = function highlightVisualArgs() {\n    return {\n      options: this.options,\n      rect: this.box.toRect(),\n      visual: this.rectVisual\n    };\n  };\n\n  HeatmapPoint.prototype.tooltipAnchor = function tooltipAnchor() {\n    var left = this.box.center().x;\n    var top = this.box.y1 - TOOLTIP_OFFSET;\n    return {\n      point: new Point(left, top),\n      align: {\n        horizontal: CENTER,\n        vertical: BOTTOM\n      }\n    };\n  };\n\n  HeatmapPoint.prototype.overlapsBox = function overlapsBox(box) {\n    return this.box.overlaps(box);\n  };\n\n  HeatmapPoint.prototype.unclipElements = function unclipElements() {\n    /* noop, clip labels */\n  };\n\n  HeatmapPoint.prototype.pointData = function pointData() {\n    return {\n      x: this.value.x,\n      y: this.value.y,\n      value: this.value.value,\n      dataItem: this.dataItem,\n      series: this.series\n    };\n  };\n\n  return HeatmapPoint;\n}(ChartElement);\n\ndeepExtend(HeatmapPoint.prototype, PointEventsMixin);\ndeepExtend(HeatmapPoint.prototype, NoteMixin);\nHeatmapPoint.prototype.defaults = {\n  markers: {\n    type: 'rect',\n    borderRadius: 4,\n    border: {\n      color: 'transparent'\n    }\n  },\n  padding: {\n    top: 1\n  },\n  labels: {\n    visible: false,\n    padding: 3\n  },\n  opacity: 1,\n  notes: {\n    label: {}\n  }\n};\nexport default HeatmapPoint;","map":{"version":3,"sources":["/home/meryem/repos/Movie_Trend_Visualizer/client/node_modules/@progress/kendo-charts/dist/es/chart/heatmap-chart/heatmap-point.js"],"names":["autoTextColor","deepExtend","getTemplate","valueOrDefault","CENTER","ROUNDED_RECT","BOTTOM","WHITE","ChartElement","Point","rectToBox","ShapeElement","TextBox","TOOLTIP_OFFSET","NoteMixin","PointEventsMixin","HeatmapPoint","value","options","call","color","__proto__","prototype","Object","create","constructor","render","_rendered","createMarker","createLabel","createNote","labels","visible","pointData","labelTemplate","labelText","labelColor","formatValue","format","label","align","vAlign","margin","left","right","zIndex","series","append","owner","formatPointValue","reflow","targetBox","box","markerBox","note","marker","markers","border","rect","toRect","type","isRoundRect","borderWidth","width","halfBorderWidth","Math","round","size","center","height","origin","x","y","markerBorder","opacity","dashType","markerOptions","rotation","background","borderRadius","animation","visual","dataItem","category","createHighlight","style","highlight","getElement","fill","stroke","highlightVisual","rectVisual","highlightVisualArgs","tooltipAnchor","top","y1","point","horizontal","vertical","overlapsBox","overlaps","unclipElements","defaults","padding","notes"],"mappings":"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","sourcesContent":["import { autoTextColor, deepExtend, getTemplate, valueOrDefault } from '../../common';\nimport { CENTER, ROUNDED_RECT, BOTTOM, WHITE } from '../../common/constants';\nimport { ChartElement, Point, rectToBox, ShapeElement, TextBox } from '../../core';\nimport { TOOLTIP_OFFSET } from '../constants';\nimport NoteMixin from '../mixins/note-mixin';\nimport PointEventsMixin from '../mixins/point-events-mixin';\n\nvar HeatmapPoint = (function (ChartElement) {\n    function HeatmapPoint(value, options) {\n        ChartElement.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.value = value;\n    }\n\n    if ( ChartElement ) HeatmapPoint.__proto__ = ChartElement;\n    HeatmapPoint.prototype = Object.create( ChartElement && ChartElement.prototype );\n    HeatmapPoint.prototype.constructor = HeatmapPoint;\n\n    HeatmapPoint.prototype.render = function render () {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createMarker();\n        this.createLabel();\n        this.createNote();\n    };\n\n    HeatmapPoint.prototype.createLabel = function createLabel () {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n            var labelColor = labels.color;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            if (!labelColor) {\n                labelColor = autoTextColor(this.color);\n            }\n\n            this.label = new TextBox(labelText,\n                deepExtend({\n                    align: CENTER,\n                    vAlign: CENTER,\n                    margin: {\n                        left: 5,\n                        right: 5\n                    },\n                    zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                },\n                labels, {\n                    color: labelColor\n                }),\n                pointData\n            );\n            this.append(this.label);\n        }\n    };\n\n    HeatmapPoint.prototype.formatValue = function formatValue (format) {\n        return this.owner.formatPointValue(this, format);\n    };\n\n    HeatmapPoint.prototype.reflow = function reflow (targetBox) {\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.reflow(this.markerBox());\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        this.marker.reflow(this.markerBox());\n    };\n\n    HeatmapPoint.prototype.markerBox = function markerBox () {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var rect = this.box.toRect();\n        var type = valueOrDefault(markers.type, 'rect');\n        var isRoundRect = type === ROUNDED_RECT;\n        var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n        var halfBorderWidth = Math.round(borderWidth / 2);\n\n        if (markers.size) {\n            var center = rect.center();\n            rect.size.width = rect.size.height = markers.size;\n            rect.origin.x = Math.round(center.x - rect.size.width / 2);\n            rect.origin.y = Math.round(center.y - rect.size.height / 2);\n        }\n\n        rect.size.width -= borderWidth;\n        rect.size.height -= borderWidth;\n        rect.origin.y += halfBorderWidth + 0.5;\n        rect.origin.x += halfBorderWidth + 0.5;\n\n        return rectToBox(rect);\n    };\n\n    HeatmapPoint.prototype.markerBorder = function markerBorder () {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var opacity = valueOrDefault(border.opacity, options.opacity);\n\n        return {\n            color: border.color || this.color,\n            width: border.width,\n            opacity: opacity,\n            dashType: border.dashType\n        };\n    };\n\n    HeatmapPoint.prototype.createMarker = function createMarker () {\n        var options = this.options;\n        var markerOptions = options.markers;\n        var marker = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        this.marker = marker;\n        this.append(marker);\n    };\n\n    HeatmapPoint.prototype.createHighlight = function createHighlight (style) {\n        var options = this.options;\n        var markerOptions = this.options.highlight.markers || this.options.markers;\n\n        var highlight = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: markerOptions.color || this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n        });\n\n        highlight.reflow(this.markerBox());\n        var visual = highlight.getElement();\n\n        visual.options.fill = style.fill;\n        visual.options.stroke = style.stroke;\n\n        return visual;\n    };\n\n    HeatmapPoint.prototype.highlightVisual = function highlightVisual () {\n        return this.rectVisual;\n    };\n\n    HeatmapPoint.prototype.highlightVisualArgs = function highlightVisualArgs () {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    };\n\n    HeatmapPoint.prototype.tooltipAnchor = function tooltipAnchor () {\n        var left = this.box.center().x;\n        var top = this.box.y1 - TOOLTIP_OFFSET;\n\n        return {\n            point: new Point(left, top),\n            align: {\n                horizontal: CENTER,\n                vertical: BOTTOM\n            }\n        };\n    };\n\n    HeatmapPoint.prototype.overlapsBox = function overlapsBox (box) {\n        return this.box.overlaps(box);\n    };\n\n    HeatmapPoint.prototype.unclipElements = function unclipElements () {\n        /* noop, clip labels */\n    };\n\n    HeatmapPoint.prototype.pointData = function pointData () {\n        return {\n            x: this.value.x,\n            y: this.value.y,\n            value: this.value.value,\n            dataItem: this.dataItem,\n            series: this.series\n        };\n    };\n\n    return HeatmapPoint;\n}(ChartElement));\n\ndeepExtend(HeatmapPoint.prototype, PointEventsMixin);\ndeepExtend(HeatmapPoint.prototype, NoteMixin);\n\nHeatmapPoint.prototype.defaults = {\n    markers: {\n        type: 'rect',\n        borderRadius: 4,\n        border: {\n            color: 'transparent'\n        }\n    },\n    padding: { top: 1 },\n    labels: {\n        visible: false,\n        padding: 3\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    }\n};\n\nexport default HeatmapPoint;\n"]},"metadata":{},"sourceType":"module"}