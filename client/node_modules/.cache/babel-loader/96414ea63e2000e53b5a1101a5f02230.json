{"ast":null,"code":"import { Class, elementOffset } from '../../common';\nimport { Observable } from './observable';\nimport { getEventMap, proxy, getSupportedFeatures } from '../utils';\nvar extend = Object.assign;\nvar CHANGE = 'change';\nexport var TapCapture = function (Observable) {\n  function TapCapture(element, options) {\n    Observable.call(this);\n    var that = this,\n        domElement = element[0] || element;\n    that.capture = false;\n    var eventMap = getEventMap(navigator.userAgent);\n\n    if (domElement.addEventListener) {\n      eventMap.down.split(' ').forEach(function (event) {\n        domElement.addEventListener(event, proxy(that._press, that), true);\n      });\n      eventMap.up.split(' ').forEach(function (event) {\n        domElement.addEventListener(event, proxy(that._release, that), true);\n      });\n    } else {\n      eventMap.down.split(' ').forEach(function (event) {\n        domElement.attachEvent(event, proxy(that._press, that));\n      });\n      eventMap.up.split(' ').forEach(function (event) {\n        domElement.attachEvent(event, proxy(that._release, that));\n      });\n    }\n\n    that.bind(['press', 'release'], options || {});\n  }\n\n  if (Observable) TapCapture.__proto__ = Observable;\n  TapCapture.prototype = Object.create(Observable && Observable.prototype);\n  TapCapture.prototype.constructor = TapCapture;\n\n  TapCapture.prototype.captureNext = function captureNext() {\n    this.capture = true;\n  };\n\n  TapCapture.prototype.cancelCapture = function cancelCapture() {\n    this.capture = false;\n  };\n\n  TapCapture.prototype._press = function _press(e) {\n    var that = this;\n    that.trigger('press');\n\n    if (that.capture) {\n      e.preventDefault();\n    }\n  };\n\n  TapCapture.prototype._release = function _release(e) {\n    var that = this;\n    that.trigger('release');\n\n    if (that.capture) {\n      e.preventDefault();\n      that.cancelCapture();\n    }\n  };\n\n  return TapCapture;\n}(Observable);\nexport var PaneDimension = function (Observable) {\n  function PaneDimension(options) {\n    Observable.call(this);\n    var that = this;\n    that.forcedEnabled = false;\n    extend(that, options);\n    that.scale = 1;\n\n    if (that.horizontal) {\n      that.measure = 'offsetWidth';\n      that.scrollSize = 'scrollWidth';\n      that.axis = 'x';\n    } else {\n      that.measure = 'offsetHeight';\n      that.scrollSize = 'scrollHeight';\n      that.axis = 'y';\n    }\n  }\n\n  if (Observable) PaneDimension.__proto__ = Observable;\n  PaneDimension.prototype = Object.create(Observable && Observable.prototype);\n  PaneDimension.prototype.constructor = PaneDimension;\n\n  PaneDimension.prototype.makeVirtual = function makeVirtual() {\n    extend(this, {\n      virtual: true,\n      forcedEnabled: true,\n      _virtualMin: 0,\n      _virtualMax: 0\n    });\n  };\n\n  PaneDimension.prototype.virtualSize = function virtualSize(min, max) {\n    if (this._virtualMin !== min || this._virtualMax !== max) {\n      this._virtualMin = min;\n      this._virtualMax = max;\n      this.update();\n    }\n  };\n\n  PaneDimension.prototype.outOfBounds = function outOfBounds(offset) {\n    return offset > this.max || offset < this.min;\n  };\n\n  PaneDimension.prototype.forceEnabled = function forceEnabled() {\n    this.forcedEnabled = true;\n  };\n\n  PaneDimension.prototype.getSize = function getSize() {\n    return this.container[this.measure];\n  };\n\n  PaneDimension.prototype.getTotal = function getTotal() {\n    return this.element[this.scrollSize];\n  };\n\n  PaneDimension.prototype.rescale = function rescale(scale) {\n    this.scale = scale;\n  };\n\n  PaneDimension.prototype.update = function update(silent) {\n    var that = this,\n        total = that.virtual ? that._virtualMax : that.getTotal(),\n        scaledTotal = total * that.scale,\n        size = that.getSize();\n\n    if (total === 0 && !that.forcedEnabled) {\n      return;\n    }\n\n    that.max = that.virtual ? -that._virtualMin : 0;\n    that.size = size;\n    that.total = scaledTotal;\n    that.min = Math.min(that.max, size - scaledTotal);\n    that.minScale = size / total;\n    that.centerOffset = (scaledTotal - size) / 2;\n    that.enabled = that.forcedEnabled || scaledTotal > size;\n\n    if (!silent) {\n      that.trigger(CHANGE, that);\n    }\n  };\n\n  return PaneDimension;\n}(Observable);\nexport var PaneDimensions = function (Observable) {\n  function PaneDimensions(options) {\n    Observable.call(this);\n    var that = this;\n    that.x = new PaneDimension(extend({\n      horizontal: true\n    }, options));\n    that.y = new PaneDimension(extend({\n      horizontal: false\n    }, options));\n    that.container = options.container;\n    that.forcedMinScale = options.minScale;\n    that.maxScale = options.maxScale || 100;\n    that.bind(CHANGE, options);\n  }\n\n  if (Observable) PaneDimensions.__proto__ = Observable;\n  PaneDimensions.prototype = Object.create(Observable && Observable.prototype);\n  PaneDimensions.prototype.constructor = PaneDimensions;\n\n  PaneDimensions.prototype.rescale = function rescale(newScale) {\n    this.x.rescale(newScale);\n    this.y.rescale(newScale);\n    this.refresh();\n  };\n\n  PaneDimensions.prototype.centerCoordinates = function centerCoordinates() {\n    return {\n      x: Math.min(0, -this.x.centerOffset),\n      y: Math.min(0, -this.y.centerOffset)\n    };\n  };\n\n  PaneDimensions.prototype.refresh = function refresh() {\n    var that = this;\n    that.x.update();\n    that.y.update();\n    that.enabled = that.x.enabled || that.y.enabled;\n    that.minScale = that.forcedMinScale || Math.min(that.x.minScale, that.y.minScale);\n    that.fitScale = Math.max(that.x.minScale, that.y.minScale);\n    that.trigger(CHANGE);\n  };\n\n  return PaneDimensions;\n}(Observable);\nexport var PaneAxis = function (Observable) {\n  function PaneAxis(options) {\n    Observable.call(this);\n    extend(this, options);\n  }\n\n  if (Observable) PaneAxis.__proto__ = Observable;\n  PaneAxis.prototype = Object.create(Observable && Observable.prototype);\n  PaneAxis.prototype.constructor = PaneAxis;\n\n  PaneAxis.prototype.outOfBounds = function outOfBounds() {\n    return this.dimension.outOfBounds(this.movable[this.axis]);\n  };\n\n  PaneAxis.prototype.dragMove = function dragMove(delta) {\n    var that = this,\n        dimension = that.dimension,\n        axis = that.axis,\n        movable = that.movable,\n        position = movable[axis] + delta;\n\n    if (!dimension.enabled) {\n      return;\n    }\n\n    var dragDelta = delta;\n\n    if (position < dimension.min && delta < 0 || position > dimension.max && delta > 0) {\n      dragDelta *= that.resistance;\n    }\n\n    movable.translateAxis(axis, dragDelta);\n    that.trigger(CHANGE, that);\n  };\n\n  return PaneAxis;\n}(Observable);\nexport var Pane = function (Class) {\n  function Pane(options) {\n    Class.call(this);\n    var that = this,\n        x,\n        y,\n        resistance,\n        movable;\n    extend(that, {\n      elastic: true\n    }, options);\n    resistance = that.elastic ? 0.5 : 0;\n    movable = that.movable;\n    that.x = x = new PaneAxis({\n      axis: 'x',\n      dimension: that.dimensions.x,\n      resistance: resistance,\n      movable: movable\n    });\n    that.y = y = new PaneAxis({\n      axis: 'y',\n      dimension: that.dimensions.y,\n      resistance: resistance,\n      movable: movable\n    });\n    that.userEvents.bind(['press', 'move', 'end', 'gesturestart', 'gesturechange'], {\n      gesturestart: function gesturestart(e) {\n        that.gesture = e;\n        that.offset = elementOffset(that.dimensions.container);\n      },\n      press: function press(e) {\n        var closestAnchor = e.event.target.closest('a');\n\n        if (closestAnchor && closestAnchor.matches('[data-navigate-on-press=true]')) {\n          e.sender.cancel();\n        }\n      },\n      gesturechange: function gesturechange(e) {\n        var previousGesture = that.gesture,\n            previousCenter = previousGesture.center,\n            center = e.center,\n            scaleDelta = e.distance / previousGesture.distance,\n            minScale = that.dimensions.minScale,\n            maxScale = that.dimensions.maxScale,\n            coordinates;\n\n        if (movable.scale <= minScale && scaleDelta < 1) {\n          scaleDelta += (1 - scaleDelta) * 0.8;\n        }\n\n        if (movable.scale * scaleDelta >= maxScale) {\n          scaleDelta = maxScale / movable.scale;\n        }\n\n        var offsetX = movable.x + that.offset.left,\n            offsetY = movable.y + that.offset.top;\n        coordinates = {\n          x: (offsetX - previousCenter.x) * scaleDelta + center.x - offsetX,\n          y: (offsetY - previousCenter.y) * scaleDelta + center.y - offsetY\n        };\n        movable.scaleWith(scaleDelta);\n        x.dragMove(coordinates.x);\n        y.dragMove(coordinates.y);\n        that.dimensions.rescale(movable.scale);\n        that.gesture = e;\n        e.preventDefault();\n      },\n      move: function move(e) {\n        if (e.event.target.tagName.match(/textarea|input/i)) {\n          return;\n        }\n\n        if (x.dimension.enabled || y.dimension.enabled) {\n          x.dragMove(e.x.delta);\n          y.dragMove(e.y.delta);\n          e.preventDefault();\n        } else {\n          e.touch.skip();\n        }\n      },\n      end: function end(e) {\n        e.preventDefault();\n      }\n    });\n  }\n\n  if (Class) Pane.__proto__ = Class;\n  Pane.prototype = Object.create(Class && Class.prototype);\n  Pane.prototype.constructor = Pane;\n  return Pane;\n}(Class);\n\nvar translate = function (x, y, scale) {\n  return 'translate3d(' + x + 'px,' + y + 'px,0) scale(' + scale + ')';\n};\n\nexport var Movable = function (Observable) {\n  function Movable(element) {\n    Observable.call(this);\n    var that = this;\n    that.support = getSupportedFeatures();\n    this.transformStyle = this.support.transitions.prefix + 'Transform';\n    that.element = element;\n    that.element.style.webkitTransformOrigin = 'left top';\n    that.x = 0;\n    that.y = 0;\n    that.scale = 1;\n    var coordinates = translate(that.x, that.y, that.scale);\n    that.element.style[this.transformStyle] = coordinates;\n\n    that._saveCoordinates(coordinates);\n  }\n\n  if (Observable) Movable.__proto__ = Observable;\n  Movable.prototype = Object.create(Observable && Observable.prototype);\n  Movable.prototype.constructor = Movable;\n\n  Movable.prototype.translateAxis = function translateAxis(axis, by) {\n    this[axis] += by;\n    this.refresh();\n  };\n\n  Movable.prototype.scaleTo = function scaleTo(scale) {\n    this.scale = scale;\n    this.refresh();\n  };\n\n  Movable.prototype.scaleWith = function scaleWith(scaleDelta) {\n    this.scale *= scaleDelta;\n    this.refresh();\n  };\n\n  Movable.prototype.translate = function translate(coordinates) {\n    this.x += coordinates.x;\n    this.y += coordinates.y;\n    this.refresh();\n  };\n\n  Movable.prototype.moveAxis = function moveAxis(axis, value) {\n    this[axis] = value;\n    this.refresh();\n  };\n\n  Movable.prototype.moveTo = function moveTo(coordinates) {\n    extend(this, coordinates);\n    this.refresh();\n  };\n\n  Movable.prototype.refresh = function refresh() {\n    var that = this,\n        x = that.x,\n        y = that.y,\n        newCoordinates;\n\n    if (that.round) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n\n    newCoordinates = translate(x, y, that.scale);\n\n    if (newCoordinates !== that.coordinates) {\n      that.element.style[this.transformStyle] = newCoordinates;\n\n      that._saveCoordinates(newCoordinates);\n\n      that.trigger(CHANGE);\n    }\n  };\n\n  Movable.prototype._saveCoordinates = function _saveCoordinates(coordinates) {\n    this.coordinates = coordinates;\n  };\n\n  return Movable;\n}(Observable);","map":{"version":3,"sources":["/home/meryem/repos/Movie_Trend_Visualizer/client/node_modules/@progress/kendo-charts/dist/es/map/scroller/draggable.js"],"names":["Class","elementOffset","Observable","getEventMap","proxy","getSupportedFeatures","extend","Object","assign","CHANGE","TapCapture","element","options","call","that","domElement","capture","eventMap","navigator","userAgent","addEventListener","down","split","forEach","event","_press","up","_release","attachEvent","bind","__proto__","prototype","create","constructor","captureNext","cancelCapture","e","trigger","preventDefault","PaneDimension","forcedEnabled","scale","horizontal","measure","scrollSize","axis","makeVirtual","virtual","_virtualMin","_virtualMax","virtualSize","min","max","update","outOfBounds","offset","forceEnabled","getSize","container","getTotal","rescale","silent","total","scaledTotal","size","Math","minScale","centerOffset","enabled","PaneDimensions","x","y","forcedMinScale","maxScale","newScale","refresh","centerCoordinates","fitScale","PaneAxis","dimension","movable","dragMove","delta","position","dragDelta","resistance","translateAxis","Pane","elastic","dimensions","userEvents","gesturestart","gesture","press","closestAnchor","target","closest","matches","sender","cancel","gesturechange","previousGesture","previousCenter","center","scaleDelta","distance","coordinates","offsetX","left","offsetY","top","scaleWith","move","tagName","match","touch","skip","end","translate","Movable","support","transformStyle","transitions","prefix","style","webkitTransformOrigin","_saveCoordinates","by","scaleTo","moveAxis","value","moveTo","newCoordinates","round"],"mappings":"AAAA,SACIA,KADJ,EAEIC,aAFJ,QAGO,cAHP;AAKA,SACIC,UADJ,QAEO,cAFP;AAIA,SACIC,WADJ,EAEIC,KAFJ,EAGIC,oBAHJ,QAIO,UAJP;AAMA,IAAIC,MAAM,GAAGC,MAAM,CAACC,MAApB;AAEA,IAAIC,MAAM,GAAG,QAAb;AAEA,OAAO,IAAIC,UAAU,GAAI,UAAUR,UAAV,EAAsB;AAC3C,WAASQ,UAAT,CAAoBC,OAApB,EAA6BC,OAA7B,EAAsC;AAClCV,IAAAA,UAAU,CAACW,IAAX,CAAgB,IAAhB;AACA,QAAIC,IAAI,GAAG,IAAX;AAAA,QACIC,UAAU,GAAGJ,OAAO,CAAC,CAAD,CAAP,IAAcA,OAD/B;AAGAG,IAAAA,IAAI,CAACE,OAAL,GAAe,KAAf;AAEA,QAAIC,QAAQ,GAAGd,WAAW,CAACe,SAAS,CAACC,SAAX,CAA1B;;AAEA,QAAIJ,UAAU,CAACK,gBAAf,EAAiC;AAC7BH,MAAAA,QAAQ,CAACI,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyBC,OAAzB,CAAiC,UAASC,KAAT,EAAgB;AAC7CT,QAAAA,UAAU,CAACK,gBAAX,CAA4BI,KAA5B,EAAmCpB,KAAK,CAACU,IAAI,CAACW,MAAN,EAAcX,IAAd,CAAxC,EAA6D,IAA7D;AACH,OAFD;AAGAG,MAAAA,QAAQ,CAACS,EAAT,CAAYJ,KAAZ,CAAkB,GAAlB,EAAuBC,OAAvB,CAA+B,UAASC,KAAT,EAAgB;AAC3CT,QAAAA,UAAU,CAACK,gBAAX,CAA4BI,KAA5B,EAAmCpB,KAAK,CAACU,IAAI,CAACa,QAAN,EAAgBb,IAAhB,CAAxC,EAA+D,IAA/D;AACH,OAFD;AAGH,KAPD,MAOO;AACHG,MAAAA,QAAQ,CAACI,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyBC,OAAzB,CAAiC,UAASC,KAAT,EAAgB;AAC7CT,QAAAA,UAAU,CAACa,WAAX,CAAuBJ,KAAvB,EAA8BpB,KAAK,CAACU,IAAI,CAACW,MAAN,EAAcX,IAAd,CAAnC;AACH,OAFD;AAGAG,MAAAA,QAAQ,CAACS,EAAT,CAAYJ,KAAZ,CAAkB,GAAlB,EAAuBC,OAAvB,CAA+B,UAASC,KAAT,EAAgB;AAC3CT,QAAAA,UAAU,CAACa,WAAX,CAAuBJ,KAAvB,EAA8BpB,KAAK,CAACU,IAAI,CAACa,QAAN,EAAgBb,IAAhB,CAAnC;AACH,OAFD;AAGH;;AAEDA,IAAAA,IAAI,CAACe,IAAL,CAAU,CACN,OADM,EAEN,SAFM,CAAV,EAGGjB,OAAO,IAAI,EAHd;AAIH;;AAED,MAAKV,UAAL,EAAkBQ,UAAU,CAACoB,SAAX,GAAuB5B,UAAvB;AAClBQ,EAAAA,UAAU,CAACqB,SAAX,GAAuBxB,MAAM,CAACyB,MAAP,CAAe9B,UAAU,IAAIA,UAAU,CAAC6B,SAAxC,CAAvB;AACArB,EAAAA,UAAU,CAACqB,SAAX,CAAqBE,WAArB,GAAmCvB,UAAnC;;AAEAA,EAAAA,UAAU,CAACqB,SAAX,CAAqBG,WAArB,GAAmC,SAASA,WAAT,GAAwB;AACvD,SAAKlB,OAAL,GAAe,IAAf;AACH,GAFD;;AAIAN,EAAAA,UAAU,CAACqB,SAAX,CAAqBI,aAArB,GAAqC,SAASA,aAAT,GAA0B;AAC3D,SAAKnB,OAAL,GAAe,KAAf;AACH,GAFD;;AAIAN,EAAAA,UAAU,CAACqB,SAAX,CAAqBN,MAArB,GAA8B,SAASA,MAAT,CAAiBW,CAAjB,EAAoB;AAC9C,QAAItB,IAAI,GAAG,IAAX;AAEAA,IAAAA,IAAI,CAACuB,OAAL,CAAa,OAAb;;AAEA,QAAIvB,IAAI,CAACE,OAAT,EAAkB;AACdoB,MAAAA,CAAC,CAACE,cAAF;AACH;AACJ,GARD;;AAUA5B,EAAAA,UAAU,CAACqB,SAAX,CAAqBJ,QAArB,GAAgC,SAASA,QAAT,CAAmBS,CAAnB,EAAsB;AAClD,QAAItB,IAAI,GAAG,IAAX;AAEAA,IAAAA,IAAI,CAACuB,OAAL,CAAa,SAAb;;AAEA,QAAIvB,IAAI,CAACE,OAAT,EAAkB;AACdoB,MAAAA,CAAC,CAACE,cAAF;AACAxB,MAAAA,IAAI,CAACqB,aAAL;AACH;AACJ,GATD;;AAWA,SAAOzB,UAAP;AACH,CAlEwB,CAkEvBR,UAlEuB,CAAlB;AAoEP,OAAO,IAAIqC,aAAa,GAAI,UAAUrC,UAAV,EAAsB;AAC9C,WAASqC,aAAT,CAAuB3B,OAAvB,EAAgC;AAC5BV,IAAAA,UAAU,CAACW,IAAX,CAAgB,IAAhB;AACA,QAAIC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC0B,aAAL,GAAqB,KAArB;AACAlC,IAAAA,MAAM,CAACQ,IAAD,EAAOF,OAAP,CAAN;AACAE,IAAAA,IAAI,CAAC2B,KAAL,GAAa,CAAb;;AAEA,QAAI3B,IAAI,CAAC4B,UAAT,EAAqB;AACjB5B,MAAAA,IAAI,CAAC6B,OAAL,GAAe,aAAf;AACA7B,MAAAA,IAAI,CAAC8B,UAAL,GAAkB,aAAlB;AACA9B,MAAAA,IAAI,CAAC+B,IAAL,GAAY,GAAZ;AACH,KAJD,MAIO;AACH/B,MAAAA,IAAI,CAAC6B,OAAL,GAAe,cAAf;AACA7B,MAAAA,IAAI,CAAC8B,UAAL,GAAkB,cAAlB;AACA9B,MAAAA,IAAI,CAAC+B,IAAL,GAAY,GAAZ;AACH;AACJ;;AAED,MAAK3C,UAAL,EAAkBqC,aAAa,CAACT,SAAd,GAA0B5B,UAA1B;AAClBqC,EAAAA,aAAa,CAACR,SAAd,GAA0BxB,MAAM,CAACyB,MAAP,CAAe9B,UAAU,IAAIA,UAAU,CAAC6B,SAAxC,CAA1B;AACAQ,EAAAA,aAAa,CAACR,SAAd,CAAwBE,WAAxB,GAAsCM,aAAtC;;AAEAA,EAAAA,aAAa,CAACR,SAAd,CAAwBe,WAAxB,GAAsC,SAASA,WAAT,GAAwB;AAC1DxC,IAAAA,MAAM,CAAC,IAAD,EAAO;AACTyC,MAAAA,OAAO,EAAE,IADA;AAETP,MAAAA,aAAa,EAAE,IAFN;AAGTQ,MAAAA,WAAW,EAAE,CAHJ;AAITC,MAAAA,WAAW,EAAE;AAJJ,KAAP,CAAN;AAMH,GAPD;;AASAV,EAAAA,aAAa,CAACR,SAAd,CAAwBmB,WAAxB,GAAsC,SAASA,WAAT,CAAsBC,GAAtB,EAA2BC,GAA3B,EAAgC;AAClE,QAAI,KAAKJ,WAAL,KAAqBG,GAArB,IAA4B,KAAKF,WAAL,KAAqBG,GAArD,EAA0D;AACtD,WAAKJ,WAAL,GAAmBG,GAAnB;AACA,WAAKF,WAAL,GAAmBG,GAAnB;AACA,WAAKC,MAAL;AACH;AACJ,GAND;;AAQAd,EAAAA,aAAa,CAACR,SAAd,CAAwBuB,WAAxB,GAAsC,SAASA,WAAT,CAAsBC,MAAtB,EAA8B;AAChE,WAAOA,MAAM,GAAG,KAAKH,GAAd,IAAqBG,MAAM,GAAG,KAAKJ,GAA1C;AACH,GAFD;;AAIAZ,EAAAA,aAAa,CAACR,SAAd,CAAwByB,YAAxB,GAAuC,SAASA,YAAT,GAAyB;AAC5D,SAAKhB,aAAL,GAAqB,IAArB;AACH,GAFD;;AAIAD,EAAAA,aAAa,CAACR,SAAd,CAAwB0B,OAAxB,GAAkC,SAASA,OAAT,GAAoB;AAClD,WAAO,KAAKC,SAAL,CAAe,KAAKf,OAApB,CAAP;AACH,GAFD;;AAIAJ,EAAAA,aAAa,CAACR,SAAd,CAAwB4B,QAAxB,GAAmC,SAASA,QAAT,GAAqB;AACpD,WAAO,KAAKhD,OAAL,CAAa,KAAKiC,UAAlB,CAAP;AACH,GAFD;;AAIAL,EAAAA,aAAa,CAACR,SAAd,CAAwB6B,OAAxB,GAAkC,SAASA,OAAT,CAAkBnB,KAAlB,EAAyB;AACvD,SAAKA,KAAL,GAAaA,KAAb;AACH,GAFD;;AAIAF,EAAAA,aAAa,CAACR,SAAd,CAAwBsB,MAAxB,GAAiC,SAASA,MAAT,CAAiBQ,MAAjB,EAAyB;AACtD,QAAI/C,IAAI,GAAG,IAAX;AAAA,QACIgD,KAAK,GAAGhD,IAAI,CAACiC,OAAL,GAAejC,IAAI,CAACmC,WAApB,GAAkCnC,IAAI,CAAC6C,QAAL,EAD9C;AAAA,QAEII,WAAW,GAAGD,KAAK,GAAGhD,IAAI,CAAC2B,KAF/B;AAAA,QAGIuB,IAAI,GAAGlD,IAAI,CAAC2C,OAAL,EAHX;;AAKA,QAAIK,KAAK,KAAK,CAAV,IAAe,CAAChD,IAAI,CAAC0B,aAAzB,EAAwC;AACpC;AACH;;AAED1B,IAAAA,IAAI,CAACsC,GAAL,GAAWtC,IAAI,CAACiC,OAAL,GAAe,CAACjC,IAAI,CAACkC,WAArB,GAAmC,CAA9C;AACAlC,IAAAA,IAAI,CAACkD,IAAL,GAAYA,IAAZ;AACAlD,IAAAA,IAAI,CAACgD,KAAL,GAAaC,WAAb;AACAjD,IAAAA,IAAI,CAACqC,GAAL,GAAWc,IAAI,CAACd,GAAL,CAASrC,IAAI,CAACsC,GAAd,EAAmBY,IAAI,GAAGD,WAA1B,CAAX;AACAjD,IAAAA,IAAI,CAACoD,QAAL,GAAgBF,IAAI,GAAGF,KAAvB;AACAhD,IAAAA,IAAI,CAACqD,YAAL,GAAoB,CAACJ,WAAW,GAAGC,IAAf,IAAuB,CAA3C;AACAlD,IAAAA,IAAI,CAACsD,OAAL,GAAetD,IAAI,CAAC0B,aAAL,IAAsBuB,WAAW,GAAGC,IAAnD;;AAEA,QAAI,CAACH,MAAL,EAAa;AACT/C,MAAAA,IAAI,CAACuB,OAAL,CAAa5B,MAAb,EAAqBK,IAArB;AACH;AACJ,GArBD;;AAuBA,SAAOyB,aAAP;AACH,CApF2B,CAoF1BrC,UApF0B,CAArB;AAsFP,OAAO,IAAImE,cAAc,GAAI,UAAUnE,UAAV,EAAsB;AAC/C,WAASmE,cAAT,CAAwBzD,OAAxB,EAAiC;AAC7BV,IAAAA,UAAU,CAACW,IAAX,CAAgB,IAAhB;AACA,QAAIC,IAAI,GAAG,IAAX;AAEAA,IAAAA,IAAI,CAACwD,CAAL,GAAS,IAAI/B,aAAJ,CAAkBjC,MAAM,CAAC;AAC9BoC,MAAAA,UAAU,EAAE;AADkB,KAAD,EAE9B9B,OAF8B,CAAxB,CAAT;AAIAE,IAAAA,IAAI,CAACyD,CAAL,GAAS,IAAIhC,aAAJ,CAAkBjC,MAAM,CAAC;AAC9BoC,MAAAA,UAAU,EAAE;AADkB,KAAD,EAE9B9B,OAF8B,CAAxB,CAAT;AAIAE,IAAAA,IAAI,CAAC4C,SAAL,GAAiB9C,OAAO,CAAC8C,SAAzB;AACA5C,IAAAA,IAAI,CAAC0D,cAAL,GAAsB5D,OAAO,CAACsD,QAA9B;AACApD,IAAAA,IAAI,CAAC2D,QAAL,GAAgB7D,OAAO,CAAC6D,QAAR,IAAoB,GAApC;AACA3D,IAAAA,IAAI,CAACe,IAAL,CAAUpB,MAAV,EAAkBG,OAAlB;AACH;;AAED,MAAKV,UAAL,EAAkBmE,cAAc,CAACvC,SAAf,GAA2B5B,UAA3B;AAClBmE,EAAAA,cAAc,CAACtC,SAAf,GAA2BxB,MAAM,CAACyB,MAAP,CAAe9B,UAAU,IAAIA,UAAU,CAAC6B,SAAxC,CAA3B;AACAsC,EAAAA,cAAc,CAACtC,SAAf,CAAyBE,WAAzB,GAAuCoC,cAAvC;;AAEAA,EAAAA,cAAc,CAACtC,SAAf,CAAyB6B,OAAzB,GAAmC,SAASA,OAAT,CAAkBc,QAAlB,EAA4B;AAC3D,SAAKJ,CAAL,CAAOV,OAAP,CAAec,QAAf;AACA,SAAKH,CAAL,CAAOX,OAAP,CAAec,QAAf;AACA,SAAKC,OAAL;AACH,GAJD;;AAMAN,EAAAA,cAAc,CAACtC,SAAf,CAAyB6C,iBAAzB,GAA6C,SAASA,iBAAT,GAA8B;AACvE,WAAO;AACHN,MAAAA,CAAC,EAAEL,IAAI,CAACd,GAAL,CAAS,CAAT,EAAY,CAAC,KAAKmB,CAAL,CAAOH,YAApB,CADA;AAEHI,MAAAA,CAAC,EAAEN,IAAI,CAACd,GAAL,CAAS,CAAT,EAAY,CAAC,KAAKoB,CAAL,CAAOJ,YAApB;AAFA,KAAP;AAIH,GALD;;AAOAE,EAAAA,cAAc,CAACtC,SAAf,CAAyB4C,OAAzB,GAAmC,SAASA,OAAT,GAAoB;AACnD,QAAI7D,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACwD,CAAL,CAAOjB,MAAP;AACAvC,IAAAA,IAAI,CAACyD,CAAL,CAAOlB,MAAP;AACAvC,IAAAA,IAAI,CAACsD,OAAL,GAAetD,IAAI,CAACwD,CAAL,CAAOF,OAAP,IAAkBtD,IAAI,CAACyD,CAAL,CAAOH,OAAxC;AACAtD,IAAAA,IAAI,CAACoD,QAAL,GAAgBpD,IAAI,CAAC0D,cAAL,IAAuBP,IAAI,CAACd,GAAL,CAASrC,IAAI,CAACwD,CAAL,CAAOJ,QAAhB,EAA0BpD,IAAI,CAACyD,CAAL,CAAOL,QAAjC,CAAvC;AACApD,IAAAA,IAAI,CAAC+D,QAAL,GAAgBZ,IAAI,CAACb,GAAL,CAAStC,IAAI,CAACwD,CAAL,CAAOJ,QAAhB,EAA0BpD,IAAI,CAACyD,CAAL,CAAOL,QAAjC,CAAhB;AACApD,IAAAA,IAAI,CAACuB,OAAL,CAAa5B,MAAb;AACH,GARD;;AAUA,SAAO4D,cAAP;AACH,CA/C4B,CA+C3BnE,UA/C2B,CAAtB;AAiDP,OAAO,IAAI4E,QAAQ,GAAI,UAAU5E,UAAV,EAAsB;AACzC,WAAS4E,QAAT,CAAkBlE,OAAlB,EAA2B;AACvBV,IAAAA,UAAU,CAACW,IAAX,CAAgB,IAAhB;AACAP,IAAAA,MAAM,CAAC,IAAD,EAAOM,OAAP,CAAN;AACH;;AAED,MAAKV,UAAL,EAAkB4E,QAAQ,CAAChD,SAAT,GAAqB5B,UAArB;AAClB4E,EAAAA,QAAQ,CAAC/C,SAAT,GAAqBxB,MAAM,CAACyB,MAAP,CAAe9B,UAAU,IAAIA,UAAU,CAAC6B,SAAxC,CAArB;AACA+C,EAAAA,QAAQ,CAAC/C,SAAT,CAAmBE,WAAnB,GAAiC6C,QAAjC;;AAEAA,EAAAA,QAAQ,CAAC/C,SAAT,CAAmBuB,WAAnB,GAAiC,SAASA,WAAT,GAAwB;AACrD,WAAO,KAAKyB,SAAL,CAAezB,WAAf,CAA2B,KAAK0B,OAAL,CAAa,KAAKnC,IAAlB,CAA3B,CAAP;AACH,GAFD;;AAIAiC,EAAAA,QAAQ,CAAC/C,SAAT,CAAmBkD,QAAnB,GAA8B,SAASA,QAAT,CAAmBC,KAAnB,EAA0B;AACpD,QAAIpE,IAAI,GAAG,IAAX;AAAA,QACIiE,SAAS,GAAGjE,IAAI,CAACiE,SADrB;AAAA,QAEIlC,IAAI,GAAG/B,IAAI,CAAC+B,IAFhB;AAAA,QAGImC,OAAO,GAAGlE,IAAI,CAACkE,OAHnB;AAAA,QAIIG,QAAQ,GAAGH,OAAO,CAACnC,IAAD,CAAP,GAAgBqC,KAJ/B;;AAMA,QAAI,CAACH,SAAS,CAACX,OAAf,EAAwB;AACpB;AACH;;AAED,QAAIgB,SAAS,GAAGF,KAAhB;;AAEA,QAAIC,QAAQ,GAAGJ,SAAS,CAAC5B,GAArB,IAA4B+B,KAAK,GAAG,CAApC,IAAyCC,QAAQ,GAAGJ,SAAS,CAAC3B,GAArB,IAA4B8B,KAAK,GAAG,CAAjF,EAAoF;AAChFE,MAAAA,SAAS,IAAItE,IAAI,CAACuE,UAAlB;AACH;;AAEDL,IAAAA,OAAO,CAACM,aAAR,CAAsBzC,IAAtB,EAA4BuC,SAA5B;AACAtE,IAAAA,IAAI,CAACuB,OAAL,CAAa5B,MAAb,EAAqBK,IAArB;AACH,GAnBD;;AAqBA,SAAOgE,QAAP;AACH,CApCsB,CAoCrB5E,UApCqB,CAAhB;AAsCP,OAAO,IAAIqF,IAAI,GAAI,UAAUvF,KAAV,EAAiB;AAChC,WAASuF,IAAT,CAAc3E,OAAd,EAAuB;AACnBZ,IAAAA,KAAK,CAACa,IAAN,CAAW,IAAX;AAEA,QAAIC,IAAI,GAAG,IAAX;AAAA,QACIwD,CADJ;AAAA,QACOC,CADP;AAAA,QAEIc,UAFJ;AAAA,QAGIL,OAHJ;AAKA1E,IAAAA,MAAM,CAACQ,IAAD,EAAO;AACT0E,MAAAA,OAAO,EAAE;AADA,KAAP,EAEH5E,OAFG,CAAN;AAIAyE,IAAAA,UAAU,GAAGvE,IAAI,CAAC0E,OAAL,GAAe,GAAf,GAAqB,CAAlC;AACAR,IAAAA,OAAO,GAAGlE,IAAI,CAACkE,OAAf;AAEAlE,IAAAA,IAAI,CAACwD,CAAL,GAASA,CAAC,GAAG,IAAIQ,QAAJ,CAAa;AACtBjC,MAAAA,IAAI,EAAE,GADgB;AAEtBkC,MAAAA,SAAS,EAAEjE,IAAI,CAAC2E,UAAL,CAAgBnB,CAFL;AAGtBe,MAAAA,UAAU,EAAEA,UAHU;AAItBL,MAAAA,OAAO,EAAEA;AAJa,KAAb,CAAb;AAOAlE,IAAAA,IAAI,CAACyD,CAAL,GAASA,CAAC,GAAG,IAAIO,QAAJ,CAAa;AACtBjC,MAAAA,IAAI,EAAE,GADgB;AAEtBkC,MAAAA,SAAS,EAAEjE,IAAI,CAAC2E,UAAL,CAAgBlB,CAFL;AAGtBc,MAAAA,UAAU,EAAEA,UAHU;AAItBL,MAAAA,OAAO,EAAEA;AAJa,KAAb,CAAb;AAOAlE,IAAAA,IAAI,CAAC4E,UAAL,CAAgB7D,IAAhB,CAAqB,CACjB,OADiB,EAEjB,MAFiB,EAGjB,KAHiB,EAIjB,cAJiB,EAKjB,eALiB,CAArB,EAMG;AACC8D,MAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBvD,CAAtB,EAAyB;AACnCtB,QAAAA,IAAI,CAAC8E,OAAL,GAAexD,CAAf;AAEAtB,QAAAA,IAAI,CAACyC,MAAL,GAActD,aAAa,CAACa,IAAI,CAAC2E,UAAL,CAAgB/B,SAAjB,CAA3B;AACH,OALF;AAMCmC,MAAAA,KAAK,EAAE,SAASA,KAAT,CAAezD,CAAf,EAAkB;AACrB,YAAI0D,aAAa,GAAG1D,CAAC,CAACZ,KAAF,CAAQuE,MAAR,CAAeC,OAAf,CAAuB,GAAvB,CAApB;;AAEA,YAAIF,aAAa,IAAIA,aAAa,CAACG,OAAd,CAAsB,+BAAtB,CAArB,EAA6E;AACzE7D,UAAAA,CAAC,CAAC8D,MAAF,CAASC,MAAT;AACH;AACJ,OAZF;AAaCC,MAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBhE,CAAvB,EAA0B;AACrC,YAAIiE,eAAe,GAAGvF,IAAI,CAAC8E,OAA3B;AAAA,YACIU,cAAc,GAAGD,eAAe,CAACE,MADrC;AAAA,YAEIA,MAAM,GAAGnE,CAAC,CAACmE,MAFf;AAAA,YAGIC,UAAU,GAAGpE,CAAC,CAACqE,QAAF,GAAaJ,eAAe,CAACI,QAH9C;AAAA,YAIIvC,QAAQ,GAAGpD,IAAI,CAAC2E,UAAL,CAAgBvB,QAJ/B;AAAA,YAKIO,QAAQ,GAAG3D,IAAI,CAAC2E,UAAL,CAAgBhB,QAL/B;AAAA,YAMIiC,WANJ;;AAOA,YAAI1B,OAAO,CAACvC,KAAR,IAAiByB,QAAjB,IAA6BsC,UAAU,GAAG,CAA9C,EAAiD;AAC7CA,UAAAA,UAAU,IAAI,CAAC,IAAIA,UAAL,IAAmB,GAAjC;AACH;;AAED,YAAIxB,OAAO,CAACvC,KAAR,GAAgB+D,UAAhB,IAA8B/B,QAAlC,EAA4C;AACxC+B,UAAAA,UAAU,GAAG/B,QAAQ,GAAGO,OAAO,CAACvC,KAAhC;AACH;;AAED,YAAIkE,OAAO,GAAG3B,OAAO,CAACV,CAAR,GAAYxD,IAAI,CAACyC,MAAL,CAAYqD,IAAtC;AAAA,YACIC,OAAO,GAAG7B,OAAO,CAACT,CAAR,GAAYzD,IAAI,CAACyC,MAAL,CAAYuD,GADtC;AAEAJ,QAAAA,WAAW,GAAG;AACVpC,UAAAA,CAAC,EAAE,CAACqC,OAAO,GAAGL,cAAc,CAAChC,CAA1B,IAA+BkC,UAA/B,GAA4CD,MAAM,CAACjC,CAAnD,GAAuDqC,OADhD;AAEVpC,UAAAA,CAAC,EAAE,CAACsC,OAAO,GAAGP,cAAc,CAAC/B,CAA1B,IAA+BiC,UAA/B,GAA4CD,MAAM,CAAChC,CAAnD,GAAuDsC;AAFhD,SAAd;AAKA7B,QAAAA,OAAO,CAAC+B,SAAR,CAAkBP,UAAlB;AAEAlC,QAAAA,CAAC,CAACW,QAAF,CAAWyB,WAAW,CAACpC,CAAvB;AACAC,QAAAA,CAAC,CAACU,QAAF,CAAWyB,WAAW,CAACnC,CAAvB;AAEAzD,QAAAA,IAAI,CAAC2E,UAAL,CAAgB7B,OAAhB,CAAwBoB,OAAO,CAACvC,KAAhC;AACA3B,QAAAA,IAAI,CAAC8E,OAAL,GAAexD,CAAf;AAEAA,QAAAA,CAAC,CAACE,cAAF;AACH,OA7CF;AA8CC0E,MAAAA,IAAI,EAAE,SAASA,IAAT,CAAc5E,CAAd,EAAiB;AACnB,YAAIA,CAAC,CAACZ,KAAF,CAAQuE,MAAR,CAAekB,OAAf,CAAuBC,KAAvB,CAA6B,iBAA7B,CAAJ,EAAqD;AACjD;AACH;;AAED,YAAI5C,CAAC,CAACS,SAAF,CAAYX,OAAZ,IAAuBG,CAAC,CAACQ,SAAF,CAAYX,OAAvC,EAAgD;AAC5CE,UAAAA,CAAC,CAACW,QAAF,CAAW7C,CAAC,CAACkC,CAAF,CAAIY,KAAf;AACAX,UAAAA,CAAC,CAACU,QAAF,CAAW7C,CAAC,CAACmC,CAAF,CAAIW,KAAf;AACA9C,UAAAA,CAAC,CAACE,cAAF;AACH,SAJD,MAIO;AACHF,UAAAA,CAAC,CAAC+E,KAAF,CAAQC,IAAR;AACH;AACJ,OA1DF;AA2DCC,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAajF,CAAb,EAAgB;AACjBA,QAAAA,CAAC,CAACE,cAAF;AACH;AA7DF,KANH;AAqEH;;AAED,MAAKtC,KAAL,EAAauF,IAAI,CAACzD,SAAL,GAAiB9B,KAAjB;AACbuF,EAAAA,IAAI,CAACxD,SAAL,GAAiBxB,MAAM,CAACyB,MAAP,CAAehC,KAAK,IAAIA,KAAK,CAAC+B,SAA9B,CAAjB;AACAwD,EAAAA,IAAI,CAACxD,SAAL,CAAeE,WAAf,GAA6BsD,IAA7B;AAEA,SAAOA,IAAP;AACH,CA1GkB,CA0GjBvF,KA1GiB,CAAZ;;AA4GP,IAAIsH,SAAS,GAAG,UAAShD,CAAT,EAAYC,CAAZ,EAAe9B,KAAf,EAAsB;AAClC,SAAO,iBAAiB6B,CAAjB,GAAqB,KAArB,GAA6BC,CAA7B,GAAiC,cAAjC,GAAkD9B,KAAlD,GAA0D,GAAjE;AACH,CAFD;;AAIA,OAAO,IAAI8E,OAAO,GAAI,UAAUrH,UAAV,EAAsB;AACxC,WAASqH,OAAT,CAAiB5G,OAAjB,EAA0B;AACtBT,IAAAA,UAAU,CAACW,IAAX,CAAgB,IAAhB;AAEA,QAAIC,IAAI,GAAG,IAAX;AAEAA,IAAAA,IAAI,CAAC0G,OAAL,GAAenH,oBAAoB,EAAnC;AACA,SAAKoH,cAAL,GAAsB,KAAKD,OAAL,CAAaE,WAAb,CAAyBC,MAAzB,GAAkC,WAAxD;AACA7G,IAAAA,IAAI,CAACH,OAAL,GAAeA,OAAf;AACAG,IAAAA,IAAI,CAACH,OAAL,CAAaiH,KAAb,CAAmBC,qBAAnB,GAA2C,UAA3C;AACA/G,IAAAA,IAAI,CAACwD,CAAL,GAAS,CAAT;AACAxD,IAAAA,IAAI,CAACyD,CAAL,GAAS,CAAT;AACAzD,IAAAA,IAAI,CAAC2B,KAAL,GAAa,CAAb;AAEA,QAAIiE,WAAW,GAAGY,SAAS,CAACxG,IAAI,CAACwD,CAAN,EAASxD,IAAI,CAACyD,CAAd,EAAiBzD,IAAI,CAAC2B,KAAtB,CAA3B;AACA3B,IAAAA,IAAI,CAACH,OAAL,CAAaiH,KAAb,CAAmB,KAAKH,cAAxB,IAA0Cf,WAA1C;;AAEA5F,IAAAA,IAAI,CAACgH,gBAAL,CAAsBpB,WAAtB;AACH;;AAED,MAAKxG,UAAL,EAAkBqH,OAAO,CAACzF,SAAR,GAAoB5B,UAApB;AAClBqH,EAAAA,OAAO,CAACxF,SAAR,GAAoBxB,MAAM,CAACyB,MAAP,CAAe9B,UAAU,IAAIA,UAAU,CAAC6B,SAAxC,CAApB;AACAwF,EAAAA,OAAO,CAACxF,SAAR,CAAkBE,WAAlB,GAAgCsF,OAAhC;;AAEAA,EAAAA,OAAO,CAACxF,SAAR,CAAkBuD,aAAlB,GAAkC,SAASA,aAAT,CAAwBzC,IAAxB,EAA8BkF,EAA9B,EAAkC;AAChE,SAAKlF,IAAL,KAAckF,EAAd;AACA,SAAKpD,OAAL;AACH,GAHD;;AAKA4C,EAAAA,OAAO,CAACxF,SAAR,CAAkBiG,OAAlB,GAA4B,SAASA,OAAT,CAAkBvF,KAAlB,EAAyB;AACjD,SAAKA,KAAL,GAAaA,KAAb;AACA,SAAKkC,OAAL;AACH,GAHD;;AAKA4C,EAAAA,OAAO,CAACxF,SAAR,CAAkBgF,SAAlB,GAA8B,SAASA,SAAT,CAAoBP,UAApB,EAAgC;AAC1D,SAAK/D,KAAL,IAAc+D,UAAd;AACA,SAAK7B,OAAL;AACH,GAHD;;AAKA4C,EAAAA,OAAO,CAACxF,SAAR,CAAkBuF,SAAlB,GAA8B,SAASA,SAAT,CAAoBZ,WAApB,EAAiC;AAC3D,SAAKpC,CAAL,IAAUoC,WAAW,CAACpC,CAAtB;AACA,SAAKC,CAAL,IAAUmC,WAAW,CAACnC,CAAtB;AACA,SAAKI,OAAL;AACH,GAJD;;AAMA4C,EAAAA,OAAO,CAACxF,SAAR,CAAkBkG,QAAlB,GAA6B,SAASA,QAAT,CAAmBpF,IAAnB,EAAyBqF,KAAzB,EAAgC;AACzD,SAAKrF,IAAL,IAAaqF,KAAb;AACA,SAAKvD,OAAL;AACH,GAHD;;AAKA4C,EAAAA,OAAO,CAACxF,SAAR,CAAkBoG,MAAlB,GAA2B,SAASA,MAAT,CAAiBzB,WAAjB,EAA8B;AACrDpG,IAAAA,MAAM,CAAC,IAAD,EAAOoG,WAAP,CAAN;AACA,SAAK/B,OAAL;AACH,GAHD;;AAKA4C,EAAAA,OAAO,CAACxF,SAAR,CAAkB4C,OAAlB,GAA4B,SAASA,OAAT,GAAoB;AAC5C,QAAI7D,IAAI,GAAG,IAAX;AAAA,QACIwD,CAAC,GAAGxD,IAAI,CAACwD,CADb;AAAA,QAEIC,CAAC,GAAGzD,IAAI,CAACyD,CAFb;AAAA,QAGI6D,cAHJ;;AAKA,QAAItH,IAAI,CAACuH,KAAT,EAAgB;AACZ/D,MAAAA,CAAC,GAAGL,IAAI,CAACoE,KAAL,CAAW/D,CAAX,CAAJ;AACAC,MAAAA,CAAC,GAAGN,IAAI,CAACoE,KAAL,CAAW9D,CAAX,CAAJ;AACH;;AAED6D,IAAAA,cAAc,GAAGd,SAAS,CAAChD,CAAD,EAAIC,CAAJ,EAAOzD,IAAI,CAAC2B,KAAZ,CAA1B;;AAEA,QAAI2F,cAAc,KAAKtH,IAAI,CAAC4F,WAA5B,EAAyC;AACrC5F,MAAAA,IAAI,CAACH,OAAL,CAAaiH,KAAb,CAAmB,KAAKH,cAAxB,IAA0CW,cAA1C;;AAEAtH,MAAAA,IAAI,CAACgH,gBAAL,CAAsBM,cAAtB;;AACAtH,MAAAA,IAAI,CAACuB,OAAL,CAAa5B,MAAb;AACH;AACJ,GAnBD;;AAqBA8G,EAAAA,OAAO,CAACxF,SAAR,CAAkB+F,gBAAlB,GAAqC,SAASA,gBAAT,CAA2BpB,WAA3B,EAAwC;AACzE,SAAKA,WAAL,GAAmBA,WAAnB;AACH,GAFD;;AAIA,SAAOa,OAAP;AACH,CAjFqB,CAiFpBrH,UAjFoB,CAAf","sourcesContent":["import {\n    Class,\n    elementOffset\n} from '../../common';\n\nimport {\n    Observable\n} from './observable';\n\nimport {\n    getEventMap,\n    proxy,\n    getSupportedFeatures\n} from '../utils';\n\nvar extend = Object.assign;\n\nvar CHANGE = 'change';\n\nexport var TapCapture = (function (Observable) {\n    function TapCapture(element, options) {\n        Observable.call(this);\n        var that = this,\n            domElement = element[0] || element;\n\n        that.capture = false;\n\n        var eventMap = getEventMap(navigator.userAgent);\n\n        if (domElement.addEventListener) {\n            eventMap.down.split(' ').forEach(function(event) {\n                domElement.addEventListener(event, proxy(that._press, that), true);\n            });\n            eventMap.up.split(' ').forEach(function(event) {\n                domElement.addEventListener(event, proxy(that._release, that), true);\n            });\n        } else {\n            eventMap.down.split(' ').forEach(function(event) {\n                domElement.attachEvent(event, proxy(that._press, that));\n            });\n            eventMap.up.split(' ').forEach(function(event) {\n                domElement.attachEvent(event, proxy(that._release, that));\n            });\n        }\n\n        that.bind([\n            'press',\n            'release'\n        ], options || {});\n    }\n\n    if ( Observable ) TapCapture.__proto__ = Observable;\n    TapCapture.prototype = Object.create( Observable && Observable.prototype );\n    TapCapture.prototype.constructor = TapCapture;\n\n    TapCapture.prototype.captureNext = function captureNext () {\n        this.capture = true;\n    };\n\n    TapCapture.prototype.cancelCapture = function cancelCapture () {\n        this.capture = false;\n    };\n\n    TapCapture.prototype._press = function _press (e) {\n        var that = this;\n\n        that.trigger('press');\n\n        if (that.capture) {\n            e.preventDefault();\n        }\n    };\n\n    TapCapture.prototype._release = function _release (e) {\n        var that = this;\n\n        that.trigger('release');\n\n        if (that.capture) {\n            e.preventDefault();\n            that.cancelCapture();\n        }\n    };\n\n    return TapCapture;\n}(Observable));\n\nexport var PaneDimension = (function (Observable) {\n    function PaneDimension(options) {\n        Observable.call(this);\n        var that = this;\n        that.forcedEnabled = false;\n        extend(that, options);\n        that.scale = 1;\n\n        if (that.horizontal) {\n            that.measure = 'offsetWidth';\n            that.scrollSize = 'scrollWidth';\n            that.axis = 'x';\n        } else {\n            that.measure = 'offsetHeight';\n            that.scrollSize = 'scrollHeight';\n            that.axis = 'y';\n        }\n    }\n\n    if ( Observable ) PaneDimension.__proto__ = Observable;\n    PaneDimension.prototype = Object.create( Observable && Observable.prototype );\n    PaneDimension.prototype.constructor = PaneDimension;\n\n    PaneDimension.prototype.makeVirtual = function makeVirtual () {\n        extend(this, {\n            virtual: true,\n            forcedEnabled: true,\n            _virtualMin: 0,\n            _virtualMax: 0\n        });\n    };\n\n    PaneDimension.prototype.virtualSize = function virtualSize (min, max) {\n        if (this._virtualMin !== min || this._virtualMax !== max) {\n            this._virtualMin = min;\n            this._virtualMax = max;\n            this.update();\n        }\n    };\n\n    PaneDimension.prototype.outOfBounds = function outOfBounds (offset) {\n        return offset > this.max || offset < this.min;\n    };\n\n    PaneDimension.prototype.forceEnabled = function forceEnabled () {\n        this.forcedEnabled = true;\n    };\n\n    PaneDimension.prototype.getSize = function getSize () {\n        return this.container[this.measure];\n    };\n\n    PaneDimension.prototype.getTotal = function getTotal () {\n        return this.element[this.scrollSize];\n    };\n\n    PaneDimension.prototype.rescale = function rescale (scale) {\n        this.scale = scale;\n    };\n\n    PaneDimension.prototype.update = function update (silent) {\n        var that = this,\n            total = that.virtual ? that._virtualMax : that.getTotal(),\n            scaledTotal = total * that.scale,\n            size = that.getSize();\n\n        if (total === 0 && !that.forcedEnabled) {\n            return;\n        }\n\n        that.max = that.virtual ? -that._virtualMin : 0;\n        that.size = size;\n        that.total = scaledTotal;\n        that.min = Math.min(that.max, size - scaledTotal);\n        that.minScale = size / total;\n        that.centerOffset = (scaledTotal - size) / 2;\n        that.enabled = that.forcedEnabled || scaledTotal > size;\n\n        if (!silent) {\n            that.trigger(CHANGE, that);\n        }\n    };\n\n    return PaneDimension;\n}(Observable));\n\nexport var PaneDimensions = (function (Observable) {\n    function PaneDimensions(options) {\n        Observable.call(this);\n        var that = this;\n\n        that.x = new PaneDimension(extend({\n            horizontal: true\n        }, options));\n\n        that.y = new PaneDimension(extend({\n            horizontal: false\n        }, options));\n\n        that.container = options.container;\n        that.forcedMinScale = options.minScale;\n        that.maxScale = options.maxScale || 100;\n        that.bind(CHANGE, options);\n    }\n\n    if ( Observable ) PaneDimensions.__proto__ = Observable;\n    PaneDimensions.prototype = Object.create( Observable && Observable.prototype );\n    PaneDimensions.prototype.constructor = PaneDimensions;\n\n    PaneDimensions.prototype.rescale = function rescale (newScale) {\n        this.x.rescale(newScale);\n        this.y.rescale(newScale);\n        this.refresh();\n    };\n\n    PaneDimensions.prototype.centerCoordinates = function centerCoordinates () {\n        return {\n            x: Math.min(0, -this.x.centerOffset),\n            y: Math.min(0, -this.y.centerOffset)\n        };\n    };\n\n    PaneDimensions.prototype.refresh = function refresh () {\n        var that = this;\n        that.x.update();\n        that.y.update();\n        that.enabled = that.x.enabled || that.y.enabled;\n        that.minScale = that.forcedMinScale || Math.min(that.x.minScale, that.y.minScale);\n        that.fitScale = Math.max(that.x.minScale, that.y.minScale);\n        that.trigger(CHANGE);\n    };\n\n    return PaneDimensions;\n}(Observable));\n\nexport var PaneAxis = (function (Observable) {\n    function PaneAxis(options) {\n        Observable.call(this);\n        extend(this, options);\n    }\n\n    if ( Observable ) PaneAxis.__proto__ = Observable;\n    PaneAxis.prototype = Object.create( Observable && Observable.prototype );\n    PaneAxis.prototype.constructor = PaneAxis;\n\n    PaneAxis.prototype.outOfBounds = function outOfBounds () {\n        return this.dimension.outOfBounds(this.movable[this.axis]);\n    };\n\n    PaneAxis.prototype.dragMove = function dragMove (delta) {\n        var that = this,\n            dimension = that.dimension,\n            axis = that.axis,\n            movable = that.movable,\n            position = movable[axis] + delta;\n\n        if (!dimension.enabled) {\n            return;\n        }\n\n        var dragDelta = delta;\n\n        if (position < dimension.min && delta < 0 || position > dimension.max && delta > 0) {\n            dragDelta *= that.resistance;\n        }\n\n        movable.translateAxis(axis, dragDelta);\n        that.trigger(CHANGE, that);\n    };\n\n    return PaneAxis;\n}(Observable));\n\nexport var Pane = (function (Class) {\n    function Pane(options) {\n        Class.call(this);\n\n        var that = this,\n            x, y,\n            resistance,\n            movable;\n\n        extend(that, {\n            elastic: true\n        }, options);\n\n        resistance = that.elastic ? 0.5 : 0;\n        movable = that.movable;\n\n        that.x = x = new PaneAxis({\n            axis: 'x',\n            dimension: that.dimensions.x,\n            resistance: resistance,\n            movable: movable\n        });\n\n        that.y = y = new PaneAxis({\n            axis: 'y',\n            dimension: that.dimensions.y,\n            resistance: resistance,\n            movable: movable\n        });\n\n        that.userEvents.bind([\n            'press',\n            'move',\n            'end',\n            'gesturestart',\n            'gesturechange'\n        ], {\n            gesturestart: function gesturestart(e) {\n                that.gesture = e;\n\n                that.offset = elementOffset(that.dimensions.container);\n            },\n            press: function press(e) {\n                var closestAnchor = e.event.target.closest('a');\n\n                if (closestAnchor && closestAnchor.matches('[data-navigate-on-press=true]')) {\n                    e.sender.cancel();\n                }\n            },\n            gesturechange: function gesturechange(e) {\n                var previousGesture = that.gesture,\n                    previousCenter = previousGesture.center,\n                    center = e.center,\n                    scaleDelta = e.distance / previousGesture.distance,\n                    minScale = that.dimensions.minScale,\n                    maxScale = that.dimensions.maxScale,\n                    coordinates;\n                if (movable.scale <= minScale && scaleDelta < 1) {\n                    scaleDelta += (1 - scaleDelta) * 0.8;\n                }\n\n                if (movable.scale * scaleDelta >= maxScale) {\n                    scaleDelta = maxScale / movable.scale;\n                }\n\n                var offsetX = movable.x + that.offset.left,\n                    offsetY = movable.y + that.offset.top;\n                coordinates = {\n                    x: (offsetX - previousCenter.x) * scaleDelta + center.x - offsetX,\n                    y: (offsetY - previousCenter.y) * scaleDelta + center.y - offsetY\n                };\n\n                movable.scaleWith(scaleDelta);\n\n                x.dragMove(coordinates.x);\n                y.dragMove(coordinates.y);\n\n                that.dimensions.rescale(movable.scale);\n                that.gesture = e;\n\n                e.preventDefault();\n            },\n            move: function move(e) {\n                if (e.event.target.tagName.match(/textarea|input/i)) {\n                    return;\n                }\n\n                if (x.dimension.enabled || y.dimension.enabled) {\n                    x.dragMove(e.x.delta);\n                    y.dragMove(e.y.delta);\n                    e.preventDefault();\n                } else {\n                    e.touch.skip();\n                }\n            },\n            end: function end(e) {\n                e.preventDefault();\n            }\n        });\n    }\n\n    if ( Class ) Pane.__proto__ = Class;\n    Pane.prototype = Object.create( Class && Class.prototype );\n    Pane.prototype.constructor = Pane;\n\n    return Pane;\n}(Class));\n\nvar translate = function(x, y, scale) {\n    return 'translate3d(' + x + 'px,' + y + 'px,0) scale(' + scale + ')';\n};\n\nexport var Movable = (function (Observable) {\n    function Movable(element) {\n        Observable.call(this);\n\n        var that = this;\n\n        that.support = getSupportedFeatures();\n        this.transformStyle = this.support.transitions.prefix + 'Transform';\n        that.element = element;\n        that.element.style.webkitTransformOrigin = 'left top';\n        that.x = 0;\n        that.y = 0;\n        that.scale = 1;\n\n        var coordinates = translate(that.x, that.y, that.scale);\n        that.element.style[this.transformStyle] = coordinates;\n\n        that._saveCoordinates(coordinates);\n    }\n\n    if ( Observable ) Movable.__proto__ = Observable;\n    Movable.prototype = Object.create( Observable && Observable.prototype );\n    Movable.prototype.constructor = Movable;\n\n    Movable.prototype.translateAxis = function translateAxis (axis, by) {\n        this[axis] += by;\n        this.refresh();\n    };\n\n    Movable.prototype.scaleTo = function scaleTo (scale) {\n        this.scale = scale;\n        this.refresh();\n    };\n\n    Movable.prototype.scaleWith = function scaleWith (scaleDelta) {\n        this.scale *= scaleDelta;\n        this.refresh();\n    };\n\n    Movable.prototype.translate = function translate (coordinates) {\n        this.x += coordinates.x;\n        this.y += coordinates.y;\n        this.refresh();\n    };\n\n    Movable.prototype.moveAxis = function moveAxis (axis, value) {\n        this[axis] = value;\n        this.refresh();\n    };\n\n    Movable.prototype.moveTo = function moveTo (coordinates) {\n        extend(this, coordinates);\n        this.refresh();\n    };\n\n    Movable.prototype.refresh = function refresh () {\n        var that = this,\n            x = that.x,\n            y = that.y,\n            newCoordinates;\n\n        if (that.round) {\n            x = Math.round(x);\n            y = Math.round(y);\n        }\n\n        newCoordinates = translate(x, y, that.scale);\n\n        if (newCoordinates !== that.coordinates) {\n            that.element.style[this.transformStyle] = newCoordinates;\n\n            that._saveCoordinates(newCoordinates);\n            that.trigger(CHANGE);\n        }\n    };\n\n    Movable.prototype._saveCoordinates = function _saveCoordinates (coordinates) {\n        this.coordinates = coordinates;\n    };\n\n    return Movable;\n}(Observable));\n"]},"metadata":{},"sourceType":"module"}