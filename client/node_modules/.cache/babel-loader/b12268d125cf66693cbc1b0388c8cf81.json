{"ast":null,"code":"import { drawing as draw, throttle, geometry } from '@progress/kendo-drawing';\nimport { RootElement, Title, CategoryAxis, Point } from '../core';\nimport Highlight from './highlight';\nimport Pannable from './pan-and-zoom/pannable';\nimport ZoomSelection from './pan-and-zoom/zoom-selection';\nimport MousewheelZoom from './pan-and-zoom/mousewheel-zoom';\nimport Legend from './legend/legend';\nimport PlotAreaFactory from './plotarea/plotarea-factory';\nimport Selection from './selection';\nimport SeriesBinder from './series-binder';\nimport Tooltip from './tooltip/tooltip';\nimport SharedTooltip from './tooltip/shared-tooltip';\nimport CategoricalPlotArea from './plotarea/categorical-plotarea';\nimport PlotAreaBase from './plotarea/plotarea-base';\nimport { ChartService, DomEventsBuilder } from '../services';\nimport getField from './utils/get-field';\nimport isDateAxis from './utils/is-date-axis';\nimport getDateField from './utils/get-date-field';\nimport { ChartPane, ChartPlotArea, findAxisByName } from './api-elements';\nimport { X, Y, VALUE, DEFAULT_WIDTH, DEFAULT_HEIGHT, DEFAULT_SERIES_OPACITY } from '../common/constants';\nimport { addClass, Class, setDefaultOptions, deepExtend, defined, find, isObject, isFunction, elementSize, elementOffset, elementScale, elementStyles, eventCoordinates, bindEvents, unbindEvents, mousewheelDelta, FontLoader, inArray, last, round, HashMap, valueOrDefault } from '../common';\nimport { dateComparer } from '../date-utils';\nimport { DRAG_START, DRAG, DRAG_END, ZOOM_START, ZOOM, ZOOM_END, SELECT_START, SELECT, SELECT_END, PLOT_AREA_HOVER, PLOT_AREA_LEAVE, RENDER, CATEGORY, PIE, DONUT, FUNNEL, COLUMN, MOUSEWHEEL, MOUSEWHEEL_DELAY, MOUSEWHEEL_ZOOM_RATE, SHOW_TOOLTIP, SERIES_HOVER } from './constants';\nimport './animations';\nimport './register-charts';\nvar AXIS_NAMES = [CATEGORY, VALUE, X, Y];\nvar MOUSEMOVE = \"mousemove\";\nvar CONTEXTMENU = \"contextmenu\";\nvar MOUSELEAVE = \"mouseleave\";\nvar MOUSEMOVE_DELAY = 20;\n\nvar Chart = function (Class) {\n  function Chart(element, userOptions, themeOptions, context) {\n    var this$1 = this;\n    if (context === void 0) context = {};\n    Class.call(this);\n    this.observers = [];\n    this.addObserver(context.observer);\n    this.chartService = new ChartService(this, context);\n    this.chartService.theme = themeOptions;\n\n    this._initElement(element);\n\n    var options = deepExtend({}, this.options, userOptions);\n    this._originalOptions = deepExtend({}, options);\n    this._theme = themeOptions;\n\n    this._initTheme(options, themeOptions);\n\n    this._initHandlers();\n\n    this._initSurface();\n\n    this.bindCategories();\n    FontLoader.preloadFonts(userOptions, function () {\n      this$1.fontLoaded = true;\n\n      if (!this$1._destroyed) {\n        this$1.trigger('init');\n\n        this$1._redraw();\n\n        this$1._attachEvents();\n      }\n    });\n  }\n\n  if (Class) Chart.__proto__ = Class;\n  Chart.prototype = Object.create(Class && Class.prototype);\n  Chart.prototype.constructor = Chart;\n\n  Chart.prototype._initElement = function _initElement(element) {\n    this._setElementClass(element);\n\n    element.style.position = \"relative\";\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    this.element = element;\n  };\n\n  Chart.prototype._setElementClass = function _setElementClass(element) {\n    addClass(element, \"k-chart\");\n  };\n\n  Chart.prototype._initTheme = function _initTheme(options, themeOptions) {\n    var seriesCopies = [];\n    var series = options.series || [];\n\n    for (var i = 0; i < series.length; i++) {\n      seriesCopies.push(Object.assign({}, series[i]));\n    }\n\n    options.series = seriesCopies;\n    resolveAxisAliases(options);\n    this.applyDefaults(options, themeOptions); // Clean up default if not overriden by data attributes\n\n    if (options.seriesColors === null) {\n      delete options.seriesColors;\n    }\n\n    this.options = deepExtend({}, themeOptions, options);\n    this.applySeriesColors();\n  };\n\n  Chart.prototype.getSize = function getSize() {\n    var chartArea = this.options.chartArea || {};\n    var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n    var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  Chart.prototype.resize = function resize(force) {\n    var size = this.getSize();\n    var currentSize = this._size;\n    var hasSize = size.width > 0 || size.height > 0;\n\n    if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n      this._size = size;\n\n      this._resize(size, force);\n\n      this.trigger(\"resize\", size);\n    } else if (hasSize && this._selections && find(this._selections, function (s) {\n      return !s.visible;\n    })) {\n      this._destroySelections();\n\n      this._setupSelection();\n    }\n  };\n\n  Chart.prototype._resize = function _resize() {\n    this._noTransitionsRedraw();\n  };\n\n  Chart.prototype.redraw = function redraw(paneName) {\n    this.applyDefaults(this.options);\n    this.applySeriesColors();\n\n    if (paneName) {\n      var plotArea = this._model._plotArea;\n      var pane = plotArea.findPane(paneName);\n      plotArea.redraw(pane);\n    } else {\n      this._redraw();\n    }\n  };\n\n  Chart.prototype.getAxis = function getAxis(name) {\n    return findAxisByName(name, this._plotArea.axes);\n  };\n\n  Chart.prototype.findAxisByName = function findAxisByName(name) {\n    return this.getAxis(name);\n  };\n\n  Chart.prototype.findPaneByName = function findPaneByName(name) {\n    var panes = this._plotArea.panes;\n\n    for (var idx = 0; idx < panes.length; idx++) {\n      if (panes[idx].options.name === name) {\n        return new ChartPane(panes[idx]);\n      }\n    }\n  };\n\n  Chart.prototype.findPaneByIndex = function findPaneByIndex(idx) {\n    var panes = this._plotArea.panes;\n\n    if (panes[idx]) {\n      return new ChartPane(panes[idx]);\n    }\n  };\n\n  Chart.prototype.plotArea = function plotArea() {\n    return new ChartPlotArea(this._plotArea);\n  };\n\n  Chart.prototype.toggleHighlight = function toggleHighlight(show, filter) {\n    var plotArea = this._plotArea;\n    var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n    var points;\n\n    if (isFunction(filter)) {\n      points = plotArea.filterPoints(filter);\n    } else {\n      var seriesName, categoryName;\n\n      if (isObject(filter)) {\n        seriesName = filter.series;\n        categoryName = filter.category;\n      } else {\n        seriesName = categoryName = filter;\n      }\n\n      if (firstSeries.type === DONUT) {\n        points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n      } else if (firstSeries.type === PIE || firstSeries.type === FUNNEL) {\n        points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n      } else {\n        points = plotArea.pointsBySeriesName(seriesName);\n      }\n    }\n\n    if (points) {\n      this.togglePointsHighlight(show, points);\n    }\n  };\n\n  Chart.prototype.togglePointsHighlight = function togglePointsHighlight(show, points) {\n    var highlight = this._highlight;\n\n    for (var idx = 0; idx < points.length; idx++) {\n      highlight.togglePointHighlight(points[idx], show);\n    }\n  };\n\n  Chart.prototype.showTooltip = function showTooltip(filter) {\n    var shared = this._sharedTooltip();\n\n    var ref = this;\n    var tooltip = ref._tooltip;\n    var plotArea = ref._plotArea;\n    var point, categoryIndex;\n\n    if (isFunction(filter)) {\n      point = plotArea.findPoint(filter);\n\n      if (point && shared) {\n        categoryIndex = point.categoryIx;\n      }\n    } else if (shared && defined(filter)) {\n      categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n    }\n\n    if (shared) {\n      if (categoryIndex >= 0) {\n        var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n\n        tooltip.showAt(points);\n      }\n    } else if (point) {\n      tooltip.show(point);\n    }\n  };\n\n  Chart.prototype.hideTooltip = function hideTooltip() {\n    this._tooltip.hide();\n  };\n\n  Chart.prototype._initSurface = function _initSurface() {\n    var surface = this.surface;\n\n    var wrap = this._surfaceWrap();\n\n    var chartArea = this.options.chartArea || {};\n\n    if (chartArea.width) {\n      elementSize(wrap, {\n        width: chartArea.width\n      });\n    }\n\n    if (chartArea.height) {\n      elementSize(wrap, {\n        height: chartArea.height\n      });\n    }\n\n    if (!surface || surface.options.type !== this.options.renderAs) {\n      this._destroySurface();\n\n      this.surface = draw.Surface.create(wrap, {\n        type: this.options.renderAs\n      });\n      this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n      this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n    } else {\n      this.surface.clear();\n      this.surface.resize();\n    }\n  };\n\n  Chart.prototype._surfaceWrap = function _surfaceWrap() {\n    return this.element;\n  };\n\n  Chart.prototype._redraw = function _redraw() {\n    var model = this._getModel();\n\n    this._size = {\n      width: model.options.width,\n      height: model.options.height\n    };\n\n    this._destroyView();\n\n    this._model = model;\n    this._plotArea = model._plotArea;\n    model.renderVisual();\n\n    if (this.options.transitions !== false) {\n      model.traverse(function (element) {\n        if (element.animation) {\n          element.animation.setup();\n        }\n      });\n    }\n\n    this._initSurface();\n\n    this.surface.draw(model.visual);\n\n    if (this.options.transitions !== false) {\n      model.traverse(function (element) {\n        if (element.animation) {\n          element.animation.play();\n        }\n      });\n    }\n\n    this._tooltip = this._createTooltip();\n    this._highlight = new Highlight();\n\n    this._setupSelection();\n\n    this._createPannable();\n\n    this._createZoomSelection();\n\n    this._createMousewheelZoom();\n\n    this.trigger(RENDER);\n    triggerPaneRender(this._plotArea.panes);\n\n    if (!this._navState) {\n      this._cancelDomEvents();\n    }\n  };\n\n  Chart.prototype.exportVisual = function exportVisual(exportOptions) {\n    var visual;\n\n    if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n      var currentOptions = this.options;\n      var options = deepExtend({}, exportOptions.options, {\n        chartArea: {\n          width: exportOptions.width,\n          height: exportOptions.height\n        }\n      });\n      clearMissingValues(this._originalOptions, options);\n      this.options = deepExtend({}, this._originalOptions, options);\n\n      this._initTheme(this.options, this._theme);\n\n      this.bindCategories();\n\n      var model = this._getModel();\n\n      model.renderVisual();\n      triggerPaneRender(model._plotArea.panes);\n      visual = model.visual;\n      this.options = currentOptions;\n    } else {\n      visual = this.surface.exportVisual();\n    }\n\n    return visual;\n  };\n\n  Chart.prototype._sharedTooltip = function _sharedTooltip() {\n    return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n  };\n\n  Chart.prototype._createPannable = function _createPannable() {\n    var options = this.options;\n\n    if (options.pannable !== false) {\n      this._pannable = new Pannable(this._plotArea, options.pannable);\n    }\n  };\n\n  Chart.prototype._createZoomSelection = function _createZoomSelection() {\n    var zoomable = this.options.zoomable;\n    var selection = (zoomable || {}).selection;\n\n    if (zoomable !== false && selection !== false) {\n      this._zoomSelection = new ZoomSelection(this, selection);\n    }\n  };\n\n  Chart.prototype._createMousewheelZoom = function _createMousewheelZoom() {\n    var zoomable = this.options.zoomable;\n    var mousewheel = (zoomable || {}).mousewheel;\n\n    if (zoomable !== false && mousewheel !== false) {\n      this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n    }\n  };\n\n  Chart.prototype._toggleDragZoomEvents = function _toggleDragZoomEvents() {\n    var pannable = this.options.pannable;\n    var zoomable = this.options.zoomable;\n    var selection = (zoomable || {}).selection;\n    var mousewheel = (zoomable || {}).mousewheel;\n    var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([DRAG_START, DRAG, DRAG_END]);\n    var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ZOOM_START, ZOOM, ZOOM_END]);\n    var element = this.element;\n\n    if (this._dragZoomEnabled && allowDrag && allowZoom) {\n      element.style.touchAction = this._touchAction || '';\n      this._dragZoomEnabled = false;\n    } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n      element.style.touchAction = \"none\";\n      this._dragZoomEnabled = true;\n    }\n\n    this._toggleDomEvents(!allowDrag, !allowZoom);\n  };\n\n  Chart.prototype._toggleDomEvents = function _toggleDomEvents(drag, zoom) {\n    var domEvents = this.domEvents;\n\n    if (!domEvents) {\n      return;\n    }\n\n    if (domEvents.toggleDrag) {\n      domEvents.toggleDrag(drag);\n    }\n\n    if (domEvents.toggleZoom) {\n      domEvents.toggleZoom(zoom);\n    }\n  };\n\n  Chart.prototype._createTooltip = function _createTooltip() {\n    var ref = this;\n    var tooltipOptions = ref.options.tooltip;\n    var tooltip;\n\n    if (this._sharedTooltip()) {\n      tooltip = this._createSharedTooltip(tooltipOptions);\n    } else {\n      tooltip = new Tooltip(this.chartService, tooltipOptions);\n    }\n\n    return tooltip;\n  };\n\n  Chart.prototype._createSharedTooltip = function _createSharedTooltip(options) {\n    return new SharedTooltip(this._plotArea, options);\n  };\n\n  Chart.prototype.applyDefaults = function applyDefaults(options, themeOptions) {\n    applyAxisDefaults(options, themeOptions);\n    applySeriesDefaults(options, themeOptions);\n  };\n\n  Chart.prototype.applySeriesColors = function applySeriesColors() {\n    var options = this.options;\n    var series = options.series;\n    var colors = options.seriesColors || [];\n\n    for (var i = 0; i < series.length; i++) {\n      var currentSeries = series[i];\n      var seriesColor = colors[i % colors.length];\n      var defaults = currentSeries._defaults;\n      currentSeries.color = currentSeries.color || seriesColor;\n\n      if (defaults) {\n        defaults.color = defaults.color || seriesColor;\n      }\n    }\n  };\n\n  Chart.prototype._getModel = function _getModel() {\n    var options = this.options;\n\n    var plotArea = this._createPlotArea();\n\n    var model = new RootElement(this._modelOptions());\n    model.chart = this;\n    model._plotArea = plotArea;\n    Title.buildTitle(options.title, model);\n\n    if (options.legend && options.legend.visible) {\n      model.append(new Legend(plotArea.options.legend, this.chartService));\n    }\n\n    model.append(plotArea);\n    model.reflow();\n    return model;\n  };\n\n  Chart.prototype._modelOptions = function _modelOptions() {\n    var options = this.options;\n    var size = this.getSize();\n    return deepExtend({\n      transitions: options.transitions,\n      width: size.width || DEFAULT_WIDTH,\n      height: size.height || DEFAULT_HEIGHT\n    }, options.chartArea);\n  };\n\n  Chart.prototype._createPlotArea = function _createPlotArea(skipSeries) {\n    var options = this.options;\n    var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n    return plotArea;\n  };\n\n  Chart.prototype._setupSelection = function _setupSelection() {\n    var this$1 = this;\n    var ref = this;\n    var axes = ref._plotArea.axes;\n    var selections = this._selections = [];\n\n    for (var i = 0; i < axes.length; i++) {\n      var axis = axes[i];\n      var options = axis.options;\n\n      if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n        var range = axis.range();\n        var selection = new Selection(this$1, axis, deepExtend({\n          min: range.min,\n          max: range.max\n        }, options.select));\n        selections.push(selection);\n      }\n    }\n  };\n\n  Chart.prototype._selectStart = function _selectStart(e) {\n    return this.trigger(SELECT_START, e);\n  };\n\n  Chart.prototype._select = function _select(e) {\n    return this.trigger(SELECT, e);\n  };\n\n  Chart.prototype._selectEnd = function _selectEnd(e) {\n    return this.trigger(SELECT_END, e);\n  };\n\n  Chart.prototype._initHandlers = function _initHandlers() {\n    this._clickHandler = this._click.bind(this);\n    this._mousewheelHandler = this._mousewheel.bind(this);\n    this._mouseleaveHandler = this._mouseleave.bind(this);\n    this._surfaceMouseenterHandler = this._mouseover.bind(this);\n    this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n    this._mousemove = throttle(this._mousemove.bind(this), MOUSEMOVE_DELAY);\n  };\n\n  Chart.prototype.addObserver = function addObserver(observer) {\n    if (observer) {\n      this.observers.push(observer);\n    }\n  };\n\n  Chart.prototype.removeObserver = function removeObserver(observer) {\n    var index = this.observers.indexOf(observer);\n\n    if (index >= 0) {\n      this.observers.splice(index, 1);\n    }\n  };\n\n  Chart.prototype.requiresHandlers = function requiresHandlers(eventNames) {\n    var observers = this.observers;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].requiresHandlers(eventNames)) {\n        return true;\n      }\n    }\n  };\n\n  Chart.prototype.trigger = function trigger(name, args) {\n    if (args === void 0) args = {};\n\n    if (name === SHOW_TOOLTIP) {\n      args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n    }\n\n    args.sender = this;\n    var observers = this.observers;\n    var isDefaultPrevented = false;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].trigger(name, args)) {\n        isDefaultPrevented = true;\n      }\n    }\n\n    return isDefaultPrevented;\n  };\n\n  Chart.prototype._attachEvents = function _attachEvents() {\n    var obj, obj$1;\n    var element = this.element;\n    this._touchAction = element.style.touchAction;\n    bindEvents(element, (obj = {}, obj[CONTEXTMENU] = this._clickHandler, obj[MOUSEWHEEL] = this._mousewheelHandler, obj[MOUSELEAVE] = this._mouseleaveHandler, obj));\n\n    if (this._shouldAttachMouseMove()) {\n      bindEvents(element, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mousemove, obj$1));\n    }\n\n    this.domEvents = DomEventsBuilder.create(this.element, {\n      start: this._start.bind(this),\n      move: this._move.bind(this),\n      end: this._end.bind(this),\n      tap: this._tap.bind(this),\n      gesturestart: this._gesturestart.bind(this),\n      gesturechange: this._gesturechange.bind(this),\n      gestureend: this._gestureend.bind(this)\n    });\n\n    this._toggleDragZoomEvents();\n  };\n\n  Chart.prototype._mouseleave = function _mouseleave(e) {\n    if (this._hoveredPoint) {\n      this._hoveredPoint.out(this, e);\n\n      this._hoveredPoint = null;\n    }\n\n    if (this._plotArea.hovered) {\n      this.trigger(PLOT_AREA_LEAVE);\n      this._plotArea.hovered = false;\n    }\n  };\n\n  Chart.prototype._cancelDomEvents = function _cancelDomEvents() {\n    if (this.domEvents && this.domEvents.cancel) {\n      this.domEvents.cancel();\n    }\n  };\n\n  Chart.prototype._gesturestart = function _gesturestart(e) {\n    if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n      this._gestureDistance = e.distance;\n\n      this._unsetActivePoint();\n\n      this.surface.suspendTracking();\n    }\n  };\n\n  Chart.prototype._gestureend = function _gestureend(e) {\n    if (this._zooming && !this._stopChartHandlers(e)) {\n      if (this.surface) {\n        this.surface.resumeTracking();\n      }\n\n      this._zooming = false;\n      this.trigger(ZOOM_END, {});\n    }\n  };\n\n  Chart.prototype._gesturechange = function _gesturechange(e) {\n    var mousewheelZoom = this._mousewheelZoom;\n\n    if (mousewheelZoom && !this._stopChartHandlers(e)) {\n      e.preventDefault();\n      var previousGestureDistance = this._gestureDistance;\n      var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n      if (Math.abs(scaleDelta) >= 0.1) {\n        scaleDelta = Math.round(scaleDelta * 10);\n        this._gestureDistance = e.distance;\n        var args = {\n          delta: scaleDelta,\n          axisRanges: axisRanges(this._plotArea.axes),\n          originalEvent: e\n        };\n\n        if (this._zooming || !this.trigger(ZOOM_START, args)) {\n          var coords = this._eventCoordinates(e);\n\n          if (!this._zooming) {\n            this._zooming = true;\n          }\n\n          var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n\n          if (ranges && !this.trigger(ZOOM, args)) {\n            mousewheelZoom.zoom();\n          }\n        }\n      }\n    }\n  };\n\n  Chart.prototype._mouseout = function _mouseout(e) {\n    if (e.element) {\n      var element = this._drawingChartElement(e.element, e);\n\n      if (element && element.leave) {\n        element.leave(this, e.originalEvent);\n      }\n    }\n  };\n\n  Chart.prototype._start = function _start(e) {\n    var coords = this._eventCoordinates(e);\n\n    if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n      return;\n    }\n\n    if (this.requiresHandlers([DRAG_START, DRAG, DRAG_END])) {\n      this._startNavigation(e, coords, DRAG_START);\n    }\n\n    if (this._pannable && this._pannable.start(e)) {\n      this.surface.suspendTracking();\n\n      this._unsetActivePoint();\n\n      this._suppressHover = true;\n      this.chartService.panning = true;\n    }\n\n    if (this._zoomSelection) {\n      if (this._zoomSelection.start(e)) {\n        this.trigger(ZOOM_START, {\n          axisRanges: axisRanges(this._plotArea.axes),\n          originalEvent: e\n        });\n      }\n    }\n  };\n\n  Chart.prototype._move = function _move(e) {\n    var ref = this;\n    var state = ref._navState;\n    var pannable = ref._pannable;\n\n    if (this._stopChartHandlers(e)) {\n      return;\n    }\n\n    if (pannable) {\n      var ranges = pannable.move(e);\n\n      if (ranges && !this.trigger(DRAG, {\n        axisRanges: ranges,\n        originalEvent: e\n      })) {\n        pannable.pan();\n      }\n    } else if (state) {\n      var ranges$1 = {};\n      var axes = state.axes;\n\n      for (var i = 0; i < axes.length; i++) {\n        var currentAxis = axes[i];\n        var axisName = currentAxis.options.name;\n\n        if (axisName) {\n          var axis = currentAxis.options.vertical ? e.y : e.x;\n          var delta = axis.startLocation - axis.location;\n\n          if (delta !== 0) {\n            ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n          }\n        }\n      }\n\n      state.axisRanges = ranges$1;\n      this.trigger(DRAG, {\n        axisRanges: ranges$1,\n        originalEvent: e\n      });\n    }\n\n    if (this._zoomSelection) {\n      this._zoomSelection.move(e);\n    }\n  };\n\n  Chart.prototype._end = function _end(e) {\n    if (this._stopChartHandlers(e)) {\n      return;\n    }\n\n    var pannable = this._pannable;\n\n    if (pannable && pannable.end(e)) {\n      this.surface.resumeTracking();\n      this.trigger(DRAG_END, {\n        axisRanges: axisRanges(this._plotArea.axes),\n        originalEvent: e\n      });\n      this._suppressHover = false;\n      this.chartService.panning = false;\n    } else {\n      this._endNavigation(e, DRAG_END);\n    }\n\n    if (this._zoomSelection) {\n      var ranges = this._zoomSelection.end(e);\n\n      if (ranges && !this.trigger(ZOOM, {\n        axisRanges: ranges,\n        originalEvent: e\n      })) {\n        this._zoomSelection.zoom();\n\n        this.trigger(ZOOM_END, {\n          axisRanges: ranges,\n          originalEvent: e\n        });\n      }\n    }\n  };\n\n  Chart.prototype._stopChartHandlers = function _stopChartHandlers(e) {\n    var selections = this._selections || [];\n\n    if (!selections.length) {\n      return false;\n    }\n\n    var coords = this._eventCoordinates(e);\n\n    var pane = this._plotArea.paneByPoint(coords);\n\n    if (pane) {\n      for (var idx = 0; idx < selections.length; idx++) {\n        if (selections[idx].onPane(pane)) {\n          return true;\n        }\n      }\n    }\n  };\n\n  Chart.prototype._mousewheelZoomRate = function _mousewheelZoomRate() {\n    var zoomable = this.options.zoomable;\n    var mousewheel = (zoomable || {}).mousewheel || {};\n    return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n  };\n\n  Chart.prototype._mousewheel = function _mousewheel(e) {\n    var this$1 = this;\n    var delta = mousewheelDelta(e);\n    var mousewheelZoom = this._mousewheelZoom;\n\n    var coords = this._eventCoordinates(e);\n\n    if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n      return;\n    }\n\n    if (mousewheelZoom) {\n      var args = {\n        delta: delta,\n        axisRanges: axisRanges(this._plotArea.axes),\n        originalEvent: e\n      };\n\n      if (this._zooming || !this.trigger(ZOOM_START, args)) {\n        e.preventDefault();\n\n        if (!this._zooming) {\n          this._unsetActivePoint();\n\n          this.surface.suspendTracking();\n          this._zooming = true;\n        }\n\n        if (this._mwTimeout) {\n          clearTimeout(this._mwTimeout);\n        }\n\n        args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n\n        if (args.axisRanges && !this.trigger(ZOOM, args)) {\n          mousewheelZoom.zoom();\n        }\n\n        this._mwTimeout = setTimeout(function () {\n          this$1.trigger(ZOOM_END, args);\n          this$1._zooming = false;\n\n          if (this$1.surface) {\n            this$1.surface.resumeTracking();\n          }\n        }, MOUSEWHEEL_DELAY);\n      }\n    } else {\n      var state = this._navState;\n\n      if (!state) {\n        var prevented = this._startNavigation(e, coords, ZOOM_START);\n\n        if (!prevented) {\n          state = this._navState;\n        }\n      }\n\n      if (state) {\n        var totalDelta = state.totalDelta || delta;\n        state.totalDelta = totalDelta + delta;\n        var axes = this._navState.axes;\n        var ranges = {};\n\n        for (var i = 0; i < axes.length; i++) {\n          var currentAxis = axes[i];\n          var axisName = currentAxis.options.name;\n\n          if (axisName) {\n            ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1._mousewheelZoomRate(), coords);\n          }\n        }\n\n        this.trigger(ZOOM, {\n          delta: delta,\n          axisRanges: ranges,\n          originalEvent: e\n        });\n\n        if (this._mwTimeout) {\n          clearTimeout(this._mwTimeout);\n        }\n\n        this._mwTimeout = setTimeout(function () {\n          this$1._endNavigation(e, ZOOM_END);\n        }, MOUSEWHEEL_DELAY);\n      }\n    }\n  };\n\n  Chart.prototype._startNavigation = function _startNavigation(e, coords, chartEvent) {\n    var plotArea = this._model._plotArea;\n    var pane = plotArea.findPointPane(coords);\n    var axes = plotArea.axes.slice(0);\n\n    if (!pane) {\n      return;\n    }\n\n    var ranges = axisRanges(axes);\n    var prevented = this.trigger(chartEvent, {\n      axisRanges: ranges,\n      originalEvent: e\n    });\n\n    if (prevented) {\n      this._cancelDomEvents();\n    } else {\n      this._suppressHover = true;\n\n      this._unsetActivePoint();\n\n      this._navState = {\n        axisRanges: ranges,\n        pane: pane,\n        axes: axes\n      };\n    }\n  };\n\n  Chart.prototype._endNavigation = function _endNavigation(e, chartEvent) {\n    if (this._navState) {\n      this.trigger(chartEvent, {\n        axisRanges: this._navState.axisRanges,\n        originalEvent: e\n      });\n      this._suppressHover = false;\n      this._navState = null;\n    }\n  };\n\n  Chart.prototype._getChartElement = function _getChartElement(e, match) {\n    var element = this.surface.eventTarget(e);\n\n    if (element) {\n      return this._drawingChartElement(element, e, match);\n    }\n  };\n\n  Chart.prototype._drawingChartElement = function _drawingChartElement(element, e, match) {\n    var current = element;\n    var chartElement;\n\n    while (current && !chartElement) {\n      chartElement = current.chartElement;\n      current = current.parent;\n    }\n\n    if (chartElement) {\n      if (chartElement.aliasFor) {\n        chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n      }\n\n      if (match) {\n        chartElement = chartElement.closest(match);\n\n        if (chartElement && chartElement.aliasFor) {\n          chartElement = chartElement.aliasFor();\n        }\n      }\n\n      return chartElement;\n    }\n  };\n\n  Chart.prototype._eventCoordinates = function _eventCoordinates(e) {\n    var coordinates = eventCoordinates(e);\n    return this._toModelCoordinates(coordinates.x, coordinates.y);\n  };\n\n  Chart.prototype._elementPadding = function _elementPadding() {\n    if (!this._padding) {\n      var ref = elementStyles(this.element, [\"paddingLeft\", \"paddingTop\"]);\n      var paddingLeft = ref.paddingLeft;\n      var paddingTop = ref.paddingTop;\n      this._padding = {\n        top: paddingTop,\n        left: paddingLeft\n      };\n    }\n\n    return this._padding;\n  };\n\n  Chart.prototype._toDocumentCoordinates = function _toDocumentCoordinates(point) {\n    var padding = this._elementPadding();\n\n    var offset = elementOffset(this.element);\n    return {\n      left: round(point.x + padding.left + offset.left),\n      top: round(point.y + padding.top + offset.top)\n    };\n  }; // TODO: Breaking change due to peer version change\n  // Reuse by exposing _surfacePoint on Surface\n\n\n  Chart.prototype._toModelCoordinates = function _toModelCoordinates(clientX, clientY) {\n    var element = this.element;\n    var offset = elementOffset(element);\n\n    var padding = this._elementPadding();\n\n    var inverseTransform = elementScale(element).invert();\n    var point = new geometry.Point(clientX - offset.left - padding.left, clientY - offset.top - padding.top).transform(inverseTransform);\n    return new Point(point.x, point.y);\n  };\n\n  Chart.prototype._tap = function _tap(e) {\n    var this$1 = this;\n    var drawingElement = this.surface.eventTarget(e);\n\n    var element = this._drawingChartElement(drawingElement, e);\n\n    var sharedTooltip = this._sharedTooltip();\n\n    if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n      this._unsetActivePoint();\n    }\n\n    if (sharedTooltip) {\n      this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n    }\n\n    this._propagateClick(element, e); //part of fix for hover issue on windows touch\n\n\n    this.handlingTap = true;\n    setTimeout(function () {\n      this$1.handlingTap = false;\n    }, 0);\n  };\n\n  Chart.prototype._click = function _click(e) {\n    var element = this._getChartElement(e);\n\n    this._propagateClick(element, e);\n  };\n\n  Chart.prototype._propagateClick = function _propagateClick(element, e) {\n    var this$1 = this;\n    var current = element;\n\n    while (current) {\n      if (current.click) {\n        current.click(this$1, e);\n      }\n\n      current = current.parent;\n    }\n  };\n\n  Chart.prototype._startHover = function _startHover(element, e) {\n    if (this._suppressHover) {\n      return false;\n    }\n\n    var point = this._drawingChartElement(element, e, function (element) {\n      return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n    });\n\n    var activePoint = this._activePoint;\n    var multipleSeries = this._plotArea.series.length > 1;\n\n    var hasInactiveOpacity = this._hasInactiveOpacity();\n\n    this._updateHoveredPoint(point, e);\n\n    if (point && activePoint !== point && point.hover) {\n      this._activePoint = point;\n\n      if (!this._sharedTooltip() && !point.hover(this, e)) {\n        this._displayTooltip(point);\n\n        if (hasInactiveOpacity) {\n          this._displayInactiveOpacity(point, multipleSeries);\n        } else {\n          this._highlight.show(point);\n        }\n      }\n    } else if (!point && hasInactiveOpacity) {\n      if (multipleSeries && this._activeChartInstance) {\n        this._updateSeriesOpacity(point, true);\n\n        this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n\n        this._activeChartInstance = null;\n      }\n\n      this._highlight && this._highlight.hide();\n      this._activePoint = null;\n    }\n\n    return point;\n  };\n\n  Chart.prototype._displayTooltip = function _displayTooltip(point) {\n    var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n\n    if (tooltipOptions.visible) {\n      this._tooltip.show(point);\n    }\n  };\n\n  Chart.prototype._displayInactiveOpacity = function _displayInactiveOpacity(activePoint, multipleSeries, highlightPoints) {\n    var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n\n    if (!chartInstance) {\n      return;\n    }\n\n    if (multipleSeries) {\n      this._updateSeriesOpacity(activePoint);\n\n      this._applySeriesOpacity(chartInstance.children, null, true);\n\n      this._applySeriesOpacity(chartInstance.children, activePoint.series);\n\n      this._highlight.show(highlightPoints || activePoint);\n    } else {\n      var inactivePoints;\n\n      if (!chartInstance.supportsPointInactiveOpacity()) {\n        this._highlight.show(activePoint);\n\n        return;\n      }\n\n      inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n      if (inactivePoints && inactivePoints.length) {\n        this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n      }\n    }\n  };\n\n  Chart.prototype._getInactivePoints = function _getInactivePoints(activePoint, chartInstance) {\n    var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n    return allPoints.filter(function (point) {\n      return point !== activePoint;\n    });\n  };\n\n  Chart.prototype._getAllPointsOfType = function _getAllPointsOfType(container, type) {\n    var this$1 = this;\n    var points = [];\n\n    for (var i = 0; i < container.children.length; i++) {\n      var element = container.children[i];\n\n      if (element.constructor === type) {\n        points.push(element);\n      } else if (element.children && element.children.length) {\n        points = points.concat(this$1._getAllPointsOfType(element, type));\n      }\n    }\n\n    return points;\n  };\n\n  Chart.prototype._updateHoveredPoint = function _updateHoveredPoint(point, e) {\n    var hoveredPoint = this._hoveredPoint;\n\n    if (hoveredPoint && hoveredPoint !== point) {\n      hoveredPoint.out(this, e);\n      this._hoveredPoint = null;\n    }\n\n    if (point && hoveredPoint !== point && point.over) {\n      this._hoveredPoint = point;\n      point.over(this, e);\n    }\n  };\n\n  Chart.prototype._updateSeriesOpacity = function _updateSeriesOpacity(point, resetOpacity) {\n    var this$1 = this;\n    var plotArea = this._plotArea;\n    var length = plotArea.series.length;\n\n    for (var i = 0; i < length; i++) {\n      var currSeries = plotArea.series[i];\n\n      var defaultOpacity = this$1._getDefaultOpacityForSeries(currSeries);\n\n      var inactiveOpacity = this$1._getInactiveOpacityForSeries(currSeries);\n\n      if (!resetOpacity && currSeries !== point.series) {\n        currSeries.defaultOpacity = defaultOpacity;\n        currSeries.opacity = inactiveOpacity;\n\n        if (currSeries.line) {\n          currSeries.line.opacity = inactiveOpacity;\n        }\n      } else {\n        currSeries.opacity = defaultOpacity;\n\n        if (currSeries.line) {\n          currSeries.line.opacity = defaultOpacity;\n        }\n      }\n    }\n  };\n\n  Chart.prototype._applySeriesOpacity = function _applySeriesOpacity(elements, activeSeries, reset, series) {\n    var this$1 = this;\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var currSeries = element.series || series;\n      var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n      if (shouldHighlight && element.visual) {\n        var opacity = series ? series.opacity : element.series.opacity;\n\n        if (currSeries !== activeSeries || reset) {\n          element.visual.opacity(reset ? 1 : opacity);\n        }\n      }\n\n      if (element.children && element.children.length) {\n        this$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n      }\n    }\n  };\n\n  Chart.prototype._chartInstanceFromPoint = function _chartInstanceFromPoint(point) {\n    var chartInstance = point.parent;\n\n    while (chartInstance && !chartInstance.plotArea) {\n      chartInstance = chartInstance.parent;\n    }\n\n    return chartInstance;\n  };\n\n  Chart.prototype._hasInactiveOpacity = function _hasInactiveOpacity() {\n    var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n    var hasInactiveOpacity = this.options.series.filter(function (s) {\n      return s.highlight.inactiveOpacity !== undefined;\n    }).length > 0;\n    return hasDefaultInactiveOpacity || hasInactiveOpacity;\n  };\n\n  Chart.prototype._getInactiveOpacityForSeries = function _getInactiveOpacityForSeries(series) {\n    var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n    var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n    return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || DEFAULT_SERIES_OPACITY;\n  };\n\n  Chart.prototype._getDefaultOpacityForSeries = function _getDefaultOpacityForSeries(series) {\n    return series.defaultOpacity || series.opacity || DEFAULT_SERIES_OPACITY;\n  };\n\n  Chart.prototype._mouseover = function _mouseover(e) {\n    var obj;\n\n    var point = this._startHover(e.element, e.originalEvent);\n\n    if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n      this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n      bindEvents(document, (obj = {}, obj[MOUSEMOVE] = this._mouseMoveTrackHandler, obj));\n    }\n  };\n\n  Chart.prototype._mouseMoveTracking = function _mouseMoveTracking(e) {\n    var obj;\n    var ref = this;\n    var options = ref.options;\n    var tooltip = ref._tooltip;\n    var highlight = ref._highlight;\n    var point = ref._activePoint;\n\n    var coords = this._eventCoordinates(e);\n\n    if (this._plotArea.box.containsPoint(coords)) {\n      if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n        var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n\n        if (seriesPoint && seriesPoint !== point) {\n          this._activePoint = seriesPoint;\n\n          if (!seriesPoint.hover(this, e)) {\n            var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n\n            if (tooltipOptions.visible) {\n              tooltip.show(seriesPoint);\n            }\n\n            highlight.show(seriesPoint);\n          }\n        }\n      }\n    } else {\n      unbindEvents(document, (obj = {}, obj[MOUSEMOVE] = this._mouseMoveTrackHandler, obj));\n\n      this._unsetActivePoint();\n\n      this._mouseMoveTrackHandler = null;\n    }\n  };\n\n  Chart.prototype._mousemove = function _mousemove(e) {\n    var coords = this._eventCoordinates(e);\n\n    var plotArea = this._plotArea;\n\n    this._trackCrosshairs(coords);\n\n    if (plotArea.hover) {\n      var overPlotArea = plotArea.backgroundContainsPoint(coords);\n\n      if (overPlotArea) {\n        plotArea.hovered = true;\n\n        this._plotArea.hover(this, e);\n      } else if (plotArea.hovered && !overPlotArea) {\n        this.trigger(PLOT_AREA_LEAVE);\n        plotArea.hovered = false;\n      }\n    }\n\n    if (this._sharedTooltip()) {\n      this._trackSharedTooltip(coords, e);\n    }\n  };\n\n  Chart.prototype._trackCrosshairs = function _trackCrosshairs(coords) {\n    var crosshairs = this._plotArea.crosshairs;\n\n    for (var i = 0; i < crosshairs.length; i++) {\n      var current = crosshairs[i];\n\n      if (current.box.containsPoint(coords)) {\n        current.showAt(coords);\n      } else {\n        current.hide();\n      }\n    }\n  };\n\n  Chart.prototype._trackSharedTooltip = function _trackSharedTooltip(coords, e, toggle) {\n    if (this._suppressHover) {\n      return;\n    }\n\n    var ref = this;\n    var tooltipOptions = ref.options.tooltip;\n    var plotArea = ref._plotArea;\n    var categoryAxis = ref._plotArea.categoryAxis;\n    var tooltip = ref._tooltip;\n    var highlight = ref._highlight;\n\n    if (plotArea.backgroundContainsPoint(coords)) {\n      var index = categoryAxis.pointCategoryIndex(coords);\n\n      if (index !== this._tooltipCategoryIx || !this._sharedHighlight && toggle) {\n        var points = plotArea.pointsByCategoryIndex(index);\n        var pointArgs = points.map(function (point) {\n          return point.eventArgs(e);\n        });\n        var hoverArgs = pointArgs[0] || {};\n        hoverArgs.categoryPoints = pointArgs;\n\n        if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n          if (tooltipOptions.visible) {\n            tooltip.showAt(points, coords);\n          }\n\n          highlight.show(points);\n          this._sharedHighlight = true;\n        } else {\n          tooltip.hide();\n        }\n\n        this._tooltipCategoryIx = index;\n      } else if (toggle && this._sharedHighlight) {\n        highlight.hide();\n        tooltip.hide();\n        this._sharedHighlight = false;\n      }\n    } else if (this._sharedHighlight) {\n      highlight.hide();\n      tooltip.hide();\n      this._tooltipCategoryIx = null;\n      this._sharedHighlight = false;\n    }\n  };\n\n  Chart.prototype.hideElements = function hideElements(options) {\n    var plotArea = this._plotArea;\n\n    this._mousemove.cancel();\n\n    plotArea.hideCrosshairs();\n\n    this._unsetActivePoint(options);\n  };\n\n  Chart.prototype._unsetActivePoint = function _unsetActivePoint(options) {\n    var ref = this;\n    var tooltip = ref._tooltip;\n    var highlight = ref._highlight;\n    this._activePoint = null;\n    this._hoveredPoint = null;\n\n    if (tooltip && !(options && options.keepTooltipOpen)) {\n      tooltip.hide();\n    }\n\n    this._tooltipCategoryIx = null;\n    this._sharedHighlight = false;\n\n    if (highlight) {\n      highlight.hide();\n    }\n  };\n\n  Chart.prototype._deferRedraw = function _deferRedraw() {\n    this._redraw();\n  };\n\n  Chart.prototype._clearRedrawTimeout = function _clearRedrawTimeout() {\n    if (this._redrawTimeout) {\n      clearInterval(this._redrawTimeout);\n      this._redrawTimeout = null;\n    }\n  };\n\n  Chart.prototype.bindCategories = function bindCategories() {\n    var this$1 = this;\n    var options = this.options;\n    var definitions = [].concat(options.categoryAxis);\n\n    for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n      var axis = definitions[axisIx];\n\n      if (axis.autoBind !== false) {\n        this$1.bindCategoryAxisFromSeries(axis, axisIx);\n      }\n    }\n  };\n\n  Chart.prototype.bindCategoryAxisFromSeries = function bindCategoryAxisFromSeries(axis, axisIx) {\n    var this$1 = this;\n    var series = this.options.series;\n    var seriesLength = series.length;\n    var uniqueCategories = new HashMap(); //perf improvement in case type category with dates\n\n    var items = [];\n    var bindable = false;\n    var dateAxis;\n\n    for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n      var s = series[seriesIx];\n      var onAxis = s.categoryAxis === axis.name || !s.categoryAxis && axisIx === 0;\n      var data = s.data;\n      var dataLength = data.length;\n      var bind = s.categoryField && onAxis;\n      bindable = bind || bindable;\n\n      if (bind && dataLength > 0) {\n        dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n        var getFn = dateAxis ? getDateField : getField;\n\n        for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n          var dataRow = data[dataIx];\n          var category = getFn(s.categoryField, dataRow, this$1.chartService.intl);\n\n          if (dateAxis || !uniqueCategories.get(category)) {\n            items.push([category, dataRow]);\n\n            if (!dateAxis) {\n              uniqueCategories.set(category, true);\n            }\n          }\n        }\n      }\n    }\n\n    if (items.length > 0) {\n      if (dateAxis) {\n        items = uniqueDates(items, function (a, b) {\n          return dateComparer(a[0], b[0]);\n        });\n      }\n\n      var result = transpose(items);\n      axis.categories = result[0];\n    } else if (bindable) {\n      axis.categories = [];\n    }\n  };\n\n  Chart.prototype._isBindable = function _isBindable(series) {\n    var valueFields = SeriesBinder.current.valueFields(series);\n    var result = true;\n\n    for (var i = 0; i < valueFields.length; i++) {\n      var field = valueFields[i];\n\n      if (field === VALUE) {\n        field = \"field\";\n      } else {\n        field = field + \"Field\";\n      }\n\n      if (!defined(series[field])) {\n        result = false;\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  Chart.prototype._noTransitionsRedraw = function _noTransitionsRedraw() {\n    var options = this.options;\n    var transitionsState;\n\n    if (options.transitions !== false) {\n      options.transitions = false;\n      transitionsState = true;\n    }\n\n    this._redraw();\n\n    if (transitionsState) {\n      options.transitions = true;\n    }\n  };\n\n  Chart.prototype._legendItemHover = function _legendItemHover(seriesIndex, pointIndex) {\n    var ref = this;\n    var plotArea = ref._plotArea;\n    var highlight = ref._highlight;\n    var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n    var items;\n\n    if (inArray(currentSeries.type, [PIE, DONUT, FUNNEL])) {\n      items = plotArea.findPoint(function (point) {\n        return point.series.index === seriesIndex && point.index === pointIndex;\n      });\n    } else {\n      items = plotArea.pointsBySeriesIndex(seriesIndex);\n    }\n\n    if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n      var multipleSeries = plotArea.series.length > 1;\n      var point = items.length ? items[0] : items;\n\n      this._displayInactiveOpacity(point, multipleSeries, items);\n    } else {\n      highlight.show(items);\n    }\n  };\n\n  Chart.prototype._shouldAttachMouseMove = function _shouldAttachMouseMove() {\n    return this._plotArea.crosshairs.length || this._tooltip && this._sharedTooltip() || this.requiresHandlers([PLOT_AREA_HOVER, PLOT_AREA_LEAVE]);\n  };\n\n  Chart.prototype.updateMouseMoveHandler = function updateMouseMoveHandler() {\n    var obj, obj$1;\n    unbindEvents(this.element, (obj = {}, obj[MOUSEMOVE] = this._mousemove, obj));\n\n    if (this._shouldAttachMouseMove()) {\n      bindEvents(this.element, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mousemove, obj$1));\n    }\n  };\n\n  Chart.prototype.applyOptions = function applyOptions(options, theme) {\n    clearMissingValues(this._originalOptions, options);\n    this._originalOptions = deepExtend(this._originalOptions, options);\n    this.options = deepExtend({}, this._originalOptions);\n\n    if (theme) {\n      this._theme = theme;\n      this.chartService.theme = theme;\n    }\n\n    this._initTheme(this.options, this._theme);\n\n    this._toggleDragZoomEvents();\n  };\n\n  Chart.prototype.setOptions = function setOptions(options, theme) {\n    this.applyOptions(options, theme);\n    this.bindCategories();\n    this.redraw();\n    this.updateMouseMoveHandler();\n  };\n\n  Chart.prototype.setDirection = function setDirection(rtl) {\n    this.chartService.rtl = Boolean(rtl);\n\n    if (this.surface && this.surface.type === 'svg') {\n      this._destroySurface();\n    }\n  };\n\n  Chart.prototype.setIntlService = function setIntlService(intl) {\n    this.chartService.intl = intl;\n  };\n\n  Chart.prototype.noTransitionsRedraw = function noTransitionsRedraw() {\n    this._noTransitionsRedraw();\n  };\n\n  Chart.prototype.destroy = function destroy() {\n    var obj, obj$1;\n    this._destroyed = true;\n    unbindEvents(this.element, (obj = {}, obj[CONTEXTMENU] = this._clickHandler, obj[MOUSEWHEEL] = this._mousewheelHandler, obj[MOUSEMOVE] = this._mousemove, obj[MOUSELEAVE] = this._mouseleaveHandler, obj));\n\n    if (this.domEvents) {\n      this.domEvents.destroy();\n      delete this.domEvents;\n    }\n\n    if (this._mouseMoveTrackHandler) {\n      unbindEvents(document, (obj$1 = {}, obj$1[MOUSEMOVE] = this._mouseMoveTrackHandler, obj$1));\n    }\n\n    this._destroyView();\n\n    this._destroySurface();\n\n    this._clearRedrawTimeout();\n  };\n\n  Chart.prototype._destroySurface = function _destroySurface() {\n    var surface = this.surface;\n\n    if (surface) {\n      surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n      surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n      surface.destroy();\n      this.surface = null;\n    }\n  };\n\n  Chart.prototype._destroySelections = function _destroySelections() {\n    var selections = this._selections;\n\n    if (selections) {\n      while (selections.length > 0) {\n        selections.shift().destroy();\n      }\n    }\n  };\n\n  Chart.prototype._destroyView = function _destroyView() {\n    var model = this._model;\n\n    if (model) {\n      model.destroy();\n      this._model = null;\n    }\n\n    this._unsetActivePoint();\n\n    this._destroySelections();\n\n    if (this._tooltip) {\n      this._tooltip.destroy();\n    }\n\n    if (this._highlight) {\n      this._highlight.destroy();\n    }\n\n    if (this._zoomSelection) {\n      this._zoomSelection.destroy();\n\n      delete this._zoomSelection;\n    }\n\n    if (this._pannable) {\n      this._pannable.destroy();\n\n      delete this._pannable;\n    }\n\n    if (this._mousewheelZoom) {\n      this._mousewheelZoom.destroy();\n\n      delete this._mousewheelZoom;\n    }\n  };\n\n  return Chart;\n}(Class);\n\nfunction resolveAxisAliases(options) {\n  var aliases = AXIS_NAMES;\n\n  for (var idx = 0; idx < aliases.length; idx++) {\n    var alias = aliases[idx] + \"Axes\";\n\n    if (options[alias]) {\n      options[aliases[idx] + \"Axis\"] = options[alias];\n      delete options[alias];\n    }\n  }\n}\n\nfunction pointByCategoryName(points, name) {\n  if (points) {\n    for (var idx = 0; idx < points.length; idx++) {\n      if (points[idx].category === name) {\n        return [points[idx]];\n      }\n    }\n  }\n}\n\nfunction applyAxisDefaults(options, themeOptions) {\n  var themeAxisDefaults = (themeOptions || {}).axisDefaults || {};\n  var axisName, axisDefaults, axes;\n\n  function mapAxisOptions(axisOptions) {\n    var axisColor = (axisOptions || {}).color || axisDefaults.color;\n    var result = deepExtend({}, themeAxisDefaults, themeAxisDefaults[axisName], axisDefaults, axisDefaults[axisName], {\n      line: {\n        color: axisColor\n      },\n      labels: {\n        color: axisColor\n      },\n      title: {\n        color: axisColor\n      }\n    }, axisOptions);\n    delete result[axisName];\n    return result;\n  }\n\n  for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n    axisName = AXIS_NAMES[idx] + \"Axis\";\n    axisDefaults = options.axisDefaults || {};\n    axes = [].concat(options[axisName]);\n    axes = axes.map(mapAxisOptions);\n    options[axisName] = axes.length > 1 ? axes : axes[0];\n  }\n}\n\nfunction applySeriesDefaults(options, themeOptions) {\n  var series = options.series;\n  var seriesLength = series.length;\n  var seriesDefaults = options.seriesDefaults;\n  var commonDefaults = deepExtend({}, options.seriesDefaults);\n  var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n  var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n  cleanupNestedSeriesDefaults(commonDefaults);\n  cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n  for (var i = 0; i < seriesLength; i++) {\n    var seriesType = series[i].type || options.seriesDefaults.type;\n    var baseOptions = deepExtend({\n      data: []\n    }, commonThemeDefaults, themeSeriesDefaults[seriesType], {\n      tooltip: options.tooltip\n    }, commonDefaults, seriesDefaults[seriesType]);\n    series[i]._defaults = baseOptions;\n    series[i] = deepExtend({}, baseOptions, series[i]);\n    series[i].data = series[i].data || [];\n  }\n}\n\nfunction cleanupNestedSeriesDefaults(seriesDefaults) {\n  delete seriesDefaults.bar;\n  delete seriesDefaults.column;\n  delete seriesDefaults.rangeColumn;\n  delete seriesDefaults.line;\n  delete seriesDefaults.verticalLine;\n  delete seriesDefaults.pie;\n  delete seriesDefaults.donut;\n  delete seriesDefaults.area;\n  delete seriesDefaults.verticalArea;\n  delete seriesDefaults.scatter;\n  delete seriesDefaults.scatterLine;\n  delete seriesDefaults.bubble;\n  delete seriesDefaults.candlestick;\n  delete seriesDefaults.ohlc;\n  delete seriesDefaults.boxPlot;\n  delete seriesDefaults.bullet;\n  delete seriesDefaults.verticalBullet;\n  delete seriesDefaults.polarArea;\n  delete seriesDefaults.polarLine;\n  delete seriesDefaults.radarArea;\n  delete seriesDefaults.radarLine;\n  delete seriesDefaults.waterfall;\n}\n\nfunction axisRanges(axes) {\n  var ranges = {};\n\n  for (var i = 0; i < axes.length; i++) {\n    var axis = axes[i];\n    var axisName = axis.options.name;\n\n    if (axisName) {\n      ranges[axisName] = axis.range();\n    }\n  }\n\n  return ranges;\n}\n\nfunction sortDates(dates, comparer) {\n  if (comparer === void 0) comparer = dateComparer;\n\n  for (var i = 1, length = dates.length; i < length; i++) {\n    if (comparer(dates[i], dates[i - 1]) < 0) {\n      dates.sort(comparer);\n      break;\n    }\n  }\n\n  return dates;\n}\n\nfunction uniqueDates(srcDates, comparer) {\n  if (comparer === void 0) comparer = dateComparer;\n  var dates = sortDates(srcDates, comparer);\n  var length = dates.length;\n  var result = length > 0 ? [dates[0]] : [];\n\n  for (var i = 1; i < length; i++) {\n    if (comparer(dates[i], last(result)) !== 0) {\n      result.push(dates[i]);\n    }\n  }\n\n  return result;\n}\n\nfunction transpose(rows) {\n  var rowCount = rows.length;\n  var result = [];\n\n  for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n    var row = rows[rowIx];\n    var colCount = row.length;\n\n    for (var colIx = 0; colIx < colCount; colIx++) {\n      result[colIx] = result[colIx] || [];\n      result[colIx].push(row[colIx]);\n    }\n  }\n\n  return result;\n}\n\nvar DATA_FIELDS = ['data', 'categories'];\n\nfunction clearMissingValues(originalOptions, options) {\n  for (var field in options) {\n    if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n      var fieldValue = options[field];\n      var originalValue = originalOptions[field];\n\n      if (defined(originalValue)) {\n        var nullValue = fieldValue === null;\n\n        if (nullValue || !defined(fieldValue)) {\n          delete originalOptions[field];\n\n          if (nullValue) {\n            delete options[field];\n          }\n        } else if (originalValue && isObject(fieldValue)) {\n          if (isObject(originalValue)) {\n            clearMissingValues(originalValue, fieldValue);\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction triggerPaneRender(panes) {\n  for (var idx = 0; idx < panes.length; idx++) {\n    panes[idx].notifyRender();\n  }\n}\n\nsetDefaultOptions(Chart, {\n  renderAs: \"\",\n  chartArea: {},\n  legend: {\n    visible: true,\n    labels: {}\n  },\n  categoryAxis: {},\n  seriesDefaults: {\n    type: COLUMN,\n    data: [],\n    highlight: {\n      visible: true\n    },\n    labels: {},\n    negativeValues: {\n      visible: false\n    }\n  },\n  series: [],\n  seriesColors: null,\n  tooltip: {\n    visible: false\n  },\n  transitions: true,\n  valueAxis: {},\n  plotArea: {},\n  title: {},\n  xAxis: {},\n  yAxis: {},\n  panes: [{}],\n  pannable: false,\n  zoomable: false\n});\nexport default Chart;","map":{"version":3,"sources":["/home/meryem/repos/Movie_Trend_Visualizer/client/node_modules/@progress/kendo-charts/dist/es/chart/chart.js"],"names":["drawing","draw","throttle","geometry","RootElement","Title","CategoryAxis","Point","Highlight","Pannable","ZoomSelection","MousewheelZoom","Legend","PlotAreaFactory","Selection","SeriesBinder","Tooltip","SharedTooltip","CategoricalPlotArea","PlotAreaBase","ChartService","DomEventsBuilder","getField","isDateAxis","getDateField","ChartPane","ChartPlotArea","findAxisByName","X","Y","VALUE","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_SERIES_OPACITY","addClass","Class","setDefaultOptions","deepExtend","defined","find","isObject","isFunction","elementSize","elementOffset","elementScale","elementStyles","eventCoordinates","bindEvents","unbindEvents","mousewheelDelta","FontLoader","inArray","last","round","HashMap","valueOrDefault","dateComparer","DRAG_START","DRAG","DRAG_END","ZOOM_START","ZOOM","ZOOM_END","SELECT_START","SELECT","SELECT_END","PLOT_AREA_HOVER","PLOT_AREA_LEAVE","RENDER","CATEGORY","PIE","DONUT","FUNNEL","COLUMN","MOUSEWHEEL","MOUSEWHEEL_DELAY","MOUSEWHEEL_ZOOM_RATE","SHOW_TOOLTIP","SERIES_HOVER","AXIS_NAMES","MOUSEMOVE","CONTEXTMENU","MOUSELEAVE","MOUSEMOVE_DELAY","Chart","element","userOptions","themeOptions","context","this$1","call","observers","addObserver","observer","chartService","theme","_initElement","options","_originalOptions","_theme","_initTheme","_initHandlers","_initSurface","bindCategories","preloadFonts","fontLoaded","_destroyed","trigger","_redraw","_attachEvents","__proto__","prototype","Object","create","constructor","_setElementClass","style","position","firstChild","removeChild","seriesCopies","series","i","length","push","assign","resolveAxisAliases","applyDefaults","seriesColors","applySeriesColors","getSize","chartArea","width","parseInt","Math","floor","offsetWidth","height","offsetHeight","resize","force","size","currentSize","_size","hasSize","_resize","_selections","s","visible","_destroySelections","_setupSelection","_noTransitionsRedraw","redraw","paneName","plotArea","_model","_plotArea","pane","findPane","getAxis","name","axes","findPaneByName","panes","idx","findPaneByIndex","toggleHighlight","show","filter","firstSeries","srcSeries","points","filterPoints","seriesName","categoryName","category","type","pointByCategoryName","pointsBySeriesName","charts","togglePointsHighlight","highlight","_highlight","togglePointHighlight","showTooltip","shared","_sharedTooltip","ref","tooltip","_tooltip","point","categoryIndex","findPoint","categoryIx","categoryAxis","pointsByCategoryIndex","showAt","hideTooltip","hide","surface","wrap","_surfaceWrap","renderAs","_destroySurface","Surface","bind","_surfaceMouseenterHandler","_surfaceMouseleaveHandler","clear","model","_getModel","_destroyView","renderVisual","transitions","traverse","animation","setup","visual","play","_createTooltip","_createPannable","_createZoomSelection","_createMousewheelZoom","triggerPaneRender","_navState","_cancelDomEvents","exportVisual","exportOptions","currentOptions","clearMissingValues","pannable","_pannable","zoomable","selection","_zoomSelection","mousewheel","_mousewheelZoom","_toggleDragZoomEvents","allowDrag","requiresHandlers","allowZoom","_dragZoomEnabled","touchAction","_touchAction","_toggleDomEvents","drag","zoom","domEvents","toggleDrag","toggleZoom","tooltipOptions","_createSharedTooltip","applyAxisDefaults","applySeriesDefaults","colors","currentSeries","seriesColor","defaults","_defaults","color","_createPlotArea","_modelOptions","chart","buildTitle","title","legend","append","reflow","skipSeries","current","selections","axis","select","vertical","range","min","max","_selectStart","e","_select","_selectEnd","_clickHandler","_click","_mousewheelHandler","_mousewheel","_mouseleaveHandler","_mouseleave","_mouseover","_mouseout","_mousemove","removeObserver","index","indexOf","splice","eventNames","args","anchor","_toDocumentCoordinates","sender","isDefaultPrevented","obj","obj$1","_shouldAttachMouseMove","start","_start","move","_move","end","_end","tap","_tap","gesturestart","_gesturestart","gesturechange","_gesturechange","gestureend","_gestureend","_hoveredPoint","out","hovered","cancel","_stopChartHandlers","_gestureDistance","distance","_unsetActivePoint","suspendTracking","_zooming","resumeTracking","mousewheelZoom","preventDefault","previousGestureDistance","scaleDelta","abs","delta","axisRanges","originalEvent","coords","_eventCoordinates","ranges","updateRanges","_drawingChartElement","leave","backgroundContainsPoint","_startNavigation","_suppressHover","panning","state","pan","ranges$1","currentAxis","axisName","y","x","startLocation","location","translateRange","_endNavigation","paneByPoint","onPane","_mousewheelZoomRate","rate","_mwTimeout","clearTimeout","setTimeout","prevented","totalDelta","scaleRange","chartEvent","findPointPane","slice","_getChartElement","match","eventTarget","chartElement","parent","aliasFor","closest","coordinates","_toModelCoordinates","_elementPadding","_padding","paddingLeft","paddingTop","top","left","padding","offset","clientX","clientY","inverseTransform","invert","transform","drawingElement","sharedTooltip","_startHover","_trackSharedTooltip","_propagateClick","handlingTap","click","hover","over","activePoint","_activePoint","multipleSeries","hasInactiveOpacity","_hasInactiveOpacity","_updateHoveredPoint","_displayTooltip","_displayInactiveOpacity","_activeChartInstance","_updateSeriesOpacity","_applySeriesOpacity","children","highlightPoints","chartInstance","_chartInstanceFromPoint","inactivePoints","supportsPointInactiveOpacity","_getInactivePoints","_getInactiveOpacityForSeries","allPoints","_getAllPointsOfType","container","concat","hoveredPoint","resetOpacity","currSeries","defaultOpacity","_getDefaultOpacityForSeries","inactiveOpacity","opacity","line","elements","activeSeries","reset","shouldHighlight","hasDefaultInactiveOpacity","seriesDefaults","undefined","defaultInactiveOpacity","seriesInactiveOpacity","tooltipTracking","_mouseMoveTrackHandler","_mouseMoveTracking","document","box","containsPoint","getNearestPoint","seriesPoint","seriesIx","_trackCrosshairs","overPlotArea","crosshairs","toggle","pointCategoryIndex","_tooltipCategoryIx","_sharedHighlight","pointArgs","map","eventArgs","hoverArgs","categoryPoints","hideElements","hideCrosshairs","keepTooltipOpen","_deferRedraw","_clearRedrawTimeout","_redrawTimeout","clearInterval","definitions","axisIx","autoBind","bindCategoryAxisFromSeries","seriesLength","uniqueCategories","items","bindable","dateAxis","onAxis","data","dataLength","categoryField","getFn","dataIx","dataRow","intl","get","set","uniqueDates","a","b","result","transpose","categories","_isBindable","valueFields","field","transitionsState","_legendItemHover","seriesIndex","pointIndex","pointsBySeriesIndex","updateMouseMoveHandler","applyOptions","setOptions","setDirection","rtl","Boolean","setIntlService","noTransitionsRedraw","destroy","unbind","shift","aliases","alias","themeAxisDefaults","axisDefaults","mapAxisOptions","axisOptions","axisColor","labels","commonDefaults","themeSeriesDefaults","commonThemeDefaults","cleanupNestedSeriesDefaults","seriesType","baseOptions","bar","column","rangeColumn","verticalLine","pie","donut","area","verticalArea","scatter","scatterLine","bubble","candlestick","ohlc","boxPlot","bullet","verticalBullet","polarArea","polarLine","radarArea","radarLine","waterfall","sortDates","dates","comparer","sort","srcDates","rows","rowCount","rowIx","row","colCount","colIx","DATA_FIELDS","originalOptions","hasOwnProperty","fieldValue","originalValue","nullValue","notifyRender","negativeValues","valueAxis","xAxis","yAxis"],"mappings":"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","sourcesContent":["import { drawing as draw, throttle, geometry } from '@progress/kendo-drawing';\n\nimport { RootElement, Title, CategoryAxis, Point } from '../core';\n\nimport Highlight from './highlight';\nimport Pannable from './pan-and-zoom/pannable';\nimport ZoomSelection from './pan-and-zoom/zoom-selection';\nimport MousewheelZoom from './pan-and-zoom/mousewheel-zoom';\nimport Legend from './legend/legend';\nimport PlotAreaFactory from './plotarea/plotarea-factory';\nimport Selection from './selection';\nimport SeriesBinder from './series-binder';\nimport Tooltip from './tooltip/tooltip';\nimport SharedTooltip from './tooltip/shared-tooltip';\nimport CategoricalPlotArea from './plotarea/categorical-plotarea';\nimport PlotAreaBase from './plotarea/plotarea-base';\nimport { ChartService, DomEventsBuilder } from '../services';\nimport getField from './utils/get-field';\nimport isDateAxis from './utils/is-date-axis';\nimport getDateField from './utils/get-date-field';\nimport { ChartPane, ChartPlotArea, findAxisByName } from './api-elements';\n\nimport { X, Y, VALUE, DEFAULT_WIDTH, DEFAULT_HEIGHT, DEFAULT_SERIES_OPACITY } from '../common/constants';\nimport { addClass, Class, setDefaultOptions, deepExtend, defined, find, isObject, isFunction, elementSize, elementOffset,\n         elementScale, elementStyles, eventCoordinates, bindEvents, unbindEvents, mousewheelDelta, FontLoader, inArray, last, round,\n         HashMap, valueOrDefault } from '../common';\n\nimport { dateComparer } from '../date-utils';\n\nimport { DRAG_START, DRAG, DRAG_END, ZOOM_START, ZOOM, ZOOM_END, SELECT_START, SELECT, SELECT_END, PLOT_AREA_HOVER, PLOT_AREA_LEAVE,\n    RENDER, CATEGORY, PIE, DONUT, FUNNEL, COLUMN, MOUSEWHEEL, MOUSEWHEEL_DELAY, MOUSEWHEEL_ZOOM_RATE, SHOW_TOOLTIP, SERIES_HOVER } from './constants';\n\nimport './animations';\nimport './register-charts';\n\nvar AXIS_NAMES = [ CATEGORY, VALUE, X, Y ];\n\nvar MOUSEMOVE = \"mousemove\";\nvar CONTEXTMENU = \"contextmenu\";\nvar MOUSELEAVE = \"mouseleave\";\nvar MOUSEMOVE_DELAY = 20;\n\nvar Chart = (function (Class) {\n    function Chart(element, userOptions, themeOptions, context) {\n        var this$1 = this;\n        if ( context === void 0 ) context = {};\n\n        Class.call(this);\n\n        this.observers = [];\n        this.addObserver(context.observer);\n        this.chartService = new ChartService(this, context);\n        this.chartService.theme = themeOptions;\n\n        this._initElement(element);\n\n        var options = deepExtend({}, this.options, userOptions);\n        this._originalOptions = deepExtend({}, options);\n        this._theme = themeOptions;\n        this._initTheme(options, themeOptions);\n\n        this._initHandlers();\n        this._initSurface();\n\n        this.bindCategories();\n        FontLoader.preloadFonts(userOptions, function () {\n            this$1.fontLoaded = true;\n            if (!this$1._destroyed) {\n                this$1.trigger('init');\n                this$1._redraw();\n                this$1._attachEvents();\n            }\n        });\n    }\n\n    if ( Class ) Chart.__proto__ = Class;\n    Chart.prototype = Object.create( Class && Class.prototype );\n    Chart.prototype.constructor = Chart;\n\n    Chart.prototype._initElement = function _initElement (element) {\n        this._setElementClass(element);\n        element.style.position = \"relative\";\n        while (element.firstChild) {\n            element.removeChild(element.firstChild);\n        }\n        this.element = element;\n    };\n\n    Chart.prototype._setElementClass = function _setElementClass (element) {\n        addClass(element, \"k-chart\");\n    };\n\n    Chart.prototype._initTheme = function _initTheme (options, themeOptions) {\n        var seriesCopies = [];\n        var series = options.series || [];\n\n        for (var i = 0; i < series.length; i++) {\n            seriesCopies.push(Object.assign({}, series[i]));\n        }\n        options.series = seriesCopies;\n\n        resolveAxisAliases(options);\n        this.applyDefaults(options, themeOptions);\n\n        // Clean up default if not overriden by data attributes\n        if (options.seriesColors === null) {\n            delete options.seriesColors;\n        }\n\n        this.options = deepExtend({}, themeOptions, options);\n        this.applySeriesColors();\n    };\n\n    Chart.prototype.getSize = function getSize () {\n        var chartArea = this.options.chartArea || {};\n        var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n        var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n\n        return {\n            width: width,\n            height: height\n        };\n    };\n\n    Chart.prototype.resize = function resize (force) {\n        var size = this.getSize();\n        var currentSize = this._size;\n        var hasSize = size.width > 0 || size.height > 0;\n\n        if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n            this._size = size;\n            this._resize(size, force);\n            this.trigger(\"resize\", size);\n        } else if (hasSize && this._selections && find(this._selections, function (s) { return !s.visible; })) {\n            this._destroySelections();\n            this._setupSelection();\n        }\n    };\n\n    Chart.prototype._resize = function _resize () {\n        this._noTransitionsRedraw();\n    };\n\n    Chart.prototype.redraw = function redraw (paneName) {\n        this.applyDefaults(this.options);\n        this.applySeriesColors();\n\n        if (paneName) {\n            var plotArea = this._model._plotArea;\n            var pane = plotArea.findPane(paneName);\n            plotArea.redraw(pane);\n        } else {\n            this._redraw();\n        }\n    };\n\n    Chart.prototype.getAxis = function getAxis (name) {\n        return findAxisByName(name, this._plotArea.axes);\n    };\n\n    Chart.prototype.findAxisByName = function findAxisByName (name) {\n        return this.getAxis(name);\n    };\n\n    Chart.prototype.findPaneByName = function findPaneByName (name) {\n        var panes = this._plotArea.panes;\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            if (panes[idx].options.name === name) {\n                return new ChartPane(panes[idx]);\n            }\n        }\n    };\n\n    Chart.prototype.findPaneByIndex = function findPaneByIndex (idx) {\n        var panes = this._plotArea.panes;\n        if (panes[idx]) {\n            return new ChartPane(panes[idx]);\n        }\n    };\n\n    Chart.prototype.plotArea = function plotArea () {\n        return new ChartPlotArea(this._plotArea);\n    };\n\n    Chart.prototype.toggleHighlight = function toggleHighlight (show, filter) {\n        var plotArea = this._plotArea;\n        var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n        var points;\n\n        if (isFunction(filter)) {\n            points = plotArea.filterPoints(filter);\n        } else {\n            var seriesName, categoryName;\n            if (isObject(filter)) {\n                seriesName = filter.series;\n                categoryName = filter.category;\n            } else {\n                seriesName = categoryName = filter;\n            }\n\n            if (firstSeries.type === DONUT) {\n                points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n            } else if (firstSeries.type === PIE || firstSeries.type === FUNNEL) {\n                points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n            } else {\n                points = plotArea.pointsBySeriesName(seriesName);\n            }\n        }\n\n        if (points) {\n            this.togglePointsHighlight(show, points);\n        }\n    };\n\n    Chart.prototype.togglePointsHighlight = function togglePointsHighlight (show, points) {\n        var highlight = this._highlight;\n        for (var idx = 0; idx < points.length; idx++) {\n            highlight.togglePointHighlight(points[idx], show);\n        }\n    };\n\n    Chart.prototype.showTooltip = function showTooltip (filter) {\n        var shared = this._sharedTooltip();\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var plotArea = ref._plotArea;\n        var point, categoryIndex;\n\n        if (isFunction(filter)) {\n            point = plotArea.findPoint(filter);\n            if (point && shared) {\n                categoryIndex = point.categoryIx;\n            }\n        } else if (shared && defined(filter)) {\n            categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n        }\n\n        if (shared) {\n            if (categoryIndex >= 0) {\n                var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n                tooltip.showAt(points);\n            }\n        } else if (point) {\n            tooltip.show(point);\n        }\n    };\n\n    Chart.prototype.hideTooltip = function hideTooltip () {\n        this._tooltip.hide();\n    };\n\n    Chart.prototype._initSurface = function _initSurface () {\n        var surface = this.surface;\n        var wrap = this._surfaceWrap();\n\n        var chartArea = this.options.chartArea || {};\n        if (chartArea.width) {\n            elementSize(wrap, { width: chartArea.width });\n        }\n        if (chartArea.height) {\n            elementSize(wrap, { height: chartArea.height });\n        }\n\n        if (!surface || surface.options.type !== this.options.renderAs) {\n            this._destroySurface();\n\n            this.surface = draw.Surface.create(wrap, {\n                type: this.options.renderAs\n            });\n\n            this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n            this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n\n        } else {\n            this.surface.clear();\n            this.surface.resize();\n        }\n    };\n\n    Chart.prototype._surfaceWrap = function _surfaceWrap () {\n        return this.element;\n    };\n\n    Chart.prototype._redraw = function _redraw () {\n        var model = this._getModel();\n        this._size = {\n            width: model.options.width,\n            height: model.options.height\n        };\n\n        this._destroyView();\n\n        this._model = model;\n        this._plotArea = model._plotArea;\n\n        model.renderVisual();\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.setup();\n                }\n            });\n        }\n\n        this._initSurface();\n        this.surface.draw(model.visual);\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.play();\n                }\n            });\n        }\n\n        this._tooltip = this._createTooltip();\n        this._highlight = new Highlight();\n        this._setupSelection();\n        this._createPannable();\n        this._createZoomSelection();\n        this._createMousewheelZoom();\n\n        this.trigger(RENDER);\n        triggerPaneRender(this._plotArea.panes);\n\n        if (!this._navState) {\n            this._cancelDomEvents();\n        }\n    };\n\n    Chart.prototype.exportVisual = function exportVisual (exportOptions) {\n        var visual;\n        if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n            var currentOptions = this.options;\n            var options = deepExtend({}, exportOptions.options, {\n                chartArea: {\n                    width: exportOptions.width,\n                    height: exportOptions.height\n                }\n            });\n\n            clearMissingValues(this._originalOptions, options);\n            this.options = deepExtend({}, this._originalOptions, options);\n            this._initTheme(this.options, this._theme);\n            this.bindCategories();\n\n            var model = this._getModel();\n\n            model.renderVisual();\n            triggerPaneRender(model._plotArea.panes);\n\n            visual = model.visual;\n\n            this.options = currentOptions;\n        } else {\n            visual = this.surface.exportVisual();\n        }\n\n        return visual;\n    };\n\n    Chart.prototype._sharedTooltip = function _sharedTooltip () {\n        return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n    };\n\n    Chart.prototype._createPannable = function _createPannable () {\n        var options = this.options;\n        if (options.pannable !== false) {\n            this._pannable = new Pannable(this._plotArea, options.pannable);\n        }\n    };\n\n    Chart.prototype._createZoomSelection = function _createZoomSelection () {\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        if (zoomable !== false && selection !== false) {\n            this._zoomSelection = new ZoomSelection(this, selection);\n        }\n    };\n\n    Chart.prototype._createMousewheelZoom = function _createMousewheelZoom () {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel;\n        if (zoomable !== false && mousewheel !== false) {\n            this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n        }\n    };\n\n    Chart.prototype._toggleDragZoomEvents = function _toggleDragZoomEvents () {\n        var pannable = this.options.pannable;\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        var mousewheel = (zoomable || {}).mousewheel;\n        var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ]);\n        var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ ZOOM_START, ZOOM, ZOOM_END ]);\n        var element = this.element;\n\n        if (this._dragZoomEnabled && allowDrag && allowZoom) {\n            element.style.touchAction = this._touchAction || '';\n            this._dragZoomEnabled = false;\n        } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n            element.style.touchAction = \"none\";\n\n            this._dragZoomEnabled = true;\n        }\n\n        this._toggleDomEvents(!allowDrag, !allowZoom);\n    };\n\n    Chart.prototype._toggleDomEvents = function _toggleDomEvents (drag, zoom) {\n        var domEvents = this.domEvents;\n        if (!domEvents) {\n            return;\n        }\n\n        if (domEvents.toggleDrag) {\n            domEvents.toggleDrag(drag);\n        }\n\n        if (domEvents.toggleZoom) {\n            domEvents.toggleZoom(zoom);\n        }\n    };\n\n    Chart.prototype._createTooltip = function _createTooltip () {\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var tooltip;\n\n        if (this._sharedTooltip()) {\n            tooltip = this._createSharedTooltip(tooltipOptions);\n        } else {\n            tooltip = new Tooltip(this.chartService, tooltipOptions);\n        }\n\n        return tooltip;\n    };\n\n    Chart.prototype._createSharedTooltip = function _createSharedTooltip (options) {\n        return new SharedTooltip(this._plotArea, options);\n    };\n\n    Chart.prototype.applyDefaults = function applyDefaults (options, themeOptions) {\n        applyAxisDefaults(options, themeOptions);\n        applySeriesDefaults(options, themeOptions);\n    };\n\n    Chart.prototype.applySeriesColors = function applySeriesColors () {\n        var options = this.options;\n        var series = options.series;\n        var colors = options.seriesColors || [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var seriesColor = colors[i % colors.length];\n            var defaults = currentSeries._defaults;\n\n            currentSeries.color = currentSeries.color || seriesColor;\n            if (defaults) {\n                defaults.color = defaults.color || seriesColor;\n            }\n        }\n    };\n\n    Chart.prototype._getModel = function _getModel () {\n        var options = this.options;\n        var plotArea = this._createPlotArea();\n        var model = new RootElement(this._modelOptions());\n        model.chart = this;\n        model._plotArea = plotArea;\n\n        Title.buildTitle(options.title, model);\n\n        if (options.legend && options.legend.visible) {\n            model.append(new Legend(plotArea.options.legend, this.chartService));\n        }\n        model.append(plotArea);\n        model.reflow();\n\n        return model;\n    };\n\n    Chart.prototype._modelOptions = function _modelOptions () {\n        var options = this.options;\n        var size = this.getSize();\n\n        return deepExtend({\n            transitions: options.transitions,\n            width: size.width || DEFAULT_WIDTH,\n            height: size.height || DEFAULT_HEIGHT\n        }, options.chartArea);\n    };\n\n    Chart.prototype._createPlotArea = function _createPlotArea (skipSeries) {\n        var options = this.options;\n\n        var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n\n        return plotArea;\n    };\n\n    Chart.prototype._setupSelection = function _setupSelection () {\n        var this$1 = this;\n\n        var ref = this;\n        var axes = ref._plotArea.axes;\n        var selections = this._selections = [];\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var options = axis.options;\n            if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n                var range = axis.range();\n\n                var selection = new Selection(this$1, axis,\n                    deepExtend({ min: range.min, max: range.max }, options.select)\n                );\n\n                selections.push(selection);\n            }\n        }\n    };\n\n    Chart.prototype._selectStart = function _selectStart (e) {\n        return this.trigger(SELECT_START, e);\n    };\n\n    Chart.prototype._select = function _select (e) {\n        return this.trigger(SELECT, e);\n    };\n\n    Chart.prototype._selectEnd = function _selectEnd (e) {\n        return this.trigger(SELECT_END, e);\n    };\n\n    Chart.prototype._initHandlers = function _initHandlers () {\n        this._clickHandler = this._click.bind(this);\n        this._mousewheelHandler = this._mousewheel.bind(this);\n        this._mouseleaveHandler = this._mouseleave.bind(this);\n        this._surfaceMouseenterHandler = this._mouseover.bind(this);\n        this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n\n        this._mousemove = throttle(\n            this._mousemove.bind(this),\n            MOUSEMOVE_DELAY\n        );\n    };\n\n    Chart.prototype.addObserver = function addObserver (observer) {\n        if (observer) {\n            this.observers.push(observer);\n        }\n    };\n\n    Chart.prototype.removeObserver = function removeObserver (observer) {\n        var index = this.observers.indexOf(observer);\n        if (index >= 0) {\n            this.observers.splice(index, 1);\n        }\n    };\n\n    Chart.prototype.requiresHandlers = function requiresHandlers (eventNames) {\n        var observers = this.observers;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].requiresHandlers(eventNames)) {\n                return true;\n            }\n        }\n    };\n\n    Chart.prototype.trigger = function trigger (name, args) {\n        if ( args === void 0 ) args = {};\n\n        if (name === SHOW_TOOLTIP) {\n            args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n        }\n        args.sender = this;\n\n        var observers = this.observers;\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, args)) {\n                isDefaultPrevented = true;\n            }\n        }\n\n        return isDefaultPrevented;\n    };\n\n    Chart.prototype._attachEvents = function _attachEvents () {\n        var obj, obj$1;\n\n        var element = this.element;\n\n        this._touchAction = element.style.touchAction;\n\n        bindEvents(element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            bindEvents(element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n\n        this.domEvents = DomEventsBuilder.create(this.element, {\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n\n        this._toggleDragZoomEvents();\n    };\n\n    Chart.prototype._mouseleave = function _mouseleave (e) {\n        if (this._hoveredPoint) {\n            this._hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (this._plotArea.hovered) {\n            this.trigger(PLOT_AREA_LEAVE);\n            this._plotArea.hovered = false;\n        }\n    };\n\n    Chart.prototype._cancelDomEvents = function _cancelDomEvents () {\n        if (this.domEvents && this.domEvents.cancel) {\n            this.domEvents.cancel();\n        }\n    };\n\n    Chart.prototype._gesturestart = function _gesturestart (e) {\n        if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n            this._gestureDistance = e.distance;\n            this._unsetActivePoint();\n            this.surface.suspendTracking();\n        }\n    };\n\n    Chart.prototype._gestureend = function _gestureend (e) {\n        if (this._zooming && !this._stopChartHandlers(e)) {\n            if (this.surface) {\n                this.surface.resumeTracking();\n            }\n            this._zooming = false;\n            this.trigger(ZOOM_END, {});\n        }\n    };\n\n    Chart.prototype._gesturechange = function _gesturechange (e) {\n        var mousewheelZoom = this._mousewheelZoom;\n\n        if (mousewheelZoom && !this._stopChartHandlers(e)) {\n            e.preventDefault();\n            var previousGestureDistance = this._gestureDistance;\n            var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n            if (Math.abs(scaleDelta) >= 0.1) {\n                scaleDelta = Math.round(scaleDelta * 10);\n\n                this._gestureDistance = e.distance;\n                var args = { delta: scaleDelta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                    var coords = this._eventCoordinates(e);\n\n                    if (!this._zooming) {\n                        this._zooming = true;\n                    }\n\n                    var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n                    if (ranges && !this.trigger(ZOOM, args)) {\n                        mousewheelZoom.zoom();\n                    }\n                }\n            }\n        }\n    };\n\n    Chart.prototype._mouseout = function _mouseout (e) {\n        if (e.element) {\n            var element = this._drawingChartElement(e.element, e);\n\n            if (element && element.leave) {\n                element.leave(this, e.originalEvent);\n            }\n        }\n    };\n\n    Chart.prototype._start = function _start (e) {\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n\n        if (this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ])) {\n            this._startNavigation(e, coords, DRAG_START);\n        }\n\n        if (this._pannable && this._pannable.start(e)) {\n            this.surface.suspendTracking();\n            this._unsetActivePoint();\n            this._suppressHover = true;\n            this.chartService.panning = true;\n        }\n\n        if (this._zoomSelection) {\n            if (this._zoomSelection.start(e)) {\n                this.trigger(ZOOM_START, { axisRanges: axisRanges(this._plotArea.axes), originalEvent: e });\n            }\n        }\n    };\n\n    Chart.prototype._move = function _move (e) {\n        var ref = this;\n        var state = ref._navState;\n        var pannable = ref._pannable;\n\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        if (pannable) {\n            var ranges = pannable.move(e);\n\n            if (ranges && !this.trigger(DRAG, { axisRanges: ranges, originalEvent: e })) {\n                pannable.pan();\n            }\n        } else if (state) {\n            var ranges$1 = {};\n            var axes = state.axes;\n\n            for (var i = 0; i < axes.length; i++) {\n                var currentAxis = axes[i];\n                var axisName = currentAxis.options.name;\n                if (axisName) {\n                    var axis = currentAxis.options.vertical ? e.y : e.x;\n                    var delta = axis.startLocation - axis.location;\n\n                    if (delta !== 0) {\n                        ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n                    }\n                }\n            }\n\n            state.axisRanges = ranges$1;\n            this.trigger(DRAG, {\n                axisRanges: ranges$1,\n                originalEvent: e\n            });\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.move(e);\n        }\n    };\n\n    Chart.prototype._end = function _end (e) {\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        var pannable = this._pannable;\n        if (pannable && pannable.end(e)) {\n            this.surface.resumeTracking();\n            this.trigger(DRAG_END, {\n                axisRanges: axisRanges(this._plotArea.axes),\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this.chartService.panning = false;\n        } else {\n            this._endNavigation(e, DRAG_END);\n        }\n\n        if (this._zoomSelection) {\n            var ranges = this._zoomSelection.end(e);\n            if (ranges && !this.trigger(ZOOM, { axisRanges: ranges, originalEvent: e })) {\n                this._zoomSelection.zoom();\n                this.trigger(ZOOM_END, { axisRanges: ranges, originalEvent: e });\n            }\n        }\n    };\n\n    Chart.prototype._stopChartHandlers = function _stopChartHandlers (e) {\n        var selections = this._selections || [];\n        if (!selections.length) {\n            return false;\n        }\n\n        var coords = this._eventCoordinates(e);\n        var pane = this._plotArea.paneByPoint(coords);\n        if (pane) {\n            for (var idx = 0; idx < selections.length; idx++) {\n                if (selections[idx].onPane(pane)) {\n                    return true;\n                }\n            }\n        }\n    };\n\n    Chart.prototype._mousewheelZoomRate = function _mousewheelZoomRate () {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel || {};\n        return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n    };\n\n    Chart.prototype._mousewheel = function _mousewheel (e) {\n        var this$1 = this;\n\n        var delta = mousewheelDelta(e);\n        var mousewheelZoom = this._mousewheelZoom;\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (mousewheelZoom) {\n            var args = { delta: delta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n            if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                e.preventDefault();\n\n                if (!this._zooming) {\n                    this._unsetActivePoint();\n                    this.surface.suspendTracking();\n                    this._zooming = true;\n                }\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n                if (args.axisRanges && !this.trigger(ZOOM, args)) {\n                    mousewheelZoom.zoom();\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1.trigger(ZOOM_END, args);\n                    this$1._zooming = false;\n                    if (this$1.surface) {\n                        this$1.surface.resumeTracking();\n                    }\n                }, MOUSEWHEEL_DELAY);\n            }\n        } else {\n            var state = this._navState;\n            if (!state) {\n                var prevented = this._startNavigation(e, coords, ZOOM_START);\n                if (!prevented) {\n                    state = this._navState;\n                }\n            }\n\n            if (state) {\n                var totalDelta = state.totalDelta || delta;\n                state.totalDelta = totalDelta + delta;\n\n                var axes = this._navState.axes;\n                var ranges = {};\n\n                for (var i = 0; i < axes.length; i++) {\n                    var currentAxis = axes[i];\n                    var axisName = currentAxis.options.name;\n                    if (axisName) {\n                        ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1._mousewheelZoomRate(), coords);\n                    }\n                }\n\n                this.trigger(ZOOM, {\n                    delta: delta,\n                    axisRanges: ranges,\n                    originalEvent: e\n                });\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1._endNavigation(e, ZOOM_END);\n                }, MOUSEWHEEL_DELAY);\n            }\n        }\n    };\n\n    Chart.prototype._startNavigation = function _startNavigation (e, coords, chartEvent) {\n        var plotArea = this._model._plotArea;\n        var pane = plotArea.findPointPane(coords);\n        var axes = plotArea.axes.slice(0);\n\n        if (!pane) {\n            return;\n        }\n\n        var ranges = axisRanges(axes);\n\n        var prevented = this.trigger(chartEvent, {\n            axisRanges: ranges,\n            originalEvent: e\n        });\n\n        if (prevented) {\n            this._cancelDomEvents();\n        } else {\n            this._suppressHover = true;\n            this._unsetActivePoint();\n            this._navState = {\n                axisRanges: ranges,\n                pane: pane,\n                axes: axes\n            };\n        }\n    };\n\n    Chart.prototype._endNavigation = function _endNavigation (e, chartEvent) {\n        if (this._navState) {\n            this.trigger(chartEvent, {\n                axisRanges: this._navState.axisRanges,\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this._navState = null;\n        }\n    };\n\n    Chart.prototype._getChartElement = function _getChartElement (e, match) {\n        var element = this.surface.eventTarget(e);\n        if (element) {\n            return this._drawingChartElement(element, e, match);\n        }\n    };\n\n    Chart.prototype._drawingChartElement = function _drawingChartElement (element, e, match) {\n        var current = element;\n        var chartElement;\n        while (current && !chartElement) {\n            chartElement = current.chartElement;\n            current = current.parent;\n        }\n\n        if (chartElement) {\n            if (chartElement.aliasFor) {\n                chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n            }\n\n            if (match) {\n                chartElement = chartElement.closest(match);\n                if (chartElement && chartElement.aliasFor) {\n                    chartElement = chartElement.aliasFor();\n                }\n            }\n\n            return chartElement;\n        }\n    };\n\n    Chart.prototype._eventCoordinates = function _eventCoordinates (e) {\n        var coordinates = eventCoordinates(e);\n        return this._toModelCoordinates(coordinates.x, coordinates.y);\n    };\n\n    Chart.prototype._elementPadding = function _elementPadding () {\n        if (!this._padding) {\n            var ref = elementStyles(this.element, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref.paddingLeft;\n            var paddingTop = ref.paddingTop;\n            this._padding = {\n                top: paddingTop,\n                left: paddingLeft\n            };\n        }\n\n        return this._padding;\n    };\n\n    Chart.prototype._toDocumentCoordinates = function _toDocumentCoordinates (point) {\n        var padding = this._elementPadding();\n        var offset = elementOffset(this.element);\n\n        return {\n            left: round(point.x + padding.left + offset.left),\n            top: round(point.y + padding.top + offset.top)\n        };\n    };\n\n    // TODO: Breaking change due to peer version change\n    // Reuse by exposing _surfacePoint on Surface\n    Chart.prototype._toModelCoordinates = function _toModelCoordinates (clientX, clientY) {\n        var element = this.element;\n        var offset = elementOffset(element);\n        var padding = this._elementPadding();\n        var inverseTransform = elementScale(element).invert();\n        var point = new geometry.Point(\n            clientX - offset.left - padding.left,\n            clientY - offset.top - padding.top\n        ).transform(inverseTransform);\n\n        return new Point(point.x, point.y);\n    };\n\n    Chart.prototype._tap = function _tap (e) {\n        var this$1 = this;\n\n        var drawingElement = this.surface.eventTarget(e);\n        var element = this._drawingChartElement(drawingElement, e);\n        var sharedTooltip = this._sharedTooltip();\n\n        if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n            this._unsetActivePoint();\n        }\n\n        if (sharedTooltip) {\n            this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n        }\n\n        this._propagateClick(element, e);\n\n        //part of fix for hover issue on windows touch\n        this.handlingTap = true;\n        setTimeout(function () {\n            this$1.handlingTap = false;\n        }, 0);\n    };\n\n    Chart.prototype._click = function _click (e) {\n        var element = this._getChartElement(e);\n        this._propagateClick(element, e);\n    };\n\n    Chart.prototype._propagateClick = function _propagateClick (element, e) {\n        var this$1 = this;\n\n        var current = element;\n        while (current) {\n            if (current.click) {\n                current.click(this$1, e);\n            }\n\n            current = current.parent;\n        }\n    };\n\n    Chart.prototype._startHover = function _startHover (element, e) {\n        if (this._suppressHover) {\n            return false;\n        }\n\n        var point = this._drawingChartElement(element, e, function(element) {\n            return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n        });\n\n        var activePoint = this._activePoint;\n        var multipleSeries = this._plotArea.series.length > 1;\n        var hasInactiveOpacity = this._hasInactiveOpacity();\n\n        this._updateHoveredPoint(point, e);\n\n        if (point && activePoint !== point && point.hover) {\n            this._activePoint = point;\n\n            if (!this._sharedTooltip() && !point.hover(this, e)) {\n                this._displayTooltip(point);\n\n                if (hasInactiveOpacity) {\n                    this._displayInactiveOpacity(point, multipleSeries);\n                } else {\n                    this._highlight.show(point);\n                }\n            }\n        } else if (!point && hasInactiveOpacity) {\n            if (multipleSeries && this._activeChartInstance) {\n                this._updateSeriesOpacity(point, true);\n                this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n                this._activeChartInstance = null;\n            }\n            this._highlight && this._highlight.hide();\n            this._activePoint = null;\n        }\n\n        return point;\n    };\n\n    Chart.prototype._displayTooltip = function _displayTooltip (point) {\n        var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n        if (tooltipOptions.visible) {\n            this._tooltip.show(point);\n        }\n    };\n\n    Chart.prototype._displayInactiveOpacity = function _displayInactiveOpacity (activePoint, multipleSeries, highlightPoints) {\n        var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n        if (!chartInstance) {\n            return;\n        }\n\n        if (multipleSeries) {\n            this._updateSeriesOpacity(activePoint);\n            this._applySeriesOpacity(chartInstance.children, null, true);\n            this._applySeriesOpacity(chartInstance.children, activePoint.series);\n            this._highlight.show(highlightPoints || activePoint);\n        } else {\n            var inactivePoints;\n\n            if (!chartInstance.supportsPointInactiveOpacity()) {\n                this._highlight.show(activePoint);\n                return;\n            }\n\n            inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n            if (inactivePoints && inactivePoints.length) {\n                this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n            }\n        }\n    };\n\n    Chart.prototype._getInactivePoints = function _getInactivePoints (activePoint, chartInstance) {\n        var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n        return allPoints.filter(function (point) { return point !== activePoint; });\n    };\n\n    Chart.prototype._getAllPointsOfType = function _getAllPointsOfType (container, type) {\n        var this$1 = this;\n\n        var points = [];\n\n        for (var i = 0; i < container.children.length; i++) {\n            var element = container.children[i];\n\n            if (element.constructor === type) {\n                points.push(element);\n            } else if (element.children && element.children.length) {\n                points = points.concat(this$1._getAllPointsOfType(element, type));\n            }\n        }\n\n        return points;\n    };\n\n    Chart.prototype._updateHoveredPoint = function _updateHoveredPoint (point, e) {\n        var hoveredPoint = this._hoveredPoint;\n\n        if (hoveredPoint && hoveredPoint !== point) {\n            hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (point && hoveredPoint !== point && point.over) {\n            this._hoveredPoint = point;\n            point.over(this, e);\n        }\n    };\n\n    Chart.prototype._updateSeriesOpacity = function _updateSeriesOpacity (point, resetOpacity) {\n        var this$1 = this;\n\n        var plotArea = this._plotArea;\n        var length = plotArea.series.length;\n\n        for (var i = 0; i < length; i++) {\n            var currSeries = plotArea.series[i];\n            var defaultOpacity = this$1._getDefaultOpacityForSeries(currSeries);\n            var inactiveOpacity = this$1._getInactiveOpacityForSeries(currSeries);\n\n            if (!resetOpacity && currSeries !== point.series) {\n                currSeries.defaultOpacity = defaultOpacity;\n                currSeries.opacity = inactiveOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = inactiveOpacity;\n                }\n            } else {\n                currSeries.opacity = defaultOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = defaultOpacity;\n                }\n            }\n        }\n    };\n\n    Chart.prototype._applySeriesOpacity = function _applySeriesOpacity (elements, activeSeries, reset, series) {\n        var this$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var currSeries = element.series || series;\n            var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n            if (shouldHighlight && element.visual) {\n                var opacity = series ? series.opacity : element.series.opacity;\n                if (currSeries !== activeSeries || reset) {\n                    element.visual.opacity(reset ? 1 : opacity);\n                }\n            }\n\n            if (element.children && element.children.length) {\n                this$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n            }\n        }\n    };\n\n    Chart.prototype._chartInstanceFromPoint = function _chartInstanceFromPoint (point) {\n        var chartInstance = point.parent;\n\n        while (chartInstance && !chartInstance.plotArea) {\n            chartInstance = chartInstance.parent;\n        }\n\n        return chartInstance;\n    };\n\n    Chart.prototype._hasInactiveOpacity = function _hasInactiveOpacity () {\n        var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n        var hasInactiveOpacity = this.options.series.filter(function (s) { return s.highlight.inactiveOpacity !== undefined; } ).length > 0;\n        return hasDefaultInactiveOpacity || hasInactiveOpacity;\n    };\n\n    Chart.prototype._getInactiveOpacityForSeries = function _getInactiveOpacityForSeries (series) {\n        var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n        var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n        return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || DEFAULT_SERIES_OPACITY;\n    };\n\n    Chart.prototype._getDefaultOpacityForSeries = function _getDefaultOpacityForSeries (series) {\n        return series.defaultOpacity || series.opacity || DEFAULT_SERIES_OPACITY;\n    };\n\n    Chart.prototype._mouseover = function _mouseover (e) {\n        var obj;\n\n        var point = this._startHover(e.element, e.originalEvent);\n\n        if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n            this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n            bindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n        }\n    };\n\n    Chart.prototype._mouseMoveTracking = function _mouseMoveTracking (e) {\n        var obj;\n\n        var ref = this;\n        var options = ref.options;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n        var point = ref._activePoint;\n        var coords = this._eventCoordinates(e);\n\n        if (this._plotArea.box.containsPoint(coords)) {\n            if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n                var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n                if (seriesPoint && seriesPoint !== point) {\n                    this._activePoint = seriesPoint;\n\n                    if (!seriesPoint.hover(this, e)) {\n                        var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n                        if (tooltipOptions.visible) {\n                            tooltip.show(seriesPoint);\n                        }\n\n                        highlight.show(seriesPoint);\n                    }\n                }\n            }\n        } else {\n            unbindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n            this._unsetActivePoint();\n            this._mouseMoveTrackHandler = null;\n        }\n    };\n\n    Chart.prototype._mousemove = function _mousemove (e) {\n        var coords = this._eventCoordinates(e);\n        var plotArea = this._plotArea;\n\n        this._trackCrosshairs(coords);\n\n        if (plotArea.hover) {\n            var overPlotArea = plotArea.backgroundContainsPoint(coords);\n            if (overPlotArea) {\n                plotArea.hovered = true;\n                this._plotArea.hover(this, e);\n            } else if (plotArea.hovered && !overPlotArea) {\n                this.trigger(PLOT_AREA_LEAVE);\n                plotArea.hovered = false;\n            }\n        }\n\n        if (this._sharedTooltip()) {\n            this._trackSharedTooltip(coords, e);\n        }\n    };\n\n    Chart.prototype._trackCrosshairs = function _trackCrosshairs (coords) {\n        var crosshairs = this._plotArea.crosshairs;\n\n        for (var i = 0; i < crosshairs.length; i++) {\n            var current = crosshairs[i];\n\n            if (current.box.containsPoint(coords)) {\n                current.showAt(coords);\n            } else {\n                current.hide();\n            }\n        }\n    };\n\n    Chart.prototype._trackSharedTooltip = function _trackSharedTooltip (coords, e, toggle) {\n        if (this._suppressHover) {\n            return;\n        }\n\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var plotArea = ref._plotArea;\n        var categoryAxis = ref._plotArea.categoryAxis;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        if (plotArea.backgroundContainsPoint(coords)) {\n            var index = categoryAxis.pointCategoryIndex(coords);\n            if (index !== this._tooltipCategoryIx || (!this._sharedHighlight && toggle)) {\n                var points = plotArea.pointsByCategoryIndex(index);\n                var pointArgs = points.map(function(point) {\n                    return point.eventArgs(e);\n                });\n                var hoverArgs = pointArgs[0] || {};\n                hoverArgs.categoryPoints = pointArgs;\n\n                if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n                    if (tooltipOptions.visible) {\n                        tooltip.showAt(points, coords);\n                    }\n\n                    highlight.show(points);\n\n                    this._sharedHighlight = true;\n                } else {\n                    tooltip.hide();\n                }\n\n                this._tooltipCategoryIx = index;\n            } else if (toggle && this._sharedHighlight) {\n                highlight.hide();\n                tooltip.hide();\n                this._sharedHighlight = false;\n            }\n        } else if (this._sharedHighlight) {\n            highlight.hide();\n            tooltip.hide();\n            this._tooltipCategoryIx = null;\n            this._sharedHighlight = false;\n        }\n    };\n\n    Chart.prototype.hideElements = function hideElements (options) {\n        var plotArea = this._plotArea;\n        this._mousemove.cancel();\n\n        plotArea.hideCrosshairs();\n\n        this._unsetActivePoint(options);\n    };\n\n    Chart.prototype._unsetActivePoint = function _unsetActivePoint (options) {\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        this._activePoint = null;\n        this._hoveredPoint = null;\n\n        if (tooltip && !(options && options.keepTooltipOpen)) {\n            tooltip.hide();\n        }\n\n        this._tooltipCategoryIx = null;\n        this._sharedHighlight = false;\n\n        if (highlight) {\n            highlight.hide();\n        }\n    };\n\n    Chart.prototype._deferRedraw = function _deferRedraw () {\n        this._redraw();\n    };\n\n    Chart.prototype._clearRedrawTimeout = function _clearRedrawTimeout () {\n        if (this._redrawTimeout) {\n            clearInterval(this._redrawTimeout);\n            this._redrawTimeout = null;\n        }\n    };\n\n    Chart.prototype.bindCategories = function bindCategories () {\n        var this$1 = this;\n\n        var options = this.options;\n        var definitions = [].concat(options.categoryAxis);\n\n        for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n            var axis = definitions[axisIx];\n            if (axis.autoBind !== false) {\n                this$1.bindCategoryAxisFromSeries(axis, axisIx);\n            }\n        }\n    };\n\n    Chart.prototype.bindCategoryAxisFromSeries = function bindCategoryAxisFromSeries (axis, axisIx) {\n        var this$1 = this;\n\n        var series = this.options.series;\n        var seriesLength = series.length;\n        var uniqueCategories = new HashMap();//perf improvement in case type category with dates\n        var items = [];\n        var bindable = false;\n        var dateAxis;\n\n        for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n            var s = series[seriesIx];\n            var onAxis = s.categoryAxis === axis.name || (!s.categoryAxis && axisIx === 0);\n            var data = s.data;\n            var dataLength = data.length;\n            var bind = s.categoryField && onAxis;\n            bindable = bind || bindable;\n\n            if (bind && dataLength > 0) {\n                dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n\n                var getFn = dateAxis ? getDateField : getField;\n\n                for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n                    var dataRow = data[dataIx];\n                    var category = getFn(s.categoryField, dataRow, this$1.chartService.intl);\n\n                    if (dateAxis || !uniqueCategories.get(category)) {\n                        items.push([ category, dataRow ]);\n\n                        if (!dateAxis) {\n                            uniqueCategories.set(category, true);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (items.length > 0) {\n            if (dateAxis) {\n                items = uniqueDates(items, function(a, b) {\n                    return dateComparer(a[0], b[0]);\n                });\n            }\n\n            var result = transpose(items);\n            axis.categories = result[0];\n        } else if (bindable) {\n            axis.categories = [];\n        }\n    };\n\n    Chart.prototype._isBindable = function _isBindable (series) {\n        var valueFields = SeriesBinder.current.valueFields(series);\n        var result = true;\n\n        for (var i = 0; i < valueFields.length; i++) {\n            var field = valueFields[i];\n            if (field === VALUE) {\n                field = \"field\";\n            } else {\n                field = field + \"Field\";\n            }\n\n            if (!defined(series[field])) {\n                result = false;\n                break;\n            }\n        }\n\n        return result;\n    };\n\n    Chart.prototype._noTransitionsRedraw = function _noTransitionsRedraw () {\n        var options = this.options;\n        var transitionsState;\n\n        if (options.transitions !== false) {\n            options.transitions = false;\n            transitionsState = true;\n        }\n\n        this._redraw();\n\n        if (transitionsState) {\n            options.transitions = true;\n        }\n    };\n\n    Chart.prototype._legendItemHover = function _legendItemHover (seriesIndex, pointIndex) {\n        var ref = this;\n        var plotArea = ref._plotArea;\n        var highlight = ref._highlight;\n        var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n        var items;\n\n        if (inArray(currentSeries.type, [ PIE, DONUT, FUNNEL ])) {\n            items = plotArea.findPoint(function(point) {\n                return point.series.index === seriesIndex && point.index === pointIndex;\n            });\n        } else {\n            items = plotArea.pointsBySeriesIndex(seriesIndex);\n        }\n\n        if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n            var multipleSeries = plotArea.series.length > 1;\n            var point = items.length ? items[0] : items;\n\n            this._displayInactiveOpacity(point, multipleSeries, items);\n        } else {\n            highlight.show(items);\n        }\n    };\n\n    Chart.prototype._shouldAttachMouseMove = function _shouldAttachMouseMove () {\n        return this._plotArea.crosshairs.length || (this._tooltip && this._sharedTooltip()) || this.requiresHandlers([ PLOT_AREA_HOVER, PLOT_AREA_LEAVE ]);\n    };\n\n    Chart.prototype.updateMouseMoveHandler = function updateMouseMoveHandler () {\n        var obj, obj$1;\n\n        unbindEvents(this.element, ( obj = {}, obj[ MOUSEMOVE ] = this._mousemove, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            bindEvents(this.element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n    };\n\n    Chart.prototype.applyOptions = function applyOptions (options, theme) {\n        clearMissingValues(this._originalOptions, options);\n        this._originalOptions = deepExtend(this._originalOptions, options);\n        this.options = deepExtend({}, this._originalOptions);\n\n        if (theme) {\n            this._theme = theme;\n            this.chartService.theme = theme;\n        }\n        this._initTheme(this.options, this._theme);\n\n        this._toggleDragZoomEvents();\n    };\n\n    Chart.prototype.setOptions = function setOptions (options, theme) {\n        this.applyOptions(options, theme);\n        this.bindCategories();\n        this.redraw();\n        this.updateMouseMoveHandler();\n    };\n\n    Chart.prototype.setDirection = function setDirection (rtl) {\n        this.chartService.rtl = Boolean(rtl);\n        if (this.surface && this.surface.type === 'svg') {\n            this._destroySurface();\n        }\n    };\n\n    Chart.prototype.setIntlService = function setIntlService (intl) {\n        this.chartService.intl = intl;\n    };\n\n    Chart.prototype.noTransitionsRedraw = function noTransitionsRedraw () {\n        this._noTransitionsRedraw();\n    };\n\n    Chart.prototype.destroy = function destroy () {\n        var obj, obj$1;\n\n        this._destroyed = true;\n\n        unbindEvents(this.element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSEMOVE ] = this._mousemove, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n        if (this.domEvents) {\n            this.domEvents.destroy();\n            delete this.domEvents;\n        }\n\n        if (this._mouseMoveTrackHandler) {\n            unbindEvents(document, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj$1 ));\n        }\n\n        this._destroyView();\n\n        this._destroySurface();\n\n        this._clearRedrawTimeout();\n    };\n\n    Chart.prototype._destroySurface = function _destroySurface () {\n        var surface = this.surface;\n        if (surface) {\n            surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n            surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n            surface.destroy();\n\n            this.surface = null;\n        }\n    };\n\n    Chart.prototype._destroySelections = function _destroySelections () {\n        var selections = this._selections;\n\n        if (selections) {\n            while (selections.length > 0) {\n                selections.shift().destroy();\n            }\n        }\n    };\n\n    Chart.prototype._destroyView = function _destroyView () {\n        var model = this._model;\n\n        if (model) {\n            model.destroy();\n            this._model = null;\n        }\n\n        this._unsetActivePoint();\n\n        this._destroySelections();\n\n        if (this._tooltip) {\n            this._tooltip.destroy();\n        }\n\n        if (this._highlight) {\n            this._highlight.destroy();\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.destroy();\n            delete this._zoomSelection;\n        }\n\n        if (this._pannable) {\n            this._pannable.destroy();\n            delete this._pannable;\n        }\n\n        if (this._mousewheelZoom) {\n            this._mousewheelZoom.destroy();\n            delete this._mousewheelZoom;\n        }\n    };\n\n    return Chart;\n}(Class));\n\nfunction resolveAxisAliases(options) {\n    var aliases = AXIS_NAMES;\n\n    for (var idx = 0; idx < aliases.length; idx++) {\n        var alias = aliases[idx] + \"Axes\";\n        if (options[alias]) {\n            options[aliases[idx] + \"Axis\"] = options[alias];\n            delete options[alias];\n        }\n    }\n}\n\nfunction pointByCategoryName(points, name) {\n    if (points) {\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx].category === name) {\n                return [ points[idx] ];\n            }\n        }\n    }\n}\n\nfunction applyAxisDefaults(options, themeOptions) {\n    var themeAxisDefaults = ((themeOptions || {}).axisDefaults) || {};\n    var axisName, axisDefaults, axes;\n\n    function mapAxisOptions(axisOptions) {\n        var axisColor = (axisOptions || {}).color || axisDefaults.color;\n        var result = deepExtend({},\n            themeAxisDefaults,\n            themeAxisDefaults[axisName],\n            axisDefaults,\n            axisDefaults[axisName], {\n                line: { color: axisColor },\n                labels: { color: axisColor },\n                title: { color: axisColor }\n            },\n            axisOptions\n        );\n\n        delete result[axisName];\n\n        return result;\n    }\n\n    for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n        axisName = AXIS_NAMES[idx] + \"Axis\";\n        axisDefaults = options.axisDefaults || {};\n        axes = [].concat(options[axisName]);\n\n        axes = axes.map(mapAxisOptions);\n\n        options[axisName] = axes.length > 1 ? axes : axes[0];\n    }\n}\n\nfunction applySeriesDefaults(options, themeOptions) {\n    var series = options.series;\n    var seriesLength = series.length;\n    var seriesDefaults = options.seriesDefaults;\n    var commonDefaults = deepExtend({}, options.seriesDefaults);\n    var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n    var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n\n    cleanupNestedSeriesDefaults(commonDefaults);\n    cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n    for (var i = 0; i < seriesLength; i++) {\n        var seriesType = series[i].type || options.seriesDefaults.type;\n\n        var baseOptions = deepExtend(\n            { data: [] },\n            commonThemeDefaults,\n            themeSeriesDefaults[seriesType],\n            { tooltip: options.tooltip },\n            commonDefaults,\n            seriesDefaults[seriesType]\n        );\n\n        series[i]._defaults = baseOptions;\n        series[i] = deepExtend({}, baseOptions, series[i]);\n        series[i].data = series[i].data || [];\n    }\n}\n\nfunction cleanupNestedSeriesDefaults(seriesDefaults) {\n    delete seriesDefaults.bar;\n    delete seriesDefaults.column;\n    delete seriesDefaults.rangeColumn;\n    delete seriesDefaults.line;\n    delete seriesDefaults.verticalLine;\n    delete seriesDefaults.pie;\n    delete seriesDefaults.donut;\n    delete seriesDefaults.area;\n    delete seriesDefaults.verticalArea;\n    delete seriesDefaults.scatter;\n    delete seriesDefaults.scatterLine;\n    delete seriesDefaults.bubble;\n    delete seriesDefaults.candlestick;\n    delete seriesDefaults.ohlc;\n    delete seriesDefaults.boxPlot;\n    delete seriesDefaults.bullet;\n    delete seriesDefaults.verticalBullet;\n    delete seriesDefaults.polarArea;\n    delete seriesDefaults.polarLine;\n    delete seriesDefaults.radarArea;\n    delete seriesDefaults.radarLine;\n    delete seriesDefaults.waterfall;\n}\n\n\nfunction axisRanges(axes) {\n    var ranges = {};\n\n    for (var i = 0; i < axes.length; i++) {\n        var axis = axes[i];\n        var axisName = axis.options.name;\n        if (axisName) {\n            ranges[axisName] = axis.range();\n        }\n    }\n\n    return ranges;\n}\n\nfunction sortDates(dates, comparer) {\n    if ( comparer === void 0 ) comparer = dateComparer;\n\n    for (var i = 1, length = dates.length; i < length; i++) {\n        if (comparer(dates[i], dates[i - 1]) < 0) {\n            dates.sort(comparer);\n            break;\n        }\n    }\n\n    return dates;\n}\n\nfunction uniqueDates(srcDates, comparer) {\n    if ( comparer === void 0 ) comparer = dateComparer;\n\n    var dates = sortDates(srcDates, comparer);\n    var length = dates.length;\n    var result = length > 0 ? [ dates[0] ] : [];\n\n    for (var i = 1; i < length; i++) {\n        if (comparer(dates[i], last(result)) !== 0) {\n            result.push(dates[i]);\n        }\n    }\n\n    return result;\n}\n\nfunction transpose(rows) {\n    var rowCount = rows.length;\n    var result = [];\n\n    for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n        var row = rows[rowIx];\n        var colCount = row.length;\n\n        for (var colIx = 0; colIx < colCount; colIx++) {\n            result[colIx] = result[colIx] || [];\n            result[colIx].push(row[colIx]);\n        }\n    }\n\n    return result;\n}\n\nvar DATA_FIELDS = [ 'data', 'categories' ];\n\nfunction clearMissingValues(originalOptions, options) {\n    for (var field in options) {\n        if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n            var fieldValue = options[field];\n            var originalValue = originalOptions[field];\n            if (defined(originalValue)) {\n                var nullValue = fieldValue === null;\n                if ((nullValue || !defined(fieldValue))) {\n                    delete originalOptions[field];\n                    if (nullValue) {\n                        delete options[field];\n                    }\n                } else if (originalValue && isObject(fieldValue)) {\n                    if (isObject(originalValue)) {\n                        clearMissingValues(originalValue, fieldValue);\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction triggerPaneRender(panes) {\n    for (var idx = 0; idx < panes.length; idx++) {\n        panes[idx].notifyRender();\n    }\n}\n\nsetDefaultOptions(Chart, {\n    renderAs: \"\",\n    chartArea: {},\n    legend: {\n        visible: true,\n        labels: {}\n    },\n    categoryAxis: {},\n    seriesDefaults: {\n        type: COLUMN,\n        data: [],\n        highlight: {\n            visible: true\n        },\n        labels: {},\n        negativeValues: {\n            visible: false\n        }\n    },\n    series: [],\n    seriesColors: null,\n    tooltip: {\n        visible: false\n    },\n    transitions: true,\n    valueAxis: {},\n    plotArea: {},\n    title: {},\n    xAxis: {},\n    yAxis: {},\n    panes: [ {} ],\n    pannable: false,\n    zoomable: false\n});\n\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}