{"ast":null,"code":"import { Class, grep } from '../../common';\nimport { proxy, noop, applyEventMap, getEventMap, on, off, now, getSupportedFeatures } from '../utils';\nimport { Observable } from './observable';\nvar extend = Object.assign;\n\nvar preventDefault = function (e) {\n  e.preventDefault();\n};\n\nvar DEFAULT_MIN_HOLD = 800,\n    CLICK_DELAY = 300,\n    // DEFAULT_THRESHOLD = support.browser.msie ? 5 : 0,\nDEFAULT_THRESHOLD = 0,\n    PRESS = 'press',\n    HOLD = 'hold',\n    SELECT = 'select',\n    START = 'start',\n    MOVE = 'move',\n    END = 'end',\n    CANCEL = 'cancel',\n    TAP = 'tap',\n    DOUBLETAP = 'doubleTap',\n    RELEASE = 'release',\n    GESTURESTART = 'gesturestart',\n    GESTURECHANGE = 'gesturechange',\n    GESTUREEND = 'gestureend',\n    GESTURETAP = 'gesturetap';\nvar THRESHOLD = {\n  'api': 0,\n  'touch': 0,\n  'mouse': 9,\n  'pointer': 9\n};\n\nfunction touchDelta(touch1, touch2) {\n  var x1 = touch1.x.location,\n      y1 = touch1.y.location,\n      x2 = touch2.x.location,\n      y2 = touch2.y.location,\n      dx = x1 - x2,\n      dy = y1 - y2;\n  return {\n    center: {\n      x: (x1 + x2) / 2,\n      y: (y1 + y2) / 2\n    },\n    distance: Math.sqrt(dx * dx + dy * dy)\n  };\n}\n\nfunction getTouches(e) {\n  var support = getSupportedFeatures();\n  var touches = [],\n      originalEvent = e.originalEvent || e,\n      currentTarget = e.currentTarget,\n      idx = 0,\n      length,\n      changedTouches,\n      touch;\n\n  if (e.api) {\n    touches.push({\n      id: 2,\n      event: e,\n      target: e.target,\n      currentTarget: e.target,\n      location: e,\n      type: 'api'\n    });\n  } else if (e.type.match(/touch/)) {\n    changedTouches = originalEvent ? originalEvent.changedTouches : [];\n\n    for (length = changedTouches.length; idx < length; idx++) {\n      touch = changedTouches[idx];\n      touches.push({\n        location: touch,\n        event: e,\n        target: touch.target,\n        currentTarget: currentTarget,\n        id: touch.identifier,\n        type: 'touch'\n      });\n    }\n  } else if (support.pointers || support.msPointers) {\n    touches.push({\n      location: originalEvent,\n      event: e,\n      target: e.target,\n      currentTarget: currentTarget,\n      id: originalEvent.pointerId,\n      type: 'pointer'\n    });\n  } else {\n    touches.push({\n      id: 1,\n      event: e,\n      target: e.target,\n      currentTarget: currentTarget,\n      location: e,\n      type: 'mouse'\n    });\n  }\n\n  return touches;\n}\n\nexport var TouchAxis = function (Class) {\n  function TouchAxis(axis, location) {\n    Class.call(this);\n    var that = this;\n    that.support = getSupportedFeatures();\n    that.invalidZeroEvents = this.support.mobileOS && this.support.mobileOS.android;\n    that.axis = axis;\n\n    that._updateLocationData(location);\n\n    that.startLocation = that.location;\n    that.velocity = that.delta = 0;\n    that.timeStamp = now();\n  }\n\n  if (Class) TouchAxis.__proto__ = Class;\n  TouchAxis.prototype = Object.create(Class && Class.prototype);\n  TouchAxis.prototype.constructor = TouchAxis;\n\n  TouchAxis.prototype.move = function move(location) {\n    var that = this,\n        offset = location['page' + that.axis],\n        timeStamp = now(),\n        timeDelta = timeStamp - that.timeStamp || 1;\n\n    if (!offset && this.invalidZeroEvents) {\n      return;\n    }\n\n    that.delta = offset - that.location;\n\n    that._updateLocationData(location);\n\n    that.initialDelta = offset - that.startLocation;\n    that.velocity = that.delta / timeDelta;\n    that.timeStamp = timeStamp;\n  };\n\n  TouchAxis.prototype._updateLocationData = function _updateLocationData(location) {\n    var that = this,\n        axis = that.axis;\n    that.location = location['page' + axis];\n    that.client = location['client' + axis];\n    that.screen = location['screen' + axis];\n  };\n\n  return TouchAxis;\n}(Class);\nexport var Touch = function (Class) {\n  function Touch(userEvents, target, touchInfo) {\n    Class.call(this);\n    extend(this, {\n      x: new TouchAxis('X', touchInfo.location),\n      y: new TouchAxis('Y', touchInfo.location),\n      type: touchInfo.type,\n      useClickAsTap: userEvents.useClickAsTap,\n      threshold: userEvents.threshold || THRESHOLD[touchInfo.type],\n      userEvents: userEvents,\n      target: target,\n      currentTarget: touchInfo.currentTarget,\n      initialTouch: touchInfo.target,\n      id: touchInfo.id,\n      pressEvent: touchInfo,\n      _clicks: userEvents._clicks,\n      supportDoubleTap: userEvents.supportDoubleTap,\n      _moved: false,\n      _finished: false\n    });\n  }\n\n  if (Class) Touch.__proto__ = Class;\n  Touch.prototype = Object.create(Class && Class.prototype);\n  Touch.prototype.constructor = Touch;\n\n  Touch.prototype.press = function press() {\n    // this._holdTimeout = setTimeout($.proxy(this, '_hold'), this.userEvents.minHold);\n    this._holdTimeout = setTimeout(proxy(this._hold, this), this.userEvents.minHold);\n\n    this._trigger(PRESS, this.pressEvent);\n  };\n\n  Touch.prototype._tap = function _tap(touchInfo) {\n    var that = this;\n    that.userEvents._clicks++;\n\n    if (that.userEvents._clicks === 1) {\n      that._clickTimeout = setTimeout(function () {\n        if (that.userEvents._clicks === 1) {\n          that._trigger(TAP, touchInfo);\n        } else {\n          that._trigger(DOUBLETAP, touchInfo);\n        }\n\n        that.userEvents._clicks = 0;\n      }, CLICK_DELAY);\n    }\n  };\n\n  Touch.prototype._hold = function _hold() {\n    this._trigger(HOLD, this.pressEvent);\n  };\n  /* eslint-disable consistent-return */\n\n\n  Touch.prototype.move = function move(touchInfo) {\n    var that = this;\n    var preventMove = touchInfo.type !== 'api' && that.userEvents._shouldNotMove;\n\n    if (that._finished || preventMove) {\n      return;\n    }\n\n    that.x.move(touchInfo.location);\n    that.y.move(touchInfo.location);\n\n    if (!that._moved) {\n      if (that._withinIgnoreThreshold()) {\n        return;\n      }\n\n      if (!UserEvents.current || UserEvents.current === that.userEvents) {\n        that._start(touchInfo);\n      } else {\n        return that.dispose();\n      }\n    }\n\n    if (!that._finished) {\n      that._trigger(MOVE, touchInfo);\n    }\n  };\n  /* eslint-enable consistent-return */\n\n\n  Touch.prototype.end = function end(touchInfo) {\n    this.endTime = now();\n\n    if (this._finished) {\n      return;\n    }\n\n    this._finished = true;\n\n    this._trigger(RELEASE, touchInfo);\n\n    if (this._moved) {\n      this._trigger(END, touchInfo);\n    } else {\n      if (!this.useClickAsTap) {\n        if (this.supportDoubleTap) {\n          this._tap(touchInfo);\n        } else {\n          this._trigger(TAP, touchInfo);\n        }\n      }\n    }\n\n    clearTimeout(this._holdTimeout);\n    this.dispose();\n  };\n\n  Touch.prototype.dispose = function dispose() {\n    var userEvents = this.userEvents,\n        activeTouches = userEvents.touches || [];\n    this._finished = true;\n    this.pressEvent = null;\n    clearTimeout(this._holdTimeout); // activeTouches.splice($.inArray(this, activeTouches), 1);\n\n    var activeTouchIndex = activeTouches.indexOf(this);\n    activeTouches.splice(activeTouchIndex, 1);\n  };\n\n  Touch.prototype.skip = function skip() {\n    this.dispose();\n  };\n\n  Touch.prototype.cancel = function cancel() {\n    this.dispose();\n  };\n\n  Touch.prototype.isMoved = function isMoved() {\n    return this._moved;\n  };\n\n  Touch.prototype._start = function _start(touchInfo) {\n    clearTimeout(this._holdTimeout);\n    this.startTime = now();\n    this._moved = true;\n\n    this._trigger(START, touchInfo);\n  };\n\n  Touch.prototype._trigger = function _trigger(name, touchInfo) {\n    var that = this,\n        jQueryEvent = touchInfo.event,\n        data = {\n      touch: that,\n      x: that.x,\n      y: that.y,\n      target: that.target,\n      event: jQueryEvent\n    };\n\n    if (that.userEvents.notify(name, data)) {\n      jQueryEvent.preventDefault();\n    }\n  };\n\n  Touch.prototype._withinIgnoreThreshold = function _withinIgnoreThreshold() {\n    var xDelta = this.x.initialDelta,\n        yDelta = this.y.initialDelta;\n    return Math.sqrt(xDelta * xDelta + yDelta * yDelta) <= this.threshold;\n  };\n\n  return Touch;\n}(Class);\n\nfunction withEachUpEvent(callback) {\n  var eventMap = getEventMap(navigator.userAgent);\n  var downEvents = eventMap.up.split(' '),\n      idx = 0,\n      length = downEvents.length;\n\n  for (; idx < length; idx++) {\n    callback(downEvents[idx]);\n  }\n}\n\nexport var UserEvents = function (Observable) {\n  function UserEvents(element, options) {\n    Observable.call(this);\n    var that = this;\n    var filter;\n    var support = getSupportedFeatures();\n    this.support = support;\n    /* eslint-disable no-param-reassign */\n\n    options = options || {};\n    /* eslint-enable no-param-reassign */\n\n    this.options = options;\n    filter = that.filter = options.filter;\n    that.threshold = options.threshold || DEFAULT_THRESHOLD;\n    that.minHold = options.minHold || DEFAULT_MIN_HOLD;\n    that.touches = [];\n    that._maxTouches = options.multiTouch ? 2 : 1;\n    that.allowSelection = options.allowSelection;\n    that.captureUpIfMoved = options.captureUpIfMoved;\n    that.useClickAsTap = !options.fastTap && !support.delayedClick();\n    that._clicks = 0;\n    that.supportDoubleTap = options.supportDoubleTap;\n    var enableGlobalSurface = !support.touch || support.mouseAndTouchPresent;\n    extend(that, {\n      element: element,\n      surface: options.global && enableGlobalSurface ? element.ownerDocument.documentElement : options.surface || element,\n      stopPropagation: options.stopPropagation,\n      pressed: false\n    });\n    this._surfaceMoveHandler = proxy(this._move, this);\n    on(that.surface, applyEventMap('move'), this._surfaceMoveHandler);\n    this._surfaceEndHandler = proxy(this._end, this);\n    on(that.surface, applyEventMap('up cancel'), this._surfaceEndHandler);\n    this._elementStartHandler = proxy(this._start, this);\n    on(element, applyEventMap('down'), filter, this._elementStartHandler);\n\n    if (that.useClickAsTap) {\n      this._elementClickHandler = proxy(this._click, this);\n      on(element, applyEventMap('click'), filter, this._elementClickHandler);\n    }\n\n    if (support.pointers || support.msPointers) {\n      if (support.browser.version < 11) {\n        var defaultAction = 'pinch-zoom double-tap-zoom';\n        element.style['-ms-touch-action'] = options.touchAction && options.touchAction !== 'none' ? defaultAction + ' ' + options.touchAction : defaultAction;\n      } else {\n        element.style['touch-action'] = options.touchAction || 'none';\n      }\n    }\n\n    if (options.preventDragEvent) {\n      this._elementDragStartHandler = preventDefault;\n      on(element, applyEventMap('dragstart'), this._elementDragStartHandler);\n    } // element.on(kendo.applyEventMap('mousedown'), filter, {\n    //     root: element\n    // } '_select');\n    // todo: use root\n\n\n    this._elementSelectHandler = proxy(this._select, this);\n    on(element, applyEventMap('mousedown'), filter, this._elementSelectHandler);\n\n    if (that.captureUpIfMoved && support.eventCapture) {\n      var surfaceElement = that.surface,\n          preventIfMovingProxy = proxy(that.preventIfMoving, that);\n      withEachUpEvent(function (eventName) {\n        surfaceElement.addEventListener(eventName, preventIfMovingProxy, true);\n      });\n    }\n\n    that.bind([PRESS, HOLD, TAP, DOUBLETAP, START, MOVE, END, RELEASE, CANCEL, GESTURESTART, GESTURECHANGE, GESTUREEND, GESTURETAP, SELECT], options);\n  }\n\n  if (Observable) UserEvents.__proto__ = Observable;\n  UserEvents.prototype = Object.create(Observable && Observable.prototype);\n  UserEvents.prototype.constructor = UserEvents;\n\n  UserEvents.prototype.preventIfMoving = function preventIfMoving(e) {\n    if (this._isMoved()) {\n      e.preventDefault();\n    }\n  };\n\n  UserEvents.prototype.destroy = function destroy() {\n    var that = this;\n    var options = this.options;\n    var element = this.element;\n\n    if (that._destroyed) {\n      return;\n    }\n\n    that._destroyed = true;\n\n    if (that.captureUpIfMoved && this.support.eventCapture) {\n      var surfaceElement = that.surface;\n      withEachUpEvent(function (eventName) {\n        surfaceElement.removeEventListener(eventName, that.preventIfMoving);\n      });\n    }\n\n    off(that.surface, applyEventMap('move'), this._surfaceMoveHandler);\n    off(that.surface, applyEventMap('up cancel'), this._surfaceEndHandler);\n    off(element, applyEventMap('down'), this._elementStartHandler);\n\n    if (that.useClickAsTap) {\n      off(element, applyEventMap('click'), this._elementClickHandler);\n    }\n\n    if (options.preventDragEvent) {\n      off(element, applyEventMap('dragstart'), this._elementDragStartHandler);\n    }\n\n    off(element, applyEventMap('mousedown'), this._elementSelectHandler);\n\n    that._disposeAll();\n\n    that.unbind();\n    delete that.surface;\n    delete that.element;\n    delete that.currentTarget;\n  };\n\n  UserEvents.prototype.capture = function capture() {\n    UserEvents.current = this;\n  };\n\n  UserEvents.prototype.cancel = function cancel() {\n    this._disposeAll();\n\n    this.trigger(CANCEL);\n  };\n  /* eslint-disable indent */\n\n\n  UserEvents.prototype.notify = function notify(event, data) {\n    var that = this,\n        touches = that.touches;\n    var eventName = event;\n\n    if (this._isMultiTouch()) {\n      switch (eventName) {\n        case MOVE:\n          eventName = GESTURECHANGE;\n          break;\n\n        case END:\n          eventName = GESTUREEND;\n          break;\n\n        case TAP:\n          eventName = GESTURETAP;\n          break;\n\n        default:\n          break;\n      }\n\n      extend(data, {\n        touches: touches\n      }, touchDelta(touches[0], touches[1]));\n    }\n\n    return this.trigger(eventName, extend(data, {\n      type: eventName\n    }));\n  };\n  /* eslint-enable indent */\n\n\n  UserEvents.prototype.press = function press(x, y, target) {\n    this._apiCall('_start', x, y, target);\n  };\n\n  UserEvents.prototype.move = function move(x, y) {\n    this._apiCall('_move', x, y);\n  };\n\n  UserEvents.prototype.end = function end(x, y) {\n    this._apiCall('_end', x, y);\n  };\n\n  UserEvents.prototype._isMultiTouch = function _isMultiTouch() {\n    return this.touches.length > 1;\n  };\n\n  UserEvents.prototype._maxTouchesReached = function _maxTouchesReached() {\n    return this.touches.length >= this._maxTouches;\n  };\n\n  UserEvents.prototype._disposeAll = function _disposeAll() {\n    var touches = this.touches;\n\n    while (touches.length > 0) {\n      touches.pop().dispose();\n    }\n  };\n\n  UserEvents.prototype._isMoved = function _isMoved() {\n    return grep(this.touches, function (touch) {\n      return touch.isMoved();\n    }).length;\n  };\n\n  UserEvents.prototype._select = function _select(e) {\n    if (!this.allowSelection || this.trigger(SELECT, {\n      event: e\n    })) {\n      e.preventDefault();\n    }\n  };\n\n  UserEvents.prototype._start = function _start(e) {\n    var that = this,\n        idx = 0,\n        filter = that.filter,\n        target,\n        touches = getTouches(e),\n        length = touches.length,\n        touch,\n        which = e.which;\n\n    if (which && which > 1 || that._maxTouchesReached()) {\n      return;\n    }\n\n    UserEvents.current = null;\n    that.currentTarget = e.currentTarget;\n\n    if (that.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    for (; idx < length; idx++) {\n      if (that._maxTouchesReached()) {\n        break;\n      }\n\n      touch = touches[idx];\n\n      if (filter) {\n        target = touch.currentTarget;\n      } else {\n        target = that.element;\n      }\n\n      if (target && target.length === 0) {\n        continue;\n      }\n\n      touch = new Touch(that, target, touch);\n      that.touches.push(touch);\n      touch.press();\n\n      if (that._isMultiTouch()) {\n        that.notify('gesturestart', {});\n      }\n    }\n  };\n\n  UserEvents.prototype._move = function _move(e) {\n    this._eachTouch('move', e);\n  };\n\n  UserEvents.prototype._end = function _end(e) {\n    this._eachTouch('end', e);\n  };\n\n  UserEvents.prototype._click = function _click(e) {\n    var data = {\n      touch: {\n        initialTouch: e.target,\n        target: e.currentTarget,\n        endTime: now(),\n        x: {\n          location: e.pageX,\n          client: e.clientX\n        },\n        y: {\n          location: e.pageY,\n          client: e.clientY\n        }\n      },\n      x: e.pageX,\n      y: e.pageY,\n      target: e.currentTarget,\n      event: e,\n      type: 'tap'\n    };\n\n    if (this.trigger('tap', data)) {\n      e.preventDefault();\n    }\n  };\n\n  UserEvents.prototype._eachTouch = function _eachTouch(methodName, e) {\n    var that = this,\n        dict = {},\n        touches = getTouches(e),\n        activeTouches = that.touches,\n        idx,\n        touch,\n        touchInfo,\n        matchingTouch;\n\n    for (idx = 0; idx < activeTouches.length; idx++) {\n      touch = activeTouches[idx];\n      dict[touch.id] = touch;\n    }\n\n    for (idx = 0; idx < touches.length; idx++) {\n      touchInfo = touches[idx];\n      matchingTouch = dict[touchInfo.id];\n\n      if (matchingTouch) {\n        matchingTouch[methodName](touchInfo);\n      }\n    }\n  };\n\n  UserEvents.prototype._apiCall = function _apiCall(type, x, y, target) {\n    this[type]({\n      api: true,\n      pageX: x,\n      pageY: y,\n      clientX: x,\n      clientY: y,\n      target: target || this.element,\n      stopPropagation: noop,\n      preventDefault: noop\n    });\n  };\n\n  UserEvents.defaultThreshold = function defaultThreshold(value) {\n    DEFAULT_THRESHOLD = value;\n  };\n\n  UserEvents.minHold = function minHold(value) {\n    DEFAULT_MIN_HOLD = value;\n  };\n\n  return UserEvents;\n}(Observable);","map":{"version":3,"sources":["/home/meryem/repos/Movie_Trend_Visualizer/client/node_modules/@progress/kendo-charts/dist/es/map/scroller/user-events.js"],"names":["Class","grep","proxy","noop","applyEventMap","getEventMap","on","off","now","getSupportedFeatures","Observable","extend","Object","assign","preventDefault","e","DEFAULT_MIN_HOLD","CLICK_DELAY","DEFAULT_THRESHOLD","PRESS","HOLD","SELECT","START","MOVE","END","CANCEL","TAP","DOUBLETAP","RELEASE","GESTURESTART","GESTURECHANGE","GESTUREEND","GESTURETAP","THRESHOLD","touchDelta","touch1","touch2","x1","x","location","y1","y","x2","y2","dx","dy","center","distance","Math","sqrt","getTouches","support","touches","originalEvent","currentTarget","idx","length","changedTouches","touch","api","push","id","event","target","type","match","identifier","pointers","msPointers","pointerId","TouchAxis","axis","call","that","invalidZeroEvents","mobileOS","android","_updateLocationData","startLocation","velocity","delta","timeStamp","__proto__","prototype","create","constructor","move","offset","timeDelta","initialDelta","client","screen","Touch","userEvents","touchInfo","useClickAsTap","threshold","initialTouch","pressEvent","_clicks","supportDoubleTap","_moved","_finished","press","_holdTimeout","setTimeout","_hold","minHold","_trigger","_tap","_clickTimeout","preventMove","_shouldNotMove","_withinIgnoreThreshold","UserEvents","current","_start","dispose","end","endTime","clearTimeout","activeTouches","activeTouchIndex","indexOf","splice","skip","cancel","isMoved","startTime","name","jQueryEvent","data","notify","xDelta","yDelta","withEachUpEvent","callback","eventMap","navigator","userAgent","downEvents","up","split","element","options","filter","_maxTouches","multiTouch","allowSelection","captureUpIfMoved","fastTap","delayedClick","enableGlobalSurface","mouseAndTouchPresent","surface","global","ownerDocument","documentElement","stopPropagation","pressed","_surfaceMoveHandler","_move","_surfaceEndHandler","_end","_elementStartHandler","_elementClickHandler","_click","browser","version","defaultAction","style","touchAction","preventDragEvent","_elementDragStartHandler","_elementSelectHandler","_select","eventCapture","surfaceElement","preventIfMovingProxy","preventIfMoving","eventName","addEventListener","bind","_isMoved","destroy","_destroyed","removeEventListener","_disposeAll","unbind","capture","trigger","_isMultiTouch","_apiCall","_maxTouchesReached","pop","which","_eachTouch","pageX","clientX","pageY","clientY","methodName","dict","matchingTouch","defaultThreshold","value"],"mappings":"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","sourcesContent":["import {\n    Class,\n    grep\n} from '../../common';\n\nimport {\n    proxy,\n    noop,\n    applyEventMap,\n    getEventMap,\n    on,\n    off,\n    now,\n    getSupportedFeatures\n} from '../utils';\n\nimport {\n    Observable\n} from './observable';\n\nvar extend = Object.assign;\n\nvar preventDefault = function (e) {\n    e.preventDefault();\n};\n\nvar\n    DEFAULT_MIN_HOLD = 800,\n    CLICK_DELAY = 300,\n    // DEFAULT_THRESHOLD = support.browser.msie ? 5 : 0,\n    DEFAULT_THRESHOLD = 0,\n    PRESS = 'press',\n    HOLD = 'hold',\n    SELECT = 'select',\n    START = 'start',\n    MOVE = 'move',\n    END = 'end',\n    CANCEL = 'cancel',\n    TAP = 'tap',\n    DOUBLETAP = 'doubleTap',\n    RELEASE = 'release',\n    GESTURESTART = 'gesturestart',\n    GESTURECHANGE = 'gesturechange',\n    GESTUREEND = 'gestureend',\n    GESTURETAP = 'gesturetap';\n\nvar THRESHOLD = {\n    'api': 0,\n    'touch': 0,\n    'mouse': 9,\n    'pointer': 9\n};\n\nfunction touchDelta(touch1, touch2) {\n    var x1 = touch1.x.location,\n        y1 = touch1.y.location,\n        x2 = touch2.x.location,\n        y2 = touch2.y.location,\n        dx = x1 - x2,\n        dy = y1 - y2;\n\n    return {\n        center: {\n            x: (x1 + x2) / 2,\n            y: (y1 + y2) / 2\n        },\n        distance: Math.sqrt(dx * dx + dy * dy)\n    };\n}\n\nfunction getTouches(e) {\n    var support = getSupportedFeatures();\n    var touches = [],\n        originalEvent = e.originalEvent || e,\n        currentTarget = e.currentTarget,\n        idx = 0,\n        length, changedTouches, touch;\n\n    if (e.api) {\n        touches.push({\n            id: 2,\n            event: e,\n            target: e.target,\n            currentTarget: e.target,\n            location: e,\n            type: 'api'\n        });\n    } else if (e.type.match(/touch/)) {\n        changedTouches = originalEvent ? originalEvent.changedTouches : [];\n\n        for (length = changedTouches.length; idx < length; idx++) {\n            touch = changedTouches[idx];\n            touches.push({\n                location: touch,\n                event: e,\n                target: touch.target,\n                currentTarget: currentTarget,\n                id: touch.identifier,\n                type: 'touch'\n            });\n        }\n    } else if (support.pointers || support.msPointers) {\n        touches.push({\n            location: originalEvent,\n            event: e,\n            target: e.target,\n            currentTarget: currentTarget,\n            id: originalEvent.pointerId,\n            type: 'pointer'\n        });\n    } else {\n        touches.push({\n            id: 1,\n            event: e,\n            target: e.target,\n            currentTarget: currentTarget,\n            location: e,\n            type: 'mouse'\n        });\n    }\n\n    return touches;\n}\nexport var TouchAxis = (function (Class) {\n    function TouchAxis(axis, location) {\n        Class.call(this);\n        var that = this;\n\n        that.support = getSupportedFeatures();\n        that.invalidZeroEvents = this.support.mobileOS && this.support.mobileOS.android;\n        that.axis = axis;\n        that._updateLocationData(location);\n        that.startLocation = that.location;\n        that.velocity = that.delta = 0;\n        that.timeStamp = now();\n    }\n\n    if ( Class ) TouchAxis.__proto__ = Class;\n    TouchAxis.prototype = Object.create( Class && Class.prototype );\n    TouchAxis.prototype.constructor = TouchAxis;\n\n    TouchAxis.prototype.move = function move (location) {\n        var that = this,\n            offset = location['page' + that.axis],\n            timeStamp = now(),\n            timeDelta = timeStamp - that.timeStamp || 1;\n\n        if (!offset && this.invalidZeroEvents) {\n            return;\n        }\n\n        that.delta = offset - that.location;\n        that._updateLocationData(location);\n        that.initialDelta = offset - that.startLocation;\n        that.velocity = that.delta / timeDelta;\n        that.timeStamp = timeStamp;\n    };\n\n    TouchAxis.prototype._updateLocationData = function _updateLocationData (location) {\n        var that = this,\n            axis = that.axis;\n\n        that.location = location['page' + axis];\n        that.client = location['client' + axis];\n        that.screen = location['screen' + axis];\n    };\n\n    return TouchAxis;\n}(Class));\n\nexport var Touch = (function (Class) {\n    function Touch(userEvents, target, touchInfo) {\n        Class.call(this);\n\n        extend(this, {\n            x: new TouchAxis('X', touchInfo.location),\n            y: new TouchAxis('Y', touchInfo.location),\n            type: touchInfo.type,\n            useClickAsTap: userEvents.useClickAsTap,\n            threshold: userEvents.threshold || THRESHOLD[touchInfo.type],\n            userEvents: userEvents,\n            target: target,\n            currentTarget: touchInfo.currentTarget,\n            initialTouch: touchInfo.target,\n            id: touchInfo.id,\n            pressEvent: touchInfo,\n            _clicks: userEvents._clicks,\n            supportDoubleTap: userEvents.supportDoubleTap,\n            _moved: false,\n            _finished: false\n        });\n    }\n\n    if ( Class ) Touch.__proto__ = Class;\n    Touch.prototype = Object.create( Class && Class.prototype );\n    Touch.prototype.constructor = Touch;\n\n    Touch.prototype.press = function press () {\n        // this._holdTimeout = setTimeout($.proxy(this, '_hold'), this.userEvents.minHold);\n        this._holdTimeout = setTimeout(proxy(this._hold, this), this.userEvents.minHold);\n        this._trigger(PRESS, this.pressEvent);\n    };\n\n    Touch.prototype._tap = function _tap (touchInfo) {\n        var that = this;\n\n        that.userEvents._clicks++;\n\n        if (that.userEvents._clicks === 1) {\n            that._clickTimeout = setTimeout(function() {\n                if (that.userEvents._clicks === 1) {\n                    that._trigger(TAP, touchInfo);\n                } else {\n                    that._trigger(DOUBLETAP, touchInfo);\n                }\n\n                that.userEvents._clicks = 0;\n            }, CLICK_DELAY);\n        }\n    };\n\n    Touch.prototype._hold = function _hold () {\n        this._trigger(HOLD, this.pressEvent);\n    };\n\n    /* eslint-disable consistent-return */\n    Touch.prototype.move = function move (touchInfo) {\n        var that = this;\n        var preventMove = touchInfo.type !== 'api' && that.userEvents._shouldNotMove;\n\n        if (that._finished || preventMove) {\n            return;\n        }\n\n        that.x.move(touchInfo.location);\n        that.y.move(touchInfo.location);\n\n        if (!that._moved) {\n            if (that._withinIgnoreThreshold()) {\n                return;\n            }\n\n            if (!UserEvents.current || UserEvents.current === that.userEvents) {\n                that._start(touchInfo);\n            } else {\n                return that.dispose();\n            }\n        }\n\n        if (!that._finished) {\n            that._trigger(MOVE, touchInfo);\n        }\n    };\n    /* eslint-enable consistent-return */\n\n    Touch.prototype.end = function end (touchInfo) {\n        this.endTime = now();\n\n        if (this._finished) {\n            return;\n        }\n\n        this._finished = true;\n        this._trigger(RELEASE, touchInfo);\n\n        if (this._moved) {\n            this._trigger(END, touchInfo);\n        } else {\n            if (!this.useClickAsTap) {\n                if (this.supportDoubleTap) {\n                    this._tap(touchInfo);\n                } else {\n                    this._trigger(TAP, touchInfo);\n                }\n            }\n        }\n\n        clearTimeout(this._holdTimeout);\n        this.dispose();\n    };\n\n    Touch.prototype.dispose = function dispose () {\n        var userEvents = this.userEvents,\n            activeTouches = userEvents.touches || [];\n\n        this._finished = true;\n        this.pressEvent = null;\n\n        clearTimeout(this._holdTimeout);\n        // activeTouches.splice($.inArray(this, activeTouches), 1);\n        var activeTouchIndex = activeTouches.indexOf(this);\n        activeTouches.splice(activeTouchIndex, 1);\n    };\n\n    Touch.prototype.skip = function skip () {\n        this.dispose();\n    };\n\n    Touch.prototype.cancel = function cancel () {\n        this.dispose();\n    };\n\n    Touch.prototype.isMoved = function isMoved () {\n        return this._moved;\n    };\n\n    Touch.prototype._start = function _start (touchInfo) {\n        clearTimeout(this._holdTimeout);\n        this.startTime = now();\n        this._moved = true;\n        this._trigger(START, touchInfo);\n    };\n\n    Touch.prototype._trigger = function _trigger (name, touchInfo) {\n        var that = this,\n            jQueryEvent = touchInfo.event,\n            data = {\n                touch: that,\n                x: that.x,\n                y: that.y,\n                target: that.target,\n                event: jQueryEvent\n            };\n        if (that.userEvents.notify(name, data)) {\n            jQueryEvent.preventDefault();\n        }\n    };\n\n    Touch.prototype._withinIgnoreThreshold = function _withinIgnoreThreshold () {\n        var xDelta = this.x.initialDelta,\n            yDelta = this.y.initialDelta;\n        return Math.sqrt(xDelta * xDelta + yDelta * yDelta) <= this.threshold;\n    };\n\n    return Touch;\n}(Class));\n\nfunction withEachUpEvent(callback) {\n    var eventMap = getEventMap(navigator.userAgent);\n    var downEvents = eventMap.up.split(' '),\n        idx = 0,\n        length = downEvents.length;\n\n    for (; idx < length; idx++) {\n        callback(downEvents[idx]);\n    }\n}\n\nexport var UserEvents = (function (Observable) {\n    function UserEvents(element, options) {\n        Observable.call(this);\n        var that = this;\n        var filter;\n\n        var support = getSupportedFeatures();\n        this.support = support;\n\n        /* eslint-disable no-param-reassign */\n        options = options || {};\n        /* eslint-enable no-param-reassign */\n        this.options = options;\n\n        filter = that.filter = options.filter;\n        that.threshold = options.threshold || DEFAULT_THRESHOLD;\n        that.minHold = options.minHold || DEFAULT_MIN_HOLD;\n        that.touches = [];\n        that._maxTouches = options.multiTouch ? 2 : 1;\n        that.allowSelection = options.allowSelection;\n        that.captureUpIfMoved = options.captureUpIfMoved;\n        that.useClickAsTap = !options.fastTap && !support.delayedClick();\n        that._clicks = 0;\n        that.supportDoubleTap = options.supportDoubleTap;\n\n        var enableGlobalSurface = !support.touch || support.mouseAndTouchPresent;\n\n        extend(that, {\n            element: element,\n            surface: options.global && enableGlobalSurface ?\n                element.ownerDocument.documentElement :\n                options.surface || element,\n            stopPropagation: options.stopPropagation,\n            pressed: false\n        });\n\n        this._surfaceMoveHandler = proxy(this._move, this);\n        on(that.surface, applyEventMap('move'), this._surfaceMoveHandler);\n\n        this._surfaceEndHandler = proxy(this._end, this);\n        on(that.surface, applyEventMap('up cancel'), this._surfaceEndHandler);\n\n        this._elementStartHandler = proxy(this._start, this);\n        on(element, applyEventMap('down'), filter, this._elementStartHandler);\n\n        if (that.useClickAsTap) {\n            this._elementClickHandler = proxy(this._click, this);\n            on(element, applyEventMap('click'), filter, this._elementClickHandler);\n        }\n\n        if (support.pointers || support.msPointers) {\n            if (support.browser.version < 11) {\n                var defaultAction = 'pinch-zoom double-tap-zoom';\n\n                element.style['-ms-touch-action'] =\n                    options.touchAction && options.touchAction !== 'none' ?\n                        defaultAction + ' ' + options.touchAction :\n                        defaultAction;\n\n            } else {\n                element.style['touch-action'] = options.touchAction || 'none';\n            }\n        }\n        if (options.preventDragEvent) {\n            this._elementDragStartHandler = preventDefault;\n            on(element, applyEventMap('dragstart'), this._elementDragStartHandler);\n        }\n\n        // element.on(kendo.applyEventMap('mousedown'), filter, {\n        //     root: element\n        // } '_select');\n\n        // todo: use root\n        this._elementSelectHandler = proxy(this._select, this);\n        on(element, applyEventMap('mousedown'), filter, this._elementSelectHandler);\n\n        if (that.captureUpIfMoved && support.eventCapture) {\n            var surfaceElement = that.surface,\n                preventIfMovingProxy = proxy(that.preventIfMoving, that);\n\n            withEachUpEvent(function(eventName) {\n                surfaceElement.addEventListener(eventName, preventIfMovingProxy, true);\n            });\n        }\n\n        that.bind([\n            PRESS,\n            HOLD,\n            TAP,\n            DOUBLETAP,\n            START,\n            MOVE,\n            END,\n            RELEASE,\n            CANCEL,\n            GESTURESTART,\n            GESTURECHANGE,\n            GESTUREEND,\n            GESTURETAP,\n            SELECT\n        ], options);\n    }\n\n    if ( Observable ) UserEvents.__proto__ = Observable;\n    UserEvents.prototype = Object.create( Observable && Observable.prototype );\n    UserEvents.prototype.constructor = UserEvents;\n\n    UserEvents.prototype.preventIfMoving = function preventIfMoving (e) {\n        if (this._isMoved()) {\n            e.preventDefault();\n        }\n    };\n\n    UserEvents.prototype.destroy = function destroy () {\n        var that = this;\n        var options = this.options;\n        var element = this.element;\n\n        if (that._destroyed) {\n            return;\n        }\n\n        that._destroyed = true;\n\n        if (that.captureUpIfMoved && this.support.eventCapture) {\n            var surfaceElement = that.surface;\n            withEachUpEvent(function(eventName) {\n                surfaceElement.removeEventListener(eventName, that.preventIfMoving);\n            });\n        }\n\n        off(that.surface, applyEventMap('move'), this._surfaceMoveHandler);\n        off(that.surface, applyEventMap('up cancel'), this._surfaceEndHandler);\n\n        off(element, applyEventMap('down'), this._elementStartHandler);\n\n        if (that.useClickAsTap) {\n            off(element, applyEventMap('click'), this._elementClickHandler);\n        }\n\n        if (options.preventDragEvent) {\n            off(element, applyEventMap('dragstart'), this._elementDragStartHandler);\n        }\n\n        off(element, applyEventMap('mousedown'), this._elementSelectHandler);\n\n        that._disposeAll();\n        that.unbind();\n\n        delete that.surface;\n        delete that.element;\n        delete that.currentTarget;\n    };\n\n    UserEvents.prototype.capture = function capture () {\n        UserEvents.current = this;\n    };\n\n    UserEvents.prototype.cancel = function cancel () {\n        this._disposeAll();\n        this.trigger(CANCEL);\n    };\n\n    /* eslint-disable indent */\n    UserEvents.prototype.notify = function notify (event, data) {\n        var that = this,\n            touches = that.touches;\n        var eventName = event;\n\n        if (this._isMultiTouch()) {\n            switch (eventName) {\n                case MOVE:\n                    eventName = GESTURECHANGE;\n                    break;\n                case END:\n                    eventName = GESTUREEND;\n                    break;\n                case TAP:\n                    eventName = GESTURETAP;\n                    break;\n                default:\n                    break;\n            }\n\n            extend(data, {\n                touches: touches\n            }, touchDelta(touches[0], touches[1]));\n        }\n\n        return this.trigger(eventName, extend(data, {\n            type: eventName\n        }));\n    };\n    /* eslint-enable indent */\n\n    UserEvents.prototype.press = function press (x, y, target) {\n        this._apiCall('_start', x, y, target);\n    };\n\n    UserEvents.prototype.move = function move (x, y) {\n        this._apiCall('_move', x, y);\n    };\n\n    UserEvents.prototype.end = function end (x, y) {\n        this._apiCall('_end', x, y);\n    };\n\n    UserEvents.prototype._isMultiTouch = function _isMultiTouch () {\n        return this.touches.length > 1;\n    };\n\n    UserEvents.prototype._maxTouchesReached = function _maxTouchesReached () {\n        return this.touches.length >= this._maxTouches;\n    };\n\n    UserEvents.prototype._disposeAll = function _disposeAll () {\n        var touches = this.touches;\n        while (touches.length > 0) {\n            touches.pop().dispose();\n        }\n    };\n\n    UserEvents.prototype._isMoved = function _isMoved () {\n        return grep(this.touches, function(touch) {\n            return touch.isMoved();\n        }).length;\n    };\n\n    UserEvents.prototype._select = function _select (e) {\n        if (!this.allowSelection || this.trigger(SELECT, { event: e })) {\n            e.preventDefault();\n        }\n    };\n\n    UserEvents.prototype._start = function _start (e) {\n        var that = this,\n            idx = 0,\n            filter = that.filter,\n            target,\n            touches = getTouches(e),\n            length = touches.length,\n            touch,\n            which = e.which;\n\n        if (which && which > 1 || that._maxTouchesReached()) {\n            return;\n        }\n\n        UserEvents.current = null;\n        that.currentTarget = e.currentTarget;\n\n        if (that.stopPropagation) {\n            e.stopPropagation();\n        }\n\n        for (; idx < length; idx++) {\n            if (that._maxTouchesReached()) {\n                break;\n            }\n\n            touch = touches[idx];\n\n            if (filter) {\n                target = touch.currentTarget;\n            } else {\n                target = that.element;\n            }\n\n            if (target && target.length === 0) {\n                continue;\n            }\n\n            touch = new Touch(that, target, touch);\n            that.touches.push(touch);\n            touch.press();\n\n            if (that._isMultiTouch()) {\n                that.notify('gesturestart', {});\n            }\n        }\n    };\n\n    UserEvents.prototype._move = function _move (e) {\n        this._eachTouch('move', e);\n    };\n\n    UserEvents.prototype._end = function _end (e) {\n        this._eachTouch('end', e);\n    };\n\n    UserEvents.prototype._click = function _click (e) {\n        var data = {\n            touch: {\n                initialTouch: e.target,\n                target: e.currentTarget,\n                endTime: now(),\n                x: {\n                    location: e.pageX,\n                    client: e.clientX\n                },\n                y: {\n                    location: e.pageY,\n                    client: e.clientY\n                }\n            },\n            x: e.pageX,\n            y: e.pageY,\n            target: e.currentTarget,\n            event: e,\n            type: 'tap'\n        };\n\n        if (this.trigger('tap', data)) {\n            e.preventDefault();\n        }\n    };\n\n    UserEvents.prototype._eachTouch = function _eachTouch (methodName, e) {\n        var that = this,\n            dict = {},\n            touches = getTouches(e),\n            activeTouches = that.touches,\n            idx,\n            touch,\n            touchInfo,\n            matchingTouch;\n\n        for (idx = 0; idx < activeTouches.length; idx++) {\n            touch = activeTouches[idx];\n            dict[touch.id] = touch;\n        }\n\n        for (idx = 0; idx < touches.length; idx++) {\n            touchInfo = touches[idx];\n            matchingTouch = dict[touchInfo.id];\n\n            if (matchingTouch) {\n                matchingTouch[methodName](touchInfo);\n            }\n        }\n    };\n\n    UserEvents.prototype._apiCall = function _apiCall (type, x, y, target) {\n        this[type]({\n            api: true,\n            pageX: x,\n            pageY: y,\n            clientX: x,\n            clientY: y,\n            target: target || this.element,\n            stopPropagation: noop,\n            preventDefault: noop\n        });\n    };\n\n    UserEvents.defaultThreshold = function defaultThreshold (value) {\n        DEFAULT_THRESHOLD = value;\n    };\n\n    UserEvents.minHold = function minHold (value) {\n        DEFAULT_MIN_HOLD = value;\n    };\n\n    return UserEvents;\n}(Observable));\n"]},"metadata":{},"sourceType":"module"}