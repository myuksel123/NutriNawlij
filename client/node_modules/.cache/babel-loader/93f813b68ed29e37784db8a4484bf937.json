{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService } from '@progress/kendo-react-intl';\nimport { DomEventsBuilder as ChartDomEventsBuilder, InstanceObserver } from '@progress/kendo-charts';\nimport { canUseDOM } from '@progress/kendo-react-common';\nimport { hasParent } from './utils/main';\nimport { DomEventsBuilder } from './events/dom-events-builder';\nimport { create as createEvent } from './events/chart-event-builder';\nimport { toDomEvent } from './events/dom-event';\nimport { loadTheme } from './theming/theme-service';\nimport createStore from './store/store';\nimport { optionsReducer, themeReducer, observersReducer } from './store/reducer';\nimport { toggle } from './utils/main';\nimport './defaults';\nimport { SeriesTooltip } from './tooltip/Series';\nimport { CrosshairTooltipContainer } from './tooltip/CrosshairContainer';\nimport { ChartContext } from './ChartContext';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\n/**\n * @hidden\n */\n\nvar BaseChart =\n/** @class */\nfunction (_super) {\n  __extends(BaseChart, _super);\n\n  function BaseChart(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.chartInstance = null;\n    _this._element = null;\n    _this.optionsStore = {};\n    _this.optionsUnsubscriber = Function.prototype;\n    _this.themeStore = {};\n    _this.themeUnsubscriber = Function.prototype;\n    _this.observersStore = {};\n    _this.suppressTransitions = false;\n    /* Chart handlers */\n\n    /**\n     * @hidden\n     */\n\n    _this.onRender = function (e) {\n      if (_this.chartInstance !== null) {\n        _this.surface = e.sender.surface;\n\n        _this.trigger('render', e);\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onLegendItemClick = function (e) {\n      if (_this.chartInstance !== null) {\n        /**\n         * In \"controlled\" state the user should toggle the series data visibility\n         */\n        if (_this.props.onLegendItemClick) {\n          _this.trigger('legendItemClick', e);\n        } else {\n          var series = _this.optionsStore.getState().series;\n\n          if (!series) {\n            return;\n          }\n\n          var payload = {};\n          var seriesIndex = e.seriesIndex,\n              pointIndex = e.pointIndex;\n          var seriesByIndex = series[seriesIndex];\n\n          if (pointIndex === undefined) {\n            payload = Object.assign({}, seriesByIndex, {\n              visible: toggle(seriesByIndex.visible)\n            });\n          } else {\n            var pv = seriesByIndex.pointVisibility = seriesByIndex.pointVisibility || [];\n            pv[pointIndex] = toggle(pv[pointIndex]);\n            payload = Object.assign({}, seriesByIndex);\n          }\n\n          _this.optionsStore.dispatch({\n            chartCollectionIdxKey: \"series_\" + seriesIndex,\n            payload: payload\n          });\n\n          _this.suppressTransitions = true;\n        }\n      }\n    };\n    /* Dom event handlers */\n\n    /**\n     * @hidden\n     */\n\n\n    _this.onWindowResize = function () {\n      if (_this.chartInstance !== null) {\n        _this.chartInstance.resize();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onChartMouseLeave = function (e) {\n      var domEvent = toDomEvent(_this, e);\n\n      var isDefaultPrevented = _this.triggerDomEvent('onMouseLeave', domEvent);\n\n      if (isDefaultPrevented) {\n        e.preventDefault();\n      } else if (_this.chartInstance !== null) {\n        _this.chartInstance.hideElements();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onChildMouseLeave = function (e) {\n      var syntheticEvent = e.syntheticEvent;\n\n      if (_this.chartInstance && !hasParent(syntheticEvent.relatedTarget, _this.element)) {\n        _this.chartInstance.hideElements();\n      }\n\n      return false;\n    };\n\n    validatePackage(packageMetadata);\n    _this.optionsStore = createStore(optionsReducer);\n    _this.observersStore = createStore(observersReducer);\n    _this.childrenObserver = new InstanceObserver(_this, {\n      onMouseLeave: 'onChildMouseLeave'\n    });\n    _this.contextValue = {\n      optionsStore: _this.optionsStore,\n      observersStore: _this.observersStore,\n      childrenObserver: _this.childrenObserver\n    };\n    _this.themeStore = createStore(themeReducer);\n    _this.chartObserver = new InstanceObserver(_this, {\n      render: 'onRender',\n      legendItemClick: 'onLegendItemClick'\n    });\n    return _this;\n  }\n\n  Object.defineProperty(BaseChart.prototype, \"element\", {\n    /**\n     * @hidden\n     */\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  BaseChart.prototype.componentDidMount = function () {\n    loadTheme(this.themeStore, this.instantiateCoreChart.bind(this));\n    this.optionsUnsubscriber = this.optionsStore.subscribe(this.refresh.bind(this));\n    this.themeUnsubscriber = this.themeStore.subscribe(this.refresh.bind(this));\n    window.addEventListener('resize', this.onWindowResize);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.componentWillUnmount = function () {\n    this.optionsUnsubscriber();\n    this.themeUnsubscriber();\n\n    if (this.chartInstance !== null) {\n      this.chartInstance.destroy();\n      this.chartInstance = null;\n    }\n\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.componentDidUpdate = function (prevProps) {\n    var _a = this.props,\n        dir = _a.dir,\n        children = _a.children,\n        spreadProps = __rest(_a, [\"dir\", \"children\"]);\n\n    if (this.chartInstance !== null) {\n      var currentIntlService = provideIntlService(this);\n      var chartService = this.chartInstance.chartService;\n      var localeChanged = currentIntlService.locale !== chartService._intlService.locale;\n      var shouldUpdate = Object.entries(prevProps).filter(function (keyValue) {\n        return keyValue[0] !== 'dir' && keyValue[0] !== 'children';\n      }).some(function (keyValue) {\n        var key = keyValue[0],\n            value = keyValue[1];\n        return !(spreadProps.hasOwnProperty(key) && spreadProps[key] === value);\n      });\n\n      if (localeChanged) {\n        this.chartInstance.chartService._intlService = currentIntlService;\n        this.chartInstance.chartService.format._intlService = currentIntlService;\n\n        if (!shouldUpdate) {\n          this.chartInstance.noTransitionsRedraw();\n        }\n      }\n\n      if (shouldUpdate) {\n        this.refresh();\n      }\n\n      if (prevProps.dir !== dir) {\n        this.chartInstance.setDirection(this.getDirection(dir));\n      }\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        _b = _a.style,\n        style = _b === void 0 ? {} : _b,\n        className = _a.className,\n        wrapper = _a.wrapper,\n        children = _a.children;\n    var chartStyles = Object.assign({}, style, {\n      position: 'relative'\n    });\n    var content = React.createElement(wrapper, {\n      className: className,\n      style: chartStyles,\n      key: 'chartElement'\n    }, React.createElement(\"div\", {\n      onMouseLeave: this.onChartMouseLeave,\n      ref: function (el) {\n        return _this._element = el;\n      },\n      className: \"k-chart-surface\"\n    }, children));\n    return React.createElement(ChartContext.Provider, {\n      value: this.contextValue\n    }, React.createElement(SeriesTooltip, {\n      key: \"seriesTooltip\"\n    }), React.createElement(CrosshairTooltipContainer, {\n      key: \"crosshairTooltips\"\n    }), content);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.getDirection = function (dir) {\n    var _this = this;\n\n    var directionFromWindow = function () {\n      return canUseDOM && window.getComputedStyle(_this.element).direction;\n    };\n\n    var direction = dir !== undefined ? dir : directionFromWindow() || 'ltr';\n    return direction === 'rtl';\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.getChartOptions = function () {\n    var _a = this.props,\n        renderAs = _a.renderAs,\n        pannable = _a.pannable,\n        zoomable = _a.zoomable,\n        paneDefaults = _a.paneDefaults,\n        panes = _a.panes,\n        transitions = _a.transitions,\n        seriesColors = _a.seriesColors,\n        seriesDefaults = _a.seriesDefaults,\n        axisDefaults = _a.axisDefaults,\n        deriveOptionsFromParent = _a.deriveOptionsFromParent;\n    var chartOptions = {}; // undefined clears chart defaults which leads to several issues\n\n    if (renderAs !== undefined) {\n      chartOptions.renderAs = renderAs;\n    }\n\n    if (pannable !== undefined) {\n      chartOptions.pannable = pannable;\n    }\n\n    if (zoomable !== undefined) {\n      chartOptions.zoomable = zoomable;\n    }\n\n    if (paneDefaults !== undefined) {\n      chartOptions.paneDefaults = paneDefaults;\n    }\n\n    if (panes !== undefined) {\n      chartOptions.panes = panes;\n    }\n\n    if (transitions !== undefined) {\n      chartOptions.transitions = transitions;\n    }\n\n    if (seriesColors !== undefined) {\n      chartOptions.seriesColors = seriesColors;\n    }\n\n    if (seriesDefaults !== undefined) {\n      chartOptions.seriesDefaults = seriesDefaults;\n    }\n\n    if (axisDefaults !== undefined) {\n      chartOptions.axisDefaults = axisDefaults;\n    }\n\n    chartOptions = Object.assign(chartOptions, this.optionsStore.getState());\n\n    if (deriveOptionsFromParent) {\n      chartOptions = deriveOptionsFromParent(chartOptions);\n    }\n\n    return chartOptions;\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.refresh = function () {\n    if (this.chartInstance !== null) {\n      var themeOptions = this.themeStore.getState();\n      var chartOptions = this.getChartOptions();\n      var transitions = chartOptions.transitions;\n\n      if (this.suppressTransitions) {\n        chartOptions.transitions = false;\n      }\n\n      if (this.props.onRefresh) {\n        this.props.onRefresh.call(undefined, chartOptions, themeOptions, this.chartInstance);\n      } else {\n        this.chartInstance.setOptions(chartOptions, themeOptions);\n      }\n\n      if (this.suppressTransitions) {\n        chartOptions.transitions = transitions;\n        this.suppressTransitions = false;\n      }\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.instantiateCoreChart = function () {\n    var _a = this.props,\n        dir = _a.dir,\n        chartConstructor = _a.chartConstructor;\n    var chartOptions = this.getChartOptions();\n    this.chartInstance = new chartConstructor(this.element, chartOptions, this.themeStore.getState(), {\n      rtl: this.getDirection(dir),\n      intlService: provideIntlService(this),\n      observer: this.chartObserver,\n      sender: this\n    });\n  };\n  /* Triggers public dom event handlers */\n\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.trigger = function (name, e) {\n    var target = this.props.getTarget();\n    var eventObject = createEvent(name, e, target);\n    var handler = 'on' + name.charAt(0).toUpperCase() + name.slice(1);\n    var observers = this.observersStore.getState();\n    var isDefaultPrevented = false;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].trigger(name, e)) {\n        isDefaultPrevented = true;\n      }\n    }\n    /* We have not prevented the event internally, now pass it to the user */\n\n\n    if (isDefaultPrevented === false && eventObject && this.props.hasOwnProperty(handler)) {\n      this.props[handler].call(undefined, eventObject);\n      return eventObject.isDefaultPrevented && eventObject.isDefaultPrevented();\n    }\n\n    return isDefaultPrevented;\n  };\n  /* Used by (event)InstanceObserver to check the wrapper for supported events */\n\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.requiresHandlers = function (names) {\n    for (var idx = 0; idx < names.length; idx++) {\n      var name_1 = names[idx];\n      var handler = 'on' + name_1.charAt(0).toUpperCase() + name_1.slice(1);\n\n      if (this.props.hasOwnProperty(handler)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /* Triggers private dom event handlers */\n\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.prototype.triggerDomEvent = function (name, e) {\n    var observers = this.observersStore.getState();\n    var isDefaultPrevented = false;\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      if (observers[idx].trigger(name, e)) {\n        isDefaultPrevented = true;\n      }\n    }\n\n    return isDefaultPrevented;\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseChart.propTypes = {\n    dir: PropTypes.string,\n    renderAs: PropTypes.oneOf(['svg', 'canvas'])\n  };\n  /**\n   * @hidden\n   */\n\n  BaseChart.defaultProps = {\n    renderAs: 'svg'\n  };\n  return BaseChart;\n}(React.Component);\n\nexport { BaseChart };\nregisterForIntl(BaseChart);\nChartDomEventsBuilder.register(DomEventsBuilder);","map":{"version":3,"sources":["/home/meryem/repos/Movie_Trend_Visualizer/client/node_modules/@progress/kendo-react-charts/dist/es/BaseChart.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__rest","s","e","t","call","indexOf","getOwnPropertySymbols","i","length","React","PropTypes","registerForIntl","provideIntlService","DomEventsBuilder","ChartDomEventsBuilder","InstanceObserver","canUseDOM","hasParent","createEvent","toDomEvent","loadTheme","createStore","optionsReducer","themeReducer","observersReducer","toggle","SeriesTooltip","CrosshairTooltipContainer","ChartContext","validatePackage","packageMetadata","BaseChart","_super","props","_this","chartInstance","_element","optionsStore","optionsUnsubscriber","Function","themeStore","themeUnsubscriber","observersStore","suppressTransitions","onRender","surface","sender","trigger","onLegendItemClick","series","getState","payload","seriesIndex","pointIndex","seriesByIndex","undefined","assign","visible","pv","pointVisibility","dispatch","chartCollectionIdxKey","onWindowResize","resize","onChartMouseLeave","domEvent","isDefaultPrevented","triggerDomEvent","preventDefault","hideElements","onChildMouseLeave","syntheticEvent","relatedTarget","element","childrenObserver","onMouseLeave","contextValue","chartObserver","render","legendItemClick","defineProperty","get","enumerable","configurable","componentDidMount","instantiateCoreChart","bind","subscribe","refresh","window","addEventListener","componentWillUnmount","destroy","removeEventListener","componentDidUpdate","prevProps","_a","dir","children","spreadProps","currentIntlService","chartService","localeChanged","locale","_intlService","shouldUpdate","entries","filter","keyValue","some","key","value","format","noTransitionsRedraw","setDirection","getDirection","_b","style","className","wrapper","chartStyles","position","content","createElement","ref","el","Provider","directionFromWindow","getComputedStyle","direction","getChartOptions","renderAs","pannable","zoomable","paneDefaults","panes","transitions","seriesColors","seriesDefaults","axisDefaults","deriveOptionsFromParent","chartOptions","themeOptions","onRefresh","setOptions","chartConstructor","rtl","intlService","observer","name","target","getTarget","eventObject","handler","charAt","toUpperCase","slice","observers","idx","requiresHandlers","names","name_1","propTypes","string","oneOf","defaultProps","Component","register"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService } from '@progress/kendo-react-intl';\nimport { DomEventsBuilder as ChartDomEventsBuilder, InstanceObserver } from '@progress/kendo-charts';\nimport { canUseDOM } from '@progress/kendo-react-common';\nimport { hasParent } from './utils/main';\nimport { DomEventsBuilder } from './events/dom-events-builder';\nimport { create as createEvent } from './events/chart-event-builder';\nimport { toDomEvent } from './events/dom-event';\nimport { loadTheme } from './theming/theme-service';\nimport createStore from './store/store';\nimport { optionsReducer, themeReducer, observersReducer } from './store/reducer';\nimport { toggle } from './utils/main';\nimport './defaults';\nimport { SeriesTooltip } from './tooltip/Series';\nimport { CrosshairTooltipContainer } from './tooltip/CrosshairContainer';\nimport { ChartContext } from './ChartContext';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\n/**\n * @hidden\n */\nvar BaseChart = /** @class */ (function (_super) {\n    __extends(BaseChart, _super);\n    function BaseChart(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.chartInstance = null;\n        _this._element = null;\n        _this.optionsStore = {};\n        _this.optionsUnsubscriber = Function.prototype;\n        _this.themeStore = {};\n        _this.themeUnsubscriber = Function.prototype;\n        _this.observersStore = {};\n        _this.suppressTransitions = false;\n        /* Chart handlers */\n        /**\n         * @hidden\n         */\n        _this.onRender = function (e) {\n            if (_this.chartInstance !== null) {\n                _this.surface = e.sender.surface;\n                _this.trigger('render', e);\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onLegendItemClick = function (e) {\n            if (_this.chartInstance !== null) {\n                /**\n                 * In \"controlled\" state the user should toggle the series data visibility\n                 */\n                if (_this.props.onLegendItemClick) {\n                    _this.trigger('legendItemClick', e);\n                }\n                else {\n                    var series = _this.optionsStore.getState().series;\n                    if (!series) {\n                        return;\n                    }\n                    var payload = {};\n                    var seriesIndex = e.seriesIndex, pointIndex = e.pointIndex;\n                    var seriesByIndex = series[seriesIndex];\n                    if (pointIndex === undefined) {\n                        payload = Object.assign({}, seriesByIndex, { visible: toggle(seriesByIndex.visible) });\n                    }\n                    else {\n                        var pv = seriesByIndex.pointVisibility = seriesByIndex.pointVisibility || [];\n                        pv[pointIndex] = toggle(pv[pointIndex]);\n                        payload = Object.assign({}, seriesByIndex);\n                    }\n                    _this.optionsStore.dispatch({\n                        chartCollectionIdxKey: \"series_\" + seriesIndex,\n                        payload: payload\n                    });\n                    _this.suppressTransitions = true;\n                }\n            }\n        };\n        /* Dom event handlers */\n        /**\n         * @hidden\n         */\n        _this.onWindowResize = function () {\n            if (_this.chartInstance !== null) {\n                _this.chartInstance.resize();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onChartMouseLeave = function (e) {\n            var domEvent = toDomEvent(_this, e);\n            var isDefaultPrevented = _this.triggerDomEvent('onMouseLeave', domEvent);\n            if (isDefaultPrevented) {\n                e.preventDefault();\n            }\n            else if (_this.chartInstance !== null) {\n                _this.chartInstance.hideElements();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onChildMouseLeave = function (e) {\n            var syntheticEvent = e.syntheticEvent;\n            if (_this.chartInstance && !hasParent(syntheticEvent.relatedTarget, _this.element)) {\n                _this.chartInstance.hideElements();\n            }\n            return false;\n        };\n        validatePackage(packageMetadata);\n        _this.optionsStore = createStore(optionsReducer);\n        _this.observersStore = createStore(observersReducer);\n        _this.childrenObserver = new InstanceObserver(_this, { onMouseLeave: 'onChildMouseLeave' });\n        _this.contextValue = {\n            optionsStore: _this.optionsStore,\n            observersStore: _this.observersStore,\n            childrenObserver: _this.childrenObserver\n        };\n        _this.themeStore = createStore(themeReducer);\n        _this.chartObserver = new InstanceObserver(_this, { render: 'onRender', legendItemClick: 'onLegendItemClick' });\n        return _this;\n    }\n    Object.defineProperty(BaseChart.prototype, \"element\", {\n        /**\n         * @hidden\n         */\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.componentDidMount = function () {\n        loadTheme(this.themeStore, this.instantiateCoreChart.bind(this));\n        this.optionsUnsubscriber = this.optionsStore.subscribe(this.refresh.bind(this));\n        this.themeUnsubscriber = this.themeStore.subscribe(this.refresh.bind(this));\n        window.addEventListener('resize', this.onWindowResize);\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.componentWillUnmount = function () {\n        this.optionsUnsubscriber();\n        this.themeUnsubscriber();\n        if (this.chartInstance !== null) {\n            this.chartInstance.destroy();\n            this.chartInstance = null;\n        }\n        window.removeEventListener('resize', this.onWindowResize);\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.componentDidUpdate = function (prevProps) {\n        var _a = this.props, dir = _a.dir, children = _a.children, spreadProps = __rest(_a, [\"dir\", \"children\"]);\n        if (this.chartInstance !== null) {\n            var currentIntlService = provideIntlService(this);\n            var chartService = this.chartInstance.chartService;\n            var localeChanged = currentIntlService.locale !== chartService._intlService.locale;\n            var shouldUpdate = Object.entries(prevProps)\n                .filter(function (keyValue) { return (keyValue[0] !== 'dir' && keyValue[0] !== 'children'); })\n                .some(function (keyValue) {\n                var key = keyValue[0], value = keyValue[1];\n                return !(spreadProps.hasOwnProperty(key) && spreadProps[key] === value);\n            });\n            if (localeChanged) {\n                this.chartInstance.chartService._intlService = currentIntlService;\n                this.chartInstance.chartService.format._intlService = currentIntlService;\n                if (!shouldUpdate) {\n                    this.chartInstance.noTransitionsRedraw();\n                }\n            }\n            if (shouldUpdate) {\n                this.refresh();\n            }\n            if (prevProps.dir !== dir) {\n                this.chartInstance.setDirection(this.getDirection(dir));\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, _b = _a.style, style = _b === void 0 ? {} : _b, className = _a.className, wrapper = _a.wrapper, children = _a.children;\n        var chartStyles = Object.assign({}, style, { position: 'relative' });\n        var content = React.createElement(wrapper, {\n            className: className,\n            style: chartStyles,\n            key: 'chartElement'\n        }, (React.createElement(\"div\", { onMouseLeave: this.onChartMouseLeave, ref: function (el) { return _this._element = el; }, className: \"k-chart-surface\" }, children)));\n        return (React.createElement(ChartContext.Provider, { value: this.contextValue },\n            React.createElement(SeriesTooltip, { key: \"seriesTooltip\" }),\n            React.createElement(CrosshairTooltipContainer, { key: \"crosshairTooltips\" }),\n            content));\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.getDirection = function (dir) {\n        var _this = this;\n        var directionFromWindow = function () { return canUseDOM && window.getComputedStyle(_this.element).direction; };\n        var direction = dir !== undefined ? dir : (directionFromWindow() || 'ltr');\n        return direction === 'rtl';\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.getChartOptions = function () {\n        var _a = this.props, renderAs = _a.renderAs, pannable = _a.pannable, zoomable = _a.zoomable, paneDefaults = _a.paneDefaults, panes = _a.panes, transitions = _a.transitions, seriesColors = _a.seriesColors, seriesDefaults = _a.seriesDefaults, axisDefaults = _a.axisDefaults, deriveOptionsFromParent = _a.deriveOptionsFromParent;\n        var chartOptions = {};\n        // undefined clears chart defaults which leads to several issues\n        if (renderAs !== undefined) {\n            chartOptions.renderAs = renderAs;\n        }\n        if (pannable !== undefined) {\n            chartOptions.pannable = pannable;\n        }\n        if (zoomable !== undefined) {\n            chartOptions.zoomable = zoomable;\n        }\n        if (paneDefaults !== undefined) {\n            chartOptions.paneDefaults = paneDefaults;\n        }\n        if (panes !== undefined) {\n            chartOptions.panes = panes;\n        }\n        if (transitions !== undefined) {\n            chartOptions.transitions = transitions;\n        }\n        if (seriesColors !== undefined) {\n            chartOptions.seriesColors = seriesColors;\n        }\n        if (seriesDefaults !== undefined) {\n            chartOptions.seriesDefaults = seriesDefaults;\n        }\n        if (axisDefaults !== undefined) {\n            chartOptions.axisDefaults = axisDefaults;\n        }\n        chartOptions = Object.assign(chartOptions, this.optionsStore.getState());\n        if (deriveOptionsFromParent) {\n            chartOptions = deriveOptionsFromParent(chartOptions);\n        }\n        return chartOptions;\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.refresh = function () {\n        if (this.chartInstance !== null) {\n            var themeOptions = this.themeStore.getState();\n            var chartOptions = this.getChartOptions();\n            var transitions = chartOptions.transitions;\n            if (this.suppressTransitions) {\n                chartOptions.transitions = false;\n            }\n            if (this.props.onRefresh) {\n                this.props.onRefresh.call(undefined, chartOptions, themeOptions, this.chartInstance);\n            }\n            else {\n                this.chartInstance.setOptions(chartOptions, themeOptions);\n            }\n            if (this.suppressTransitions) {\n                chartOptions.transitions = transitions;\n                this.suppressTransitions = false;\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.instantiateCoreChart = function () {\n        var _a = this.props, dir = _a.dir, chartConstructor = _a.chartConstructor;\n        var chartOptions = this.getChartOptions();\n        this.chartInstance = new chartConstructor(this.element, chartOptions, this.themeStore.getState(), {\n            rtl: this.getDirection(dir),\n            intlService: provideIntlService(this),\n            observer: this.chartObserver,\n            sender: this\n        });\n    };\n    /* Triggers public dom event handlers */\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.trigger = function (name, e) {\n        var target = this.props.getTarget();\n        var eventObject = createEvent(name, e, target);\n        var handler = 'on' + name.charAt(0).toUpperCase() + name.slice(1);\n        var observers = this.observersStore.getState();\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, e)) {\n                isDefaultPrevented = true;\n            }\n        }\n        /* We have not prevented the event internally, now pass it to the user */\n        if (isDefaultPrevented === false\n            && eventObject\n            && this.props.hasOwnProperty(handler)) {\n            this.props[handler].call(undefined, eventObject);\n            return eventObject.isDefaultPrevented && eventObject.isDefaultPrevented();\n        }\n        return isDefaultPrevented;\n    };\n    /* Used by (event)InstanceObserver to check the wrapper for supported events */\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.requiresHandlers = function (names) {\n        for (var idx = 0; idx < names.length; idx++) {\n            var name_1 = names[idx];\n            var handler = 'on' + name_1.charAt(0).toUpperCase() + name_1.slice(1);\n            if (this.props.hasOwnProperty(handler)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /* Triggers private dom event handlers */\n    /**\n     * @hidden\n     */\n    BaseChart.prototype.triggerDomEvent = function (name, e) {\n        var observers = this.observersStore.getState();\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, e)) {\n                isDefaultPrevented = true;\n            }\n        }\n        return isDefaultPrevented;\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.propTypes = {\n        dir: PropTypes.string,\n        renderAs: PropTypes.oneOf(['svg', 'canvas'])\n    };\n    /**\n     * @hidden\n     */\n    BaseChart.defaultProps = {\n        renderAs: 'svg'\n    };\n    return BaseChart;\n}(React.Component));\nexport { BaseChart };\nregisterForIntl(BaseChart);\nChartDomEventsBuilder.register(DomEventsBuilder);\n"]},"metadata":{},"sourceType":"module"}